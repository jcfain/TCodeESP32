Buttons={templates:[],setNameDebounce:void 0,updateDebounce:void 0,setup(){document.getElementById("bootButtonCommand").value=buttonSettings.bootButtonCommand.replace(" ","\n"),document.getElementById("buttonAnalogDebounce").value=buttonSettings.buttonAnalogDebounce,removeByClass("buttonSetRow"),buttonSettings.buttonSets.forEach(((t,e)=>{const n=t.buttons,o=document.getElementById("buttonControls");let a=Utils.createTextFormRow(0,"Name","buttonSetName"+e,t.name,25,function(t){this.update(t)}.bind(this,e));a.input.setAttribute("readonly",!0);let i=Utils.createNumericFormRow(0,"Pin","buttonSetPin"+e,t.pin,-1,255,function(t){this.update(t)}.bind(this,e));i.input.name="buttonSetPins",i.input.setAttribute("readonly",!0),i.title="The pin this button set is on";var u=document.createElement("div");u.classList.add("tRow");var d=document.createElement("div");d.classList.add("tCell");var s=document.createElement("div");s.classList.add("tCell");var m=document.createElement("span");m.innerText="";var l=document.createElement("button");l.id="ButtonSetEditButton"+e,l.innerText="Edit",l.onclick=function(t){this.editButtonSet(t)}.bind(this,e),d.appendChild(m),s.appendChild(l),u.appendChild(d),u.appendChild(s),a.row.classList.add("buttonSetRow"),i.row.classList.add("buttonSetRow"),u.classList.add("buttonSetRow"),o.appendChild(a.row),o.appendChild(i.row),o.appendChild(u);var b=document.createElement("div");b.classList.add("formTable"),b.style="box-shadow: none; width: 100%;",b.id="buttonContainer"+e,b.name="buttonContainer";var c=document.createElement("div"),r=document.createElement("div");r.classList.add("tHeader"),c.appendChild(r);const p=document.createElement("div");p.id="buttonTable"+e,p.setAttribute("name","buttonTable"),p.classList.add("formTable"),p.style="box-shadow: none; width: auto; margin: 0; padding: 0;";const h=document.createElement("div");let S=Utils.createTextFormRow(0,"Name","buttonSetNameEdit"+e,t.name,25,function(t){this.update(t)}.bind(this,e));S.input.required=!0;let g=Utils.createNumericFormRow(0,"Pin","buttonSetPinEdit"+e,t.pin,-1,255,function(t){this.update(t)}.bind(this,e));g.input.required=!0,g.title="The pin this button set is on",h.appendChild(S.row),h.appendChild(g.row);const v=Utils.createLabelFormRow(0,"Set Buttons");h.appendChild(v.row);for(var C=0;C<n.length;C++){const t=C;let o=Utils.createTextFormRow(0,"Name","buttonName"+e+t,n[C].name,25,function(t,e){validateStringControl("buttonName"+t+e,buttonSettings.buttonSets[t].buttons[e],"name")&&this.update(t)}.bind(this,e,t));o.title="Name of the button",o.input.required=!0,h.appendChild(o.row),o=Utils.createTextAreaFormRow(0,"Command","buttonCommand"+e+t,n[C].command,255,function(t,e){validateStringControl("buttonCommand"+t+e,buttonSettings.buttonSets[t].buttons[e],"command")&&this.update(t)}.bind(this,e,t)),o.title="This is the TCode command executed when the button is pressed",h.appendChild(o.row)}let E=document.createElement("span");E.classList.add("instruction-text"),E.innerHTML="\n            Instructions:<br>\n            You can enter any combination of TCode commands in the inputs above with a few exceptions noted below.<br>\n            Button commands such as #left, #right, #edge and #ok will only work as a single command in the command blocks above.<br>\n            Hard coding the button state may simulate a button release depending on the application. For example:<br>\n            &nbsp&nbsp<i>#ok:0 #othercommand</i><br>\n            Otherwise, enter the command alone. example: <i>#edge</i>\n            ",c.appendChild(p),p.appendChild(h),c.appendChild(E),b.appendChild(c),this.templates.push(b)}))},update(t,e){this.updateDebounce&&clearTimeout(this.updateDebounce),this.updateDebounce=setTimeout(function(t){let e=!0;buttonSettings.bootButtonCommand=document.getElementById("bootButtonCommand").value.replace("\n"," "),validateIntControl("buttonAnalogDebounce",buttonSettings,"buttonAnalogDebounce")?buttonSettings.buttonAnalogDebounce=parseInt(document.getElementById("buttonAnalogDebounce").value):e=!1,null!=t&&(validateIntControl("buttonSetNameEdit"+t,buttonSettings.buttonSets[t].name,"name")?document.getElementById("buttonSetName"+t).value=document.getElementById("buttonSetNameEdit"+t).value:e=!1,validateStringControl("buttonSetPinEdit"+t,buttonSettings.buttonSets[t].pin,"pin")?document.getElementById("buttonSetPin"+t).value=document.getElementById("buttonSetPinEdit"+t).value:e=!1,validateStringControl("buttonSetName"+t,buttonSettings.buttonSets[t],"name")?buttonSettings.buttonSets[t].name=document.getElementById("buttonSetNameEdit"+t).value:e=!1,validatePins()?this.updatebuttonSet(t):e=!1),e&&postButtonSettings(0)}.bind(this,t),e||3e3)},editButtonSet(t){const e=document.getElementById("buttonSetsModal");removeAllChildren(e),e.appendChild(this.templates[t]),this.setbuttonSet(t);const n=document.createElement("span");n.innerText="Edit button set",n.setAttribute("slot","title"),e.appendChild(n),e.show()},setbuttonSet(t){const e=buttonSettings.buttonSets[t].buttons;for(var n=0;n<e.length;n++){const o=n,a=e[n];document.getElementById("buttonName"+t+o).value=a.name,document.getElementById("buttonCommand"+t+o).value=a.command}},updatebuttonSet(t){buttonSettings.buttonSets[t].name=document.getElementById("buttonSetNameEdit"+t).value,buttonSettings.buttonSets[t].pin=parseInt(document.getElementById("buttonSetPinEdit"+t).value);const e=buttonSettings.buttonSets[t].buttons;for(var n=0;n<e.length;n++){const e=n;document.getElementById("buttonName"+t+e)&&(buttonSettings.buttonSets[t].buttons[n].name=document.getElementById("buttonName"+t+e).value,buttonSettings.buttonSets[t].buttons[n].command=document.getElementById("buttonCommand"+t+e).value.replace("\n"," "))}},setButtonSetName(t){this.setNameDebounce&&clearTimeout(this.setNameDebounce),this.setNameDebounce=setTimeout(function(t){validateStringControl("buttonSetName"+t,buttonSettings.buttonSets[t],"name")&&postButtonSettings(0)}.bind(this,t),3e3)}};