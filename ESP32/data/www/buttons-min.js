Buttons={templates:[],setNameDebounce:void 0,updateDebounce:void 0,setup(){document.getElementById("bootButtonCommand").value=buttonSettings.bootButtonCommand.replace(" ","\n"),removeByClass("buttonSetRow"),buttonSettings.buttonSets.forEach(((t,e)=>{const n=t.buttons,o=document.getElementById("buttonControls");let a=Utils.createTextFormRow(0,"Name","buttonSetName"+e,t.name,25,function(t){this.update(t)}.bind(this,e));a.input.required=!0;let u=Utils.createNumericFormRow(0,"Pin","buttonSetPin"+e,t.pin,-1,255,function(t){this.update(t)}.bind(this,e));u.input.name="buttonSetPins",u.title="The pin this button set is on";var d=document.createElement("div");d.classList.add("tRow");var i=document.createElement("div");i.classList.add("tCell");var s=document.createElement("div");s.classList.add("tCell");var m=document.createElement("span");m.innerText="";var l=document.createElement("button");l.id="ButtonSetEditButton"+e,l.innerText="Edit",l.onclick=function(t){this.editButtonSet(t)}.bind(this,e),i.appendChild(m),s.appendChild(l),d.appendChild(i),d.appendChild(s),a.row.classList.add("buttonSetRow"),u.row.classList.add("buttonSetRow"),d.classList.add("buttonSetRow"),o.appendChild(a.row),o.appendChild(u.row),o.appendChild(d);var b=document.createElement("div");b.classList.add("formTable"),b.style="box-shadow: none; width: 100%;",b.id="buttonContainer"+e,b.name="buttonContainer";var c=document.createElement("div"),r=document.createElement("div");r.classList.add("tHeader"),c.appendChild(r);const p=document.createElement("div");p.id="buttonTable"+e,p.setAttribute("name","buttonTable"),p.classList.add("formTable"),p.style="box-shadow: none; width: auto; margin: 0; padding: 0;";const h=document.createElement("div");for(var S=0;S<n.length;S++){const t=S;let o=Utils.createTextFormRow(0,"Name","buttonName"+e+t,n[S].name,25,function(t,e){validateStringControl("buttonName"+t+e,buttonSettings.buttonSets[t].buttons[e],"name")&&this.update(t)}.bind(this,e,t));o.title="Name of the button",o.input.required=!0,h.appendChild(o.row),o=Utils.createTextAreaFormRow(0,"Command","buttonCommand"+e+t,n[S].command,255,function(t,e){validateStringControl("buttonCommand"+t+e,buttonSettings.buttonSets[t].buttons[e],"command")&&this.update(t)}.bind(this,e,t)),o.title="This is the TCode command executed when the button is pressed",h.appendChild(o.row)}c.appendChild(p),p.appendChild(h),b.appendChild(c),this.templates.push(b)}))},update(t){this.updateDebounce&&clearTimeout(this.updateDebounce),this.updateDebounce=setTimeout(function(t){if(buttonSettings.bootButtonCommand=document.getElementById("bootButtonCommand").value.replace("\n"," "),null!=t){let e=!0;validateStringControl("buttonSetName"+t,buttonSettings.buttonSets[t],"name")?buttonSettings.buttonSets[t].name=document.getElementById("buttonSetName"+t).value:e=!1,validatePins()?this.updatebuttonSet(t):e=!1,e&&postButtonSettings(0)}}.bind(this,t),3e3)},editButtonSet(t){const e=document.getElementById("buttonSetsModal");removeAllChildren(e),e.appendChild(this.templates[t]),this.setbuttonSet(t);const n=document.createElement("span");n.innerText="Edit",n.setAttribute("slot","title"),e.appendChild(n),e.show()},setbuttonSet(t){const e=buttonSettings.buttonSets[t].buttons;for(var n=0;n<e.length;n++){const o=n,a=e[n];document.getElementById("buttonName"+t+o).value=a.name,document.getElementById("buttonCommand"+t+o).value=a.command}},updatebuttonSet(t){buttonSettings.buttonSets[t].name=document.getElementById("buttonSetName"+t).value,buttonSettings.buttonSets[t].pin=parseInt(document.getElementById("buttonSetPin"+t).value);const e=buttonSettings.buttonSets[t].buttons;for(var n=0;n<e.length;n++){const e=n;document.getElementById("buttonName"+t+e)&&(buttonSettings.buttonSets[t].buttons[n].name=document.getElementById("buttonName"+t+e).value,buttonSettings.buttonSets[t].buttons[n].command=document.getElementById("buttonCommand"+t+e).value.replace("\n"," "))}},setButtonSetName(t){this.setNameDebounce&&clearTimeout(this.setNameDebounce),this.setNameDebounce=setTimeout(function(t){validateStringControl("buttonSetName"+t,buttonSettings.buttonSets[t],"name")&&postButtonSettings(0)}.bind(this,t),3e3)}};