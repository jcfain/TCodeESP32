<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
<head>
  <title>TCode ESP32</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="icon" href="data:,"> -->
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="text/javascript" src="settings.js"></script>
</head>
<body>
  <div id="errorMessage" class="error" hidden="true"></div>
  <div id="info" class="info" hidden="true"></div>

  <h1>Device Settings</h1>
  <div id="requiresRestart" hidden="true" style="color: red;">Restart required!!</div>
  <form action="/restart" method="POST">
	<div class="centerFlex">
		<table class="rootTable">
			<thead>
				<tr>
					<th>
						<h2>General Settings</h2>
					</th>
					<th>
						<h2>SR6 (Only) Settings</h2>
					</th>
					<th>
						<h2>Wifi Settings</h2>
					</th>
				</tr>
			</thead>
			<tr>
				<td>
					<table id="deviceSettingsTable" class="formTable">
						<tr>
							<td>
								<span>Servo Frequency</span> 
							</td>
							<td>
								<input id="servoFrequency" type="text" maxlength="3" oninput="updateServoFrequency()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Auto T-Valve</span> 
							</td>
							<td>
								<input id="autoValve" type="checkbox" onclick="setAutoValve()"></input>
							</td>
						</tr>
						<tr>
							<td>
								<span>RightServo PIN/ZERO</span> 
							</td>
							<td>
								<input id="RightServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="RightServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>LeftServo PIN/ZERO</span> 
							</td>
							<td>
								<input id="LeftServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="LeftServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>PitchLeftServo PIN/ZERO</span> 
							</td>
							<td>
								<input id="PitchLeftServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="PitchLeftServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>ValveServo PIN/ZERO</span> 
							</td>
							<td>
								<input id="ValveServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="ValveServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>TwistServo PIN/ZERO</span> 
							</td>
							<td>
								<input id="TwistServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="TwistServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>TwistFeedBack PIN</span> 
							</td>
							<td>
								<input id="TwistFeedBack_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Continuous twist</span> 
							</td>
							<td>
								<input id="continuousTwist" type="checkbox" onchange="updateContinuousTwist()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Vibe0 PIN</span> 
							</td>
							<td>
								<input id="Vibe0_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Vibe1 PIN</span> 
							</td>
							<td>
								<input id="Vibe1_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Udp port</span> 
							</td>
							<td>
								<input id="udpServerPort" type="text" maxlength="5" oninput="updateUdpPort()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Host name</span> 
							</td>
							<td>
								<input id="hostname" type="text" maxlength="63" oninput="updateHostName()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Friendly name</span> 
							</td>
							<td>
								<input id="friendlyName" type="text" maxlength="100" oninput="updateFriendlyName()">
							</td>
						</tr>
					</table>
				</td>
				<td>
					<table id="deviceSR6SettingsTable" class="formTable">
						<tr>
							<td>
								<span>SR6 mode</span> 
							</td>
							<td>
								<input id="sr6Mode" type="checkbox" onclick="setSR6Mode()"></input>
							</td>
						</tr>
						<tr>
							<td>
								<span>Right Upper Servo PIN/ZERO</span> 
							</td>
							<td>
								<input id="RightUpperServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="RightUpperServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>LeftUpper Servo PIN/ZERO</span> 
							</td>
							<td>
								<input id="LeftUpperServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="LeftUpperServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Pitch Right Servo PIN/ZERO</span> 
							</td>
							<td>
								<input id="PitchRightServo_PIN" type="text" maxlength="3" oninput="updatePins()">
							</td>
							<td>
								<input id="PitchRightServo_ZERO" type="text" maxlength="4" oninput="updatePins()">
							</td>
						</tr>
					</table>
				</td>
				<td>
					<table id="wifiSettingsTable" class="formTable">
						<tr>
							<td>
								<span>SSID</span> 
							</td>
							<td>
								<input id="ssid" type="text" maxlength="32" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Password</span> 
							</td>
							<td>
								<input id="wifiPass" type="text" maxlength="63" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
							</td>
							<td>
								<input type="checkbox" onclick="showWifiPassword()">Show Password</input>
							</td>
						</tr>
						<tr>
							<td>
							</td>
							<td>
								<input id="staticIP" type="checkbox" onclick="updateStaticIP()">Static IP</input>
							</td>
						</tr>
						<tr>
							<td>
								<span>IP</span> 
							</td>
							<td>
								<input id="localIP" type="text" maxlength="15" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Gateway</span> 
							</td>
							<td>
								<input id="gateway" type="text" maxlength="15" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
								<span>Subnet</span> 
							</td>
							<td>
								<input id="subnet" type="text" maxlength="15" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
								<span>DNS 1</span> 
							</td>
							<td>
								<input id="dns1" type="text" maxlength="15" oninput="updateStaticIP()">
							</td>
						</tr>
						<tr>
							<td>
								<span>DNS 2</span> 
							</td>
							<td>
								<input id="dns2" type="text" maxlength="15" oninput="updateStaticIP()">
							</td>
						</tr>
					</table>
				</td>
				</tr>
		</table>
	</div>
    <button type="submit" id="resetBtn" name="reset" disabled="true">Restart device</button>
  </form>
  <h1>TCode Settings</h1>
  <div style="font-size: small;">(only affects json input)</div>
  <div class="sliderHeading">X Range</div>
  <div id="xRangeLabel">100%</div>
  <div slider id="xRangeSlider">
    <div>
      <div id="xInverseMin" inverse-left style="width:0%;"></div>
      <div id="xInverseMax" inverse-right style="width:100%;"></div>
      <div id="xRange" range style="left:0%;right:0%;"></div>
      <span id="xThumbMin" thumb style="left:0%;"></span>
      <span id="xThumbMax" thumb style="left:100%;"></span>
      <div id="xSignMin" sign style="left:0%;">
        <span id="xValueMin">0</span>
      </div>
      <div id="xSignMax" sign style="left:100%;">
        <span id="xValueMax">100</span>
      </div>
    </div>
    <input id="xMin" type="range" tabindex="0" value="0" max="100" min="0" step="1" oninput="onMinInput('x')" />
    <input id="xMax" type="range" tabindex="0" value="100" max="100" min="0" step="1" oninput="onMaxInput('x')" />
  </div>

  <div class="sliderHeading">Y Roll Range</div>
  <div id="yRollRangeLabel">100%</div>
  <div slider id="yRollRangeSlider">
    <div>
      <div id="yRollInverseMin" inverse-left style="width:0%;"></div>
      <div id="yRollInverseMax" inverse-right style="width:100%;"></div>
      <div id="yRollRange" range style="left:0%;right:0%;"></div>
      <span id="yRollThumbMin" thumb style="left:0%;"></span>
      <span id="yRollThumbMax" thumb style="left:100%;"></span>
      <div id="yRollSignMin" sign style="left:0%;">
        <span id="yRollValueMin">0</span>
      </div>
      <div id="yRollSignMax" sign style="left:100%;">
        <span id="yRollValueMax">100</span>
      </div>
    </div>
    <input id="yRollMin" type="range" tabindex="0" value="0" max="100" min="0" step="1" oninput="onMinInput('yRoll')" />
    <input id="yRollMax" type="range" tabindex="0" value="100" max="100" min="0" step="1" oninput="onMaxInput('yRoll')" />
  </div>
  
  <div class="sliderHeading">X Roll Range</div>
  <div id="xRollRangeLabel">100%</div>
  <div slider id="xRollRangeSlider">
    <div>
      <div id="xRollInverseMin" inverse-left style="width:0%;"></div>
      <div id="xRollInverseMax" inverse-right style="width:100%;"></div>
      <div id="xRollRange" range style="left:0%;right:0%;"></div>
      <span id="xRollThumbMin" thumb style="left:0%;"></span>
      <span id="xRollThumbMax" thumb style="left:100%;"></span>
      <div id="xRollSignMin" sign style="left:0%;">
        <span id="xRollValueMin">0</span>
      </div>
      <div id="xRollSignMax" sign style="left:100%;">
        <span id="xRollValueMax">100</span>
      </div>
    </div>
    <input id="xRollMin" type="range" tabindex="0" value="0" max="100" min="0" step="1" oninput="onMinInput('xRoll')" />
    <input id="xRollMax" type="range" tabindex="0" value="100" max="100" min="0" step="1" oninput="onMaxInput('xRoll')" />
  </div>

  <div class="sliderHeading">Speed</div>
  <div id="speedLabel">1000ms</div>
  <div slider id="speedSlider">
    <div>
      <!-- <div id="speedInverseMin" inverse-left style="width:50%;"></div> -->
      <div id="speedInverseMax" inverse-right style="width:50%;"></div>
      <div id="speedRange" range style="left:0%;right:50%;"></div>
      <span id="speedThumb" thumb style="left:50%;"></span>
      <div id="speedSign" sign style="left:50%;">
        <span id="speedValue">1000</span>
      </div>
    </div>
    <input id="speedInput" type="range" tabindex="0" value="1500" max="4000" min="999" step="1" oninput="onSpeedInput()" list="midSpeed" />
    <datalist id="midSpeed">
      <option value="1000">
      <option value="1500">
      <option value="2500">
      <option value="3500">
    </datalist>
  </div>
</body>
</html>