function toggleMotionRandomSettings(){var o=getMotionProfileSelectedIndex();Utils.toggleControlVisibilityByID("motionOffsetGlobalRandomMinRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom),Utils.toggleControlVisibilityByID("motionOffsetGlobalRandomMaxRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom),Utils.toggleControlVisibilityByID("motionAmplitudeGlobalRandomMinRow",userSettings.motionProfiles[o].motionAmplitudeGlobalRandom),Utils.toggleControlVisibilityByID("motionAmplitudeGlobalRandomMaxRow",userSettings.motionProfiles[o].motionAmplitudeGlobalRandom),Utils.toggleControlVisibilityByID("motionPeriodGlobalRandomMinRow",userSettings.motionProfiles[o].motionPeriodGlobalRandom),Utils.toggleControlVisibilityByID("motionPeriodGlobalRandomMaxRow",userSettings.motionProfiles[o].motionPeriodGlobalRandom),toggleMotionRandomMinMaxSettingsSettings()}function toggleMotionRandomMinMaxSettingsSettings(){var o=getMotionProfileSelectedIndex();Utils.toggleControlVisibilityByID("motionRandomChangeMinRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom||userSettings.motionProfiles[o].motionAmplitudeGlobalRandom||userSettings.motionProfiles[o].motionPeriodGlobalRandom),Utils.toggleControlVisibilityByID("motionRandomChangeMaxRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom||userSettings.motionProfiles[o].motionAmplitudeGlobalRandom||userSettings.motionProfiles[o].motionPeriodGlobalRandom)}function setMotionEnabledClicked(){userSettings.motionEnabled=!userSettings.motionEnabled,sendTCode(userSettings.motionEnabled?"$motion-enable":"$motion-disable"),MotionGenerator.setEnabledStatus()}function setMotionPeriodGlobalRandomClicked(){var o=getMotionProfileSelectedIndex(),e=document.getElementById("motionPeriodGlobalRandom").checked;e?sendTCode("$motion-period-random-on"):sendTCode("$motion-period-random-off"),userSettings.motionProfiles[o].motionPeriodGlobalRandom=e,Utils.toggleControlVisibilityByID("motionPeriodGlobalRandomMinRow",userSettings.motionProfiles[o].motionPeriodGlobalRandom),Utils.toggleControlVisibilityByID("motionPeriodGlobalRandomMaxRow",userSettings.motionProfiles[o].motionPeriodGlobalRandom),toggleMotionRandomMinMaxSettingsSettings(),updateUserSettings()}function setMotionAmplitudeGlobalRandomClicked(){var o=getMotionProfileSelectedIndex(),e=document.getElementById("motionAmplitudeGlobalRandom").checked;e?sendTCode("$motion-amplitude-random-on"):sendTCode("$motion-amplitude-random-off"),userSettings.motionProfiles[o].motionAmplitudeGlobalRandom=e,Utils.toggleControlVisibilityByID("motionAmplitudeGlobalRandomMinRow",userSettings.motionProfiles[o].motionAmplitudeGlobalRandom),Utils.toggleControlVisibilityByID("motionAmplitudeGlobalRandomMaxRow",userSettings.motionProfiles[o].motionAmplitudeGlobalRandom),toggleMotionRandomMinMaxSettingsSettings(),updateUserSettings()}function setMotionOffsetGlobalRandomRandomClicked(){var o=getMotionProfileSelectedIndex(),e=document.getElementById("motionOffsetGlobalRandom").checked;e?sendTCode("$motion-offset-random-on"):sendTCode("$motion-offset-random-off"),userSettings.motionProfiles[o].motionOffsetGlobalRandom=e,Utils.toggleControlVisibilityByID("motionOffsetGlobalRandomMinRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom),Utils.toggleControlVisibilityByID("motionOffsetGlobalRandomMaxRow",userSettings.motionProfiles[o].motionOffsetGlobalRandom),toggleMotionRandomMinMaxSettingsSettings(),updateUserSettings()}function setMotionProfileDefault(){userSettings.motionDefaultProfileIndex=getMotionProfileSelectedIndex(),updateUserSettings(1)}MotionGenerator={setup(){const o=document.getElementById("motionProfiles");removeAllChildren(o),userSettings.motionProfiles.forEach(((o,e)=>{addMotionProfileOption(e,o,e==userSettings.motionDefaultProfileIndex)}));const e=userSettings.motionDefaultProfileIndex;document.getElementById("motionProfiles").value=e,document.getElementById("motionProfileName").value=userSettings.motionProfiles[e].motionProfileName,document.getElementById("motionUpdateGlobal").value=userSettings.motionProfiles[e].motionUpdateGlobal,document.getElementById("motionPeriodGlobal").value=userSettings.motionProfiles[e].motionPeriodGlobal,document.getElementById("motionAmplitudeGlobal").value=userSettings.motionProfiles[e].motionAmplitudeGlobal,document.getElementById("motionOffsetGlobal").value=userSettings.motionProfiles[e].motionOffsetGlobal,document.getElementById("motionPeriodGlobalRandom").checked=userSettings.motionProfiles[e].motionPeriodGlobalRandom,document.getElementById("motionAmplitudeGlobalRandom").checked=userSettings.motionProfiles[e].motionAmplitudeGlobalRandom,document.getElementById("motionOffsetGlobalRandom").checked=userSettings.motionProfiles[e].motionOffsetGlobalRandom,toggleMotionRandomSettings(),document.getElementById("motionPeriodGlobalRandomMin").value=userSettings.motionProfiles[e].motionPeriodGlobalRandomMin,document.getElementById("motionPeriodGlobalRandomMax").value=userSettings.motionProfiles[e].motionPeriodGlobalRandomMax,document.getElementById("motionAmplitudeGlobalRandomMin").value=userSettings.motionProfiles[e].motionAmplitudeGlobalRandomMin,document.getElementById("motionAmplitudeGlobalRandomMax").value=userSettings.motionProfiles[e].motionAmplitudeGlobalRandomMax,document.getElementById("motionOffsetGlobalRandomMin").value=userSettings.motionProfiles[e].motionOffsetGlobalRandomMin,document.getElementById("motionOffsetGlobalRandomMax").value=userSettings.motionProfiles[e].motionOffsetGlobalRandomMax,document.getElementById("motionRandomChangeMax").value=userSettings.motionProfiles[e].motionRandomChangeMax,document.getElementById("motionRandomChangeMin").value=userSettings.motionProfiles[e].motionRandomChangeMin,setIntMinAndMax("motionPeriodGlobalRandomMin","motionPeriodGlobalRandomMax"),setIntMinAndMax("motionAmplitudeGlobalRandomMin","motionAmplitudeGlobalRandomMax"),setIntMinAndMax("motionOffsetGlobalRandomMin","motionOffsetGlobalRandomMax"),setIntMinAndMax("motionRandomChangeMin","motionRandomChangeMax")},setEnabledStatus(){var o=document.getElementById("motionEnabledToggle");o.innerText=userSettings.motionEnabled?"Stop":"Start",userSettings.motionEnabled?(o.classList.add("button-toggle-stop"),o.classList.remove("button-toggle-start")):(o.classList.remove("button-toggle-stop"),o.classList.add("button-toggle-start"))},setupChannels(){var o=document.getElementById("motionChannels");deleteAllChildren(o);var e=getChannelMap(),t=document.createElement("div");t.innerText="Generate motion on channels:",o.appendChild(t);var n=document.createElement("div");n.classList.add("tRow");var i=document.createElement("div");i.classList.add("tCell"),i.innerText="Enabled",i.style="border-right: solid 1px; padding-right: 6px;";var l=document.createElement("div");l.classList.add("tCell"),l.style="justify-content: space-between;";var a=document.createElement("span");a.innerText="Phase";var m="Initial phase in degrees. (0-180) The phase should ideally be between (offset-amplitude/2) and (offset+amplitude/2)";a.title=m;var s=document.createElement("span");s.innerText="Reverse",l.appendChild(a),l.appendChild(s),n.appendChild(i),n.appendChild(l),o.appendChild(n);for(var d=0;d<e.length;d++){var r=e[d];if(userSettings.sr6Mode||!r.sr6Only){var u=document.createElement("div");u.classList.add("tRow");var f=document.createElement("div");f.classList.add("tCell");var g=document.createElement("div");g.classList.add("tCell");var c=r.channel,b=r.channelName,P=userSettings.motionChannels.findIndex((o=>o.name==c)),M=document.createElement("span");M.for="motionChannelCheckbox"+c,M.innerText=b+" ("+c+")";var S=document.createElement("input");S.id="motionChannelCheckbox"+c,S.type="checkbox",S.value=c,S.checked=P>-1,S.onclick=function(){var o=this.value,e=document.getElementById("motionChannelPhaseInput"+o),t=document.getElementById("motionChannelReverseInput"+o);e.readOnly=!this.checked,this.checked||(e.value=0,t.checked=!1);const n=userSettings.motionChannels.findIndex((e=>e.name==o));var i={name:o,phase:0};n>-1&&(i=userSettings.motionChannels[n],userSettings.motionChannels.splice(n,1)),this.checked&&userSettings.motionChannels.push(i),updateUserSettings()};var G=document.createElement("input");G.id="motionChannelPhaseInput"+c,G.type="number",G.min=0,G.step=.01,G.max=180,G.readOnly=-1==P,G.value=-1==P?0:Utils.round2(userSettings.motionChannels[P].phase),G.name=c,G.title=m,G.oninput=function(){-1==userSettings.motionChannels.findIndex((o=>o.name==this.name))?this.checked=!1:Utils.debounce("phaseInput"+this.name,function(){var o=this.name;const e=userSettings.motionChannels.findIndex((e=>e.name==o));e>-1&&(userSettings.motionChannels[e].phase=parseFloat(this.value),updateUserSettings(500))}.bind(this),3e3)};var R=document.createElement("input");R.id="motionChannelReverseInput"+c,R.type="checkbox",R.readOnly=-1==P,R.checked=-1!=P&&userSettings.motionChannels[P].reverse,R.name=c,R.onclick=function(){-1==userSettings.motionChannels.findIndex((o=>o.name==this.name))?this.checked=!1:Utils.debounce("reverseInput"+this.name,function(){var o=this.name;const e=userSettings.motionChannels.findIndex((e=>e.name==o));e>-1?(userSettings.motionChannels[e].reverse=this.value,updateUserSettings(500)):this.checked=!1}.bind(this),3e3)},f.appendChild(M),f.appendChild(S),g.appendChild(G),g.appendChild(R),u.appendChild(f),u.appendChild(g),o.appendChild(u)}}}};var validateGeneratorSettingsDebounce,setMotionGeneratorNameDebounce,selectedMotionProfileIndex=0;function getMotionProfileSelectedIndex(){return selectedMotionProfileIndex}function setSelectedMotionProfileIndex(o){selectedMotionProfileIndex=parseInt(o)}function clearMotionProfileSelection(){var o=document.getElementsByName("motionProfileButton");o&&o.forEach((o=>o.classList.remove("button-pressed")))}function selectMotionProfile(o,e){clearMotionProfileSelection(),setSelectedMotionProfileIndex(o);document.getElementById(`motionProfile${o}`).classList.add("button-pressed"),setMotionGeneratorSettingsProfile(o),e&&sendTCode(`$motion-set-profile:${o+1}`)}function setMotionGeneratorSettings(){validateGeneratorSettingsDebounce&&clearTimeout(validateGeneratorSettingsDebounce),validateGeneratorSettingsDebounce=setTimeout((()=>{var o=getMotionProfileSelectedIndex();validateIntControl("motionUpdateGlobal",userSettings.motionProfiles[o],"motionUpdateGlobal"),validateIntControl("motionPeriodGlobal",userSettings.motionProfiles[o],"motionPeriodGlobal"),validateIntControl("motionAmplitudeGlobal",userSettings.motionProfiles[o],"motionAmplitudeGlobal"),validateIntControl("motionOffsetGlobal",userSettings.motionProfiles[o],"motionOffsetGlobal"),setIntMinAndMax("motionPeriodGlobalRandomMin","motionPeriodGlobalRandomMax"),validateIntControl("motionPeriodGlobalRandomMin",userSettings.motionProfiles[o],"motionPeriodGlobalRandomMin"),validateIntControl("motionPeriodGlobalRandomMax",userSettings.motionProfiles[o],"motionPeriodGlobalRandomMax"),setIntMinAndMax("motionAmplitudeGlobalRandomMin","motionAmplitudeGlobalRandomMax"),validateIntControl("motionAmplitudeGlobalRandomMin",userSettings.motionProfiles[o],"motionAmplitudeGlobalRandomMin"),validateIntControl("motionAmplitudeGlobalRandomMax",userSettings.motionProfiles[o],"motionAmplitudeGlobalRandomMax"),setIntMinAndMax("motionOffsetGlobalRandomMin","motionOffsetGlobalRandomMax"),validateIntControl("motionOffsetGlobalRandomMin",userSettings.motionProfiles[o],"motionOffsetGlobalRandomMin"),validateIntControl("motionOffsetGlobalRandomMax",userSettings.motionProfiles[o],"motionOffsetGlobalRandomMax"),setIntMinAndMax("motionRandomChangeMin","motionRandomChangeMax"),validateIntControl("motionRandomChangeMin",userSettings.motionProfiles[o],"motionRandomChangeMin"),validateIntControl("motionRandomChangeMax",userSettings.motionProfiles[o],"motionRandomChangeMax"),updateUserSettings(1)}),3e3)}function setMotionGeneratorName(){setMotionGeneratorNameDebounce&&clearTimeout(setMotionGeneratorNameDebounce),setMotionGeneratorNameDebounce=setTimeout((()=>{var o=getMotionProfileSelectedIndex();validateStringControl("motionProfileName",userSettings.motionProfiles[o])&&(updateMotionProfileName(o),updateUserSettings(1))}),3e3)}function addMotionProfileOption(o,e,t){const n=document.getElementById("motionProfiles");var i=document.createElement("button");i.id=`motionProfile${o}`,i.name="motionProfileButton",i.value=o,i.innerText=e.motionProfileName,i.onclick=function(o,e){selectMotionProfile(o,!0)}.bind(this,o),n.appendChild(i),t&&selectMotionProfile(o)}function updateMotionProfileName(o){const e=document.getElementsByName("motionProfileButton");for(var t=getMotionProfileSelectedIndex(),n=0;n<e.length;n++)if(e[n].value==o){t=n;break}e[t].innerText=userSettings.motionProfiles[o].motionProfileName}function setMotionGeneratorSettingsDefault(){var o=getMotionProfileSelectedIndex();confirm(`Are you sure you want to set the current profile '${userSettings.motionProfiles[o].motionProfileName}' to the default settings?`)&&(setProfileMotionGeneratorSettingsDefault(o),updateUserSettings(1))}function setProfileMotionGeneratorSettingsDefault(o){userSettings.motionProfiles[o].motionProfileName="Profile "+o+1,userSettings.motionProfiles[o].motionUpdateGlobal=100,userSettings.motionProfiles[o].motionPeriodGlobal=2e3,userSettings.motionProfiles[o].motionAmplitudeGlobal=60,userSettings.motionProfiles[o].motionOffsetGlobal=5e3,userSettings.motionProfiles[o].motionPeriodGlobalRandom=!1,userSettings.motionProfiles[o].motionPeriodGlobalRandomMin=500,userSettings.motionProfiles[o].motionPeriodGlobalRandomMax=2e3,userSettings.motionProfiles[o].motionAmplitudeGlobalRandom=!1,userSettings.motionProfiles[o].motionAmplitudeGlobalRandomMin=20,userSettings.motionProfiles[o].motionAmplitudeGlobalRandomMax=60,userSettings.motionProfiles[o].motionOffsetGlobalRandom=!1,userSettings.motionProfiles[o].motionOffsetGlobalRandomMin=3e3,userSettings.motionProfiles[o].motionOffsetGlobalRandomMax=7e3,userSettings.motionProfiles[o].motionRandomChangeMinDefault=3e3,userSettings.motionProfiles[o].motionRandomChangeMaxDefault=3e4,userSettings.motionProfiles[o].motionPhaseGlobal=0,userSettings.motionProfiles[o].motionReversedGlobal=!1,setMotionGeneratorSettingsProfile(o)}function setMotionGeneratorSettingsProfile(o){document.getElementById("motionProfileName").value=userSettings.motionProfiles[o].motionProfileName,document.getElementById("motionUpdateGlobal").value=userSettings.motionProfiles[o].motionUpdateGlobal,document.getElementById("motionPeriodGlobal").value=userSettings.motionProfiles[o].motionPeriodGlobal,document.getElementById("motionAmplitudeGlobal").value=userSettings.motionProfiles[o].motionAmplitudeGlobal,document.getElementById("motionOffsetGlobal").value=userSettings.motionProfiles[o].motionOffsetGlobal,document.getElementById("motionPeriodGlobalRandom").checked=userSettings.motionProfiles[o].motionPeriodGlobalRandom,document.getElementById("motionPeriodGlobalRandomMin").value=userSettings.motionProfiles[o].motionPeriodGlobalRandomMin,document.getElementById("motionPeriodGlobalRandomMax").value=userSettings.motionProfiles[o].motionPeriodGlobalRandomMax,document.getElementById("motionAmplitudeGlobalRandom").checked=userSettings.motionProfiles[o].motionAmplitudeGlobalRandom,document.getElementById("motionAmplitudeGlobalRandomMin").value=userSettings.motionProfiles[o].motionAmplitudeGlobalRandomMin,document.getElementById("motionAmplitudeGlobalRandomMax").value=userSettings.motionProfiles[o].motionAmplitudeGlobalRandomMax,document.getElementById("motionOffsetGlobalRandom").checked=userSettings.motionProfiles[o].motionOffsetGlobalRandom,document.getElementById("motionOffsetGlobalRandomMin").value=userSettings.motionProfiles[o].motionOffsetGlobalRandomMin,document.getElementById("motionOffsetGlobalRandomMax").value=userSettings.motionProfiles[o].motionOffsetGlobalRandomMax,toggleMotionRandomSettings()}