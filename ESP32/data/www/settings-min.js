var upDateTimeout,upDatePinsTimeout,importSettingsInputElement,websocket,userSettings={},wifiSettings={},pinoutSettings={},systemInfo={},motionProviderSettings={},buttonSettings={},restartRequired=!1,documentLoaded=!1,debugEnabled=!0,playSounds=!1;const EndPointType={System:{uri:"/systemInfo"},Common:{uri:"/settings"},Pins:{uri:"/pins"},Wifi:{uri:"/wifiSettings"},MotionProfile:{uri:"/motionProfiles"},Buttons:{uri:"/buttonSettings"}},TCodeVersion={V3:0,V4:1},latestTCodeVersion=TCodeVersion.V3,MotorType={Servo:0,BLDC:1},ModuleType={WROOM32:0,S3:1},BuildFeature={NONE:0,DEBUG:1,WIFI:2,BLUETOOTH:3,BLE:4,DA:5,DISPLAY_:6,TEMP:7,HTTPS:8,COEXIST:9,MAX_FEATURE:10};let BoardType={DEVKIT:0,ZERO:1,N8R8:2,CRIMZZON:3,ISAAC:4},DeviceType={OSR:0,SR6:1,SSR1:2},BLEDeviceType={TCODE:0,LOVE:1,HC:2},BLELoveDeviceType={EDGE:0},BLDCEncoderType={MT6701:0,SPI:1,PWM:2};const servoDegreeValue180=637,servoDegreeValue270=425;dubugMessages=[];var startUpHostName,startUpWebPort,startUpStaticIP,startUpLocalIP,tcodeVersions=[],testDeviceUseIModifier=!1,testDeviceDisableModifier=!1,testDeviceModifierValue="1000",restartClicked=!1,serverPollingTimeOut=null,staticIPAddressTimeout=null,hostnameTimeout=null,serverPollRetryCount=0,channelSliderList=[],restartingAndChangingAddress=!1,resettingAllToDefault=!1;const defaultDebounce=3e3;let validPWMpins=[2,4,5,12,13,14,15,16,17,18,19,21,22,23,25,26,27,32,33],inputOnlypins=[34,35,36,39],adc1Pins=[36,37,38,39,32,33,34,35],adc2Pins=[4,0,2,15,13,12,14,27,25,26];const AvailibleChannelsV3=[{channel:"L0",channelName:"Stroke",switch:!1,sr6Only:!1},{channel:"L1",channelName:"Surge",switch:!1,sr6Only:!0},{channel:"L2",channelName:"Sway",switch:!1,sr6Only:!0},{channel:"R0",channelName:"Twist",switch:!1,sr6Only:!1},{channel:"R1",channelName:"Roll",switch:!1,sr6Only:!1},{channel:"R2",channelName:"Pitch",switch:!1,sr6Only:!1},{channel:"V0",channelName:"Vibe 1",switch:!0,sr6Only:!1},{channel:"V1",channelName:"Vibe 2",switch:!0,sr6Only:!1},{channel:"V2",channelName:"Vibe 3",switch:!0,sr6Only:!1},{channel:"V3",channelName:"Vibe 4",switch:!0,sr6Only:!1},{channel:"A0",channelName:"Suck manual",switch:!1,sr6Only:!1},{channel:"A1",channelName:"Suck level",switch:!1,sr6Only:!1},{channel:"A2",channelName:"Lube",switch:!0,sr6Only:!1},{channel:"A3",channelName:"Aux",switch:!1,sr6Only:!1}],AvailibleChannelsBLDC=[{channel:"L0",channelName:"Stroke",switch:!1,sr6Only:!1},{channel:"R0",channelName:"Twist",switch:!1,sr6Only:!1},{channel:"V0",channelName:"Vibe 1",switch:!0,sr6Only:!1},{channel:"V1",channelName:"Vibe 2",switch:!0,sr6Only:!1},{channel:"V2",channelName:"Vibe 3",switch:!0,sr6Only:!1},{channel:"V3",channelName:"Vibe 4",switch:!0,sr6Only:!1},{channel:"A0",channelName:"Suck manual",switch:!1,sr6Only:!1},{channel:"A1",channelName:"Suck level",switch:!1,sr6Only:!1},{channel:"A2",channelName:"Lube",switch:!0,sr6Only:!1},{channel:"A3",channelName:"Aux",switch:!1,sr6Only:!1}];function logdebug(A){debugEnabled&&console.log(A)}function get(A,e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.onload=function(){200!==i.status?(showError("Error loading "+A+"!"),n&&n(i)):t&&t(i)},n&&(i.onerror=function(){n(i)}),i.send()}function onDocumentLoad(){getSystemInfo(!0),createImportSettingsInputElement()}function getSystemInfo(A){let e=!1;serverPollingTimeOut&&(e=!0,clearTimeout(serverPollingTimeOut),serverPollingTimeOut=null),showLoading("Loading system info..."),get("system info",EndPointType.System.uri,(function(t){if(!(systemInfo=t.response))return e||showError("Error getting system info!"),void startServerPoll();"restarting"!==systemInfo.status?(setSystemInfo(),A?getPinSettings(A):e||hideLoading(),serverPollRetryCount=0):startServerPoll()}),(function(A){e||showError("Error getting system info!"),startServerPoll()}))}function getPinSettings(A){showLoading("Loading pinout..."),get("Pinout settings",EndPointType.Pins.uri,(function(e){(pinoutSettings=e.response)?setPinoutSettings():showError("Error getting pinout!"),A?getWifiSettings(A):hideLoading()}))}function getWifiSettings(A){showLoading("Loading network settings..."),get("wifi settings",EndPointType.Wifi.uri,(function(e){(wifiSettings=e.response)&&wifiSettings.ssid?(startUpStaticIP=wifiSettings.staticIP,startUpLocalIP=wifiSettings.localIP,startUpWebPort=wifiSettings.webServerPort,startUpHostName=wifiSettings.hostname,setWifiSettings()):showError("Error getting wifi settings!"),A?getMotionProviderSettings(A):hideLoading()}))}function getMotionProviderSettings(A){showLoading("Loading motion generator settings..."),get("motion settings",EndPointType.MotionProfile.uri,(function(e){(motionProviderSettings=e.response)&&motionProviderSettings.motionProfiles||showError("Error getting motion provider settings!"),A?getButtonSettings(A):hideLoading()}))}function getButtonSettings(A){showLoading("Loading button settings..."),get("button settings",EndPointType.Buttons.uri,(function(e){(buttonSettings=e.response)&&buttonSettings.bootButtonCommand||showError("Error getting button settings!"),A?getUserSettings():hideLoading()}))}function postCommonSettings(A,e){updateUserSettings(A,EndPointType.Common.uri,userSettings,e)}function postAndValidatePinoutSettings(A,e){(!A||A<0)&&(A=0),upDatePinsTimeout&&clearTimeout(upDatePinsTimeout),upDatePinsTimeout=setTimeout((()=>{validatePins()?updateUserSettings(0,EndPointType.Pins.uri,pinoutSettings,e):e&&e()}),A)}function postPinoutSettings(A,e){updateUserSettings(A,EndPointType.Pins.uri,pinoutSettings,e)}function postWifiSettings(A,e){updateUserSettings(A,EndPointType.Wifi.uri,wifiSettings,e)}function postButtonSettings(A,e){updateUserSettings(A,EndPointType.Buttons.uri,buttonSettings,e)}function postMotionProfileSettings(A){MotionGenerator.updateSettings(null,null,A)}function updateALLUserSettings(){postCommonSettings(0,updatePinoutChain)}document.addEventListener("DOMContentLoaded",(function(){onDocumentLoad(),document.getElementById("page-body").style.visibility="visible",hideLoading()}));var updatePinoutChain=function(){postAndValidatePinoutSettings(0,updateWifiSettingsChain)},updateWifiSettingsChain=function(){postWifiSettings(0,updateButtonSettingsChain)},updateButtonSettingsChain=function(){postButtonSettings(0,updateMotionProfileSettings)},updateMotionProfileSettings=function(){postMotionProfileSettings(0)};function getUserSettings(){showLoading("Loading common settings..."),get("common settings",EndPointType.Common.uri,(function(A){(userSettings=A.response)&&null!=userSettings.TCodeVersion?setUserSettings():showError("Error getting user settings!"),initWebSocket()}))}function initWebSocket(){try{var A=(hasFeature(BuildFeature.HTTPS)?"wss://":"ws://")+window.location.host+"/ws";"function"==typeof MozWebSocket&&(WebSocket=MozWebSocket),websocket&&websocket.close(),(websocket=new WebSocket(A)).onopen=function(A){logdebug("CONNECTED"),restartClicked&&(getUserSettings(),restartClicked=!1),hideLoading(),serverPollingTimeOut&&(clearTimeout(serverPollingTimeOut),serverPollingTimeOut=null)},websocket.onclose=function(A){if(logdebug("DISCONNECTED"),!serverPollingTimeOut&&!restartingAndChangingAddress){let A="Server disconnected, waiting for restart...";systemInfo.apMode&&(A+="\n(Hint: Make sure you are connected to the AP in wifi networks."),showLoading(A),startServerPoll()}},websocket.onmessage=function(A){wsCallBackFunction(A),logdebug("MESSAGE RECIEVED: "+A.data)},websocket.onerror=function(A){serverPollingTimeOut||restartingAndChangingAddress||(showLoading("Server error, waiting for restart..."),startServerPoll())}}catch(A){serverPollingTimeOut||restartingAndChangingAddress||(showLoading("Server exception, waiting for restart..."),startServerPoll())}}function wsCallBackFunction(A){try{var e=JSON.parse(A.data);switch(e.command){case"sleeveTempStatus":var t=(i=e.message).status,n=i.temp;document.getElementById("currentTempStatus").value=t,document.getElementById("currentTemp").value=n;break;case"internalTempStatus":var i;t=(i=e.message).status,n=i.temp;document.getElementById("internalTempStatus").value=t,document.getElementById("internalTemp").value=n;break;case"tempReached":playSuccess();break;case"batteryStatus":wsBatteryStatus(e);break;case"debug":debug(e.message)}}catch(A){console.error(A.toString())}}function debug(A){debugTextElement&&(dubugMessages.length>1e3&&dubugMessages.shift(),dubugMessages.push(A),debugTextElement.value=dubugMessages.join("\n"),debugTextElement.scrollTop=debugTextElement.scrollHeight)}function setLogLevelUI(){const A=document.getElementById("clearTagsButton"),e=document.getElementById("clearFiltersButton"),t=userSettings["log-include-tags"],n=userSettings["log-exclude-tags"];A.disabled=!t?.length,e.disabled=!n?.length,A.innerText="Clear included"+(t.length?": "+t.length:""),e.innerText="Clear excluded"+(n.length?": "+n.length:"")}function setLogLevel(){userSettings.logLevel=parseInt(document.getElementById("logLevel").value);const A=document.querySelectorAll("#log-include-tags option:checked");userSettings["log-include-tags"]=Array.from(A).map((A=>A.value));const e=document.querySelectorAll("#log-exclude-tags option:checked");userSettings["log-exclude-tags"]=Array.from(e).map((A=>A.value)),setLogLevelUI(),updateUserSettings()}function clearTags(A){userSettings[A]=[];for(var e=document.getElementById(A),t=0;t<e.options.length;t++)e.options[t].selected=!1;setLogLevelUI(),updateUserSettings()}function clearLog(){debugTextElement&&(dubugMessages=[],debugTextElement.value="")}function playSuccess(){playSounds&&new Audio("data:audio/mp3;base64,SUQzAwAAAAAfdlRJVDIAAAA+AAAAZWFyY29uIGV2ZW50IG5vdGlmaWNhdGlvbiBhbGVydCBtdXNpY2FsICAodmVyIDMpIHNvdW5kIGVmZmVjdFRQRTEAAAARAAAAc291bmRlZmZlY3QuaW5mb1RBTEIAAAARAAAAc291bmRlZmZlY3QuaW5mb1RZRVIAAAAFAAAAMjAxNlRDT04AAAAFAAAAUm9ja0NPTU0AAAAPAAAAZW5nAGV4Y2VsbGVudCFUUkNLAAAABgAAADA0LzE2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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nbI6LOGdZdS5FqNy3twsesxGOco+c6rmlO+piSUEEAxBQ0IhEy4ayp4XrN7rVqcxzMZQ6Bbnlk390YD/+mBgGCvDAAMSIVRrWqJOAAAJcAAAAQuU01Gt5GtwAAAlwAAABFzE1JsAhFZSgaAb4dVZNHRGAeiKkSC4wUJJ732jX+o7FPGGVggQ2foDrbyx+I3/UpO+oojemxgtmMYzmpL5z8j/mQVoHM6dCMBBgopKUHMUHu/9SsQHJnWrta2AYYCX/pC6MmFlIUmpXl3F2GJBrFXYYVU4iQ8go/xMQhvW6SJrQYkcQO5l/n/++/zk1L65iYb8Y4TdPllTBuRRB5ycSm8uRwJIlF3a0sJmsXLtlzdaP8AElXGrrK0BKUh9KFkAAk6ZRo+2kgygdFdHgyBkL4Yb5kZFRf5+qpVCnHGs2s7/+mJg8knTAAMdNlRreTLcAAAJcAAAAQtQn0+s6KlwAAAlwAAABFj/6752QyPiAI9XG1EWRKIlXdFe9eVHVRGJHMiGREFyyxFiloEThWKLfTV/X//////////////////////////////////iCm87HbZGgB4EUyqiQYSBlcw6YB08zWaC0WqvMRNU+rbF734mSU3q1eGFhzAFArcazTY5Y/JL6bnEhqShAs0iBXDCFqEjD6ECgfMAEg8ylI0XvlxI1i/ZTsQFJXWrbI0ANARYDNF1x0ERFgbaQ0WHd8zBldM2MHR3JZlvuRj0Fq7UfdShmxwCMCd5//c9MGRMPOBUWFQKkas7//pgYP5+44AC4C7U61ka3AAACXAAAAELiL9PrWhrcAAAJcAAAASShgWUkXkAKwHFQWaXY6bOE3vMsV9f//////////////////////////////////////////////////////////////5AJvSt3a1oCKl+ImQKh4m8YyEeFY33GHMig0RjwKzeU0GqpvZzuW7kfVlCX4VZ7j37l75nn+/nH2Du6UwZ6wEtRXVV8TWXEK+TRR5TUGRjXJtZnWGsxT1r1aQC55ZLbIkA9DObhbFRcrHgmCLNYtdC4psDkjSVPMwgCD5BZpjUvKOxbljWwQOMRAd2mxrbyuybRk8UKhyw7lIS//pgYKgb9oADoTFS6zoq3AAACXAAAAELEElJreNG8AAAJcAAAARnZDuR32n1Veziw+lisYLkGPatwvStvuGdGLI////////////////////////////////////////////////////////////////////////////+kAuZ1qSNogKE0WYOLFUa2cGa0F3YjBa9rKdBj/NcLZxSn7iaj963GHbTkYufTcI7//93ilCltj3kI905TPKa8fTSi4GFtuPWiirEFN6Zu2yJAAoKHArKMCSqJBljo+HXo+g61mN4RnhLZKlXOsbs09SU8QaWtkfXgbHuPfr+UFzAooPwgGj4IXrF//pgYPSg/4AELRJSa1nRvAAACXAAAAELKMVLrGRrcAAAJcAAAARWCo8JnQdMk7FhUkE6n/f0b+iWegl///////////////////////////////////////////////////////////////////////////5Alz3W22RgBThf1QOJwCRCABKEo07pBDJX6FktXTlnqTCqeHc7W3SO2FFDq+ZzLsbVXsEz+3aEtN75dq9bqdbKq+rtFfv5/5t9mkrV7m1abo+oAyaaOyNogJmsygkwAhhBMYEcpTSG6cDIMSZcDaIYgCaxxuHDNaqww7aGCV58Vvxn//+N/+Y56smhezPHbgvp//piYBiM/4AEri1R61oa3AAACXAAAAEJQElDrWcm8AAAJcAAAARxB9usky0CJQ81iyWEFs6/1f//////////////////////////////////////////////////////////////////////////////////////////////9ICb0zckbIAhhcs0h6VQlqmGURgKxvuOSXlHxCeBXfh2/2qcUt6tdgBVdeI+892Ped+5aQRcWH2kD1ywi9PYIhXUjTh329CoAuaaSSNogLsYLbMMIhAQrBuI1LFrohM8D+h0WLsMn7P1jdcv0W7MNjAxzNOLTY5crRwKkG0mIocvWRPTyWklPv/6YGAxi/+ABG0SUetYybwAAAlwAAABCixLSa1jJvgAACXAAAAEHhHbFwsdcQW5BYornbAnZ0///////////////////////////////////////////////////////////////////////////////////////////UAbddbJG0QIEfWoDlXqHjxjFr8osGiCiqtQweHIa3YkeVKd1s7bpI2tAtOd3MAb7zvICsKYdqHuuk2sS1lipU07KtxzPJdp9laEFOa6SSNkAQJjklk8ZMcZSo/G2kMEJ24zoNe5sGUlPjWPGqXVLcoYGuUH5Qfj3n8rXrD0IOSPThciSY0DKNgFbP/6YGAvAf+ABMMVUOtZycwAAAlwAAABCNBJQazjJvAAACXAAAAEQf2mrOr/////////////////////////////////////////////////////////////////////////////////////////////////////hADlkn/SAlazKOgoQVBKAICRBKFZ0FHtHaEA2p5vrb5lVNQhs63j5AKOEYbWmx7z93sLb4sVnuzRr9t/Rb/t79keedxT+a2lRV27d+hKaAMltsbaRAE7coACDKgFAYI4ixIbpwUYup3hDFQSjvLc0b9hTcwp30AokzUmOWdc/lDZ3Ws2KJr6WUm/YYeaYP/6YGB0av+ABK0R0Gs4ybwAAAlwAAABCShJQ6znJvAAACXAAAAE52hbFd79X///////////////////////////////////////////////////////////////////////////////////////////////////////////EAnLbJJGyAHNmI+OkbCTMBoCcDT4bHCNykoVS3ueGtVTqds63UibugNaRcy33dCYEgxRSEgibhU2sNO5dxi8JxQ+kKxV9+xfiALtssbaRAD8SWOGAG8A0SIYx5WexQRQQ7p0GnHEO43qxqzk9z/wKog5wxpsus6xqTNvC6MMMZbzL0Vl0XteJP/6YmDE4P+ABJASUGs4ybwAAAlwAAABCbRLOY1jRvgAACXAAAAESVu0lYoGrCP/6f//////////////////////////////////////////////////////////////////////////////////////////////////////////ZAMksv/QBFJnIaBIuJgiKCu+GKQHPXS1wK+lE3h2tLT2jnf/tIFSRTuJVe/r921lXH/nFtY572c53v/DnDYJtsvVsv/7QQA1Z5eNbZEAJNnwoBKhAkGZCY+2tR9BlrIbAVO9tNr/khtz09rOpK2gnDJN/Z86DQczgrD9l1KjVTFy603iDQn/+mBghTL/gAS3Es7rWdG8AAAJcAAAAQj4Rz2sYybwAAAlwAAABKtavar///////////////////////////////////////////////////////////////////////////////////////////////////////////////VAEniKidtrWAJN80Cl2fERwM8Fup3QWW1V7gUlqePebqnYvLeYZVEpg3RtaazLaxrcdE9hYkYcspJjjKnniq3xKPYTf69AVAAoh5edrrWAIrQQWBCH3FjhD4xCN04OQ051hnVbDvMbh9RW//wQngXcPYVmiIqBlt9EIpWLkyQ1j3IvUsueafr/+mBglZL/gATQEs7rONG8AAAJcAAAAQigSTeNYyb4AAAlwAAABHROMThcLf///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ZgBq6u0SSNkATnJoQDkoaFRkoD5i133GFMCekEraDn/92Anea7qu0A7UpfjdW0ZfTagmlQi2E69RR6pFY0oItGnoNIMwAWhXZ5JGyAKLlcwwiwCuAG7jWM9sQqepxTMFodz/5oHJX987gzInAg4ClhUwKNQtr2i2biSxSs/sGXVuL6vcj/+mBgjVP/gATED8x7ONG4AAAJcAAAAQjEPzXs4ybgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0QQOZeAi22RACi7YDkV8jxopa5cMUgQtiLLBHyUXcemiICqn4nsGw5s2tyqXtFVo1vCNCy9azb+KEC4v11kgZvdfJI0ABRZ3CIuMDyJlKj661HYGXshsA0b5Zb/HSFX4b1uHDKC2IRcE2oSxzxeWcpU4eEi5AdFaPY5u1np//+mBgQRH/gATbD8z7OMG4AAAJcAAAAQh0Py3s4ybgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0yFvdNJJIwBO5SkIEIACgUGXDV0huCI7wweW1c/HvEGC3lTah9AupqbLetavc0fM0OYaFBtxsUOuFqLEvdX9MWzCF9LN/0AXvjwXHJQnuEfTWCbL4X0IMSQQyTdgWT+JuBfgU7Wq6ioUQm7tQUxgaGpiV7cXio9etf///////////+mJg8UD/gAUUDst7OMm4AAAJcAAAAQesOzHs4gbgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+GDLXRf/4C9yVjISwRQWZrA+4rG7ZARwqqw8t7zTrBSV+SgJ04EU4+JZh7LLHEaVT7it1hscTWaVmRRfwDgwVrI7n/Ac+4Cgb5MeBfRb2e2IyQRLWc2+d1m5xb/+IQRMweapvqikdhqm9San1Fq83cKfucr////////////////pgYHXm/4AE9A7K6zjBuAAACXAAAAEICD8prOJGwAAAJcAAAAT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////DIVsjlWoBe/IWGVTKAxTN22CIXtlZBTsX1qcQPX2qG7iy3rx0fcfHqDMHAoWUlDENQffpURE7q45/+IXvlI0YQCxw0ox/Mkh+Ad0jo53WN7WEy6yARKOvQkWYEWJrte9DK1yC1S6Hsdchn//Z8p////////////pgYFvO/4AFDw5KYzBpuAAACXAAAAEHmDsljOGmwAAAJcAAAAT//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Kk7XHCpQDn3Ag9O0WIBmA1lFwO1rjGjv/FxCzX4KRn0k0kCFKaLKaSCc573S8VGWOOf/wHPiKCCUkSAzQ+grRhiUgO9Z2QZSzVCcPZxr2RpTWeUlsK5Sm1wpM1va7Uz1f///////////////////pgYKL5/4AFUg7JYzh5sAAACXAAAAEGjDsljL1m4AAAJcAAAAT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////iuWwSRxttADnzCE1RweJMtofYBPNwUJWbt/rjHbGtjKZPPYIQ+erupOmLWD7nNkIsWeDbW/4tFsWyWiORySIAc+0nUSjMZCto1aSgSOIiK/kFNtUSTPku0WeUSJp6w+4oKrlljEvWJIRFfV///////////////////piYAlk/4AFkw5JYy85sAAACXAAAAEFsDkljL1G4AAAJcAAAAT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4sdkjcqlAOfglyn8JDilsBghAfPFT6t2ZEQtQdJ6lfqPJ6aXpdfMudbINB9YW7ayWySSMAc/BocqKHmKJH8kKA6rjf/vz7UMJDqhjaIopxNWAZQXOtH5Q2g+gl1L1awpp///////////////////6YGAsC/+ABTkOSWMpObAAAAlwAAABBvQ7JaysxsAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8X+2SSedADSoBCf4YsDOhcKdEyusXcVQiLqexFrvlTG9yhe08gjSKvFqcO2RuN1agDYTUTeoVugADoSqQXB4G1rTijHqUmrFC4EPCdJEjQmwz7S65f///////////////////////////////6YGDxQv+ABZUOyesnEbAAAAlwAAABBYg5JYyYpuAAACXAAAAE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////E3kgbdUoA1QiUbSAMMCfD0IwbdXl2JW2pMQoSzU2tfGTSmrrY5ZtaAFeAVERFEkkYAawAxFC0RxjUuGYdXksACTupVY3chUgTM7maGi7Un5dmyun//////////////////////////////6YGCXof+ABagOSmsJGbAAAAlwAAABBTgZKYPkwmAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////BcSIRMqoBw2ONqMZgkAJnWYkCfDouaMPKyhYaK2bJ9UAInntnvDSn7regdALAAAGozVUV0PaXsbvoj5OiWWtEe4gmaXY8jWMl1qJm6///////////////////////////////////////////6YGB/wf+ABbYGSWC5GJgAAAlwAAABBQAZJYPgYmAAACXAAAAE///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ALBAAHOR2GwRUab1wq8Uctr2Ct6mJSlFGz/ZabbNKBcSTSXgUcNGU+Lua8QsxtSWy5WeNjVIMx86LjnLmXvxdiUISr//////////////////////////////////////6YmCI//+ABaQFyni5EJAAAAlwAAABBWwTHYLgIkAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AKBBAE4gENYFFCx1DIvKViKkHJSYFCX8dZ0gFylNajClaF8M2WGS94kIiRmeR1ck5mNfoVsHFtrRguhrhQOL4un///////////////////////////////////////////+mBgJ4H/gAYCBMYgTwiQAAAJcAAAAQPYExiAvCJAAAAlwAAABP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CoGaiUA6BuZqLHz29jVpFmv/dCL1Le1vVfvtJPsRBVlX8Ot7gYFnJQX1tWIWur+SHpnDJitkQmLExqklBTo1Vp//////////////////////////////////////////+mBgsS3/gAX8BEhYBXgYAAAJcAAAAQPoERiABMBAAAAlwAAABP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////817KoBsV7erFNJowD79N7noEgEXzVpJsrl6EfW673h1f3ut/6ZFHK+a///////////////////////////////////////////////////////////////////+mBg4Hr/gAYIBEdAATAQAAAJcAAAAQO8Dx8gBEBAAAAlwAAABP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////P//////////////////////////////////////////////////////////////////////////////////////+mJg+Ir/gAYwAEdAAAAAAAAJcAAAAQNAARzAAAAAAAAlwAAABP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//pgYBbJ/4AG9gDGAAAAAAAACXAAAAEAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//pgQPcd/4AG+ABLgAAACAAACXAAAAEAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA").play()}function onDefaultClick(){if(confirm("WARNING! Are you sure you wish to reset ALL settings?\nThis will restart your device and you may need to reconfigure your WiFi settings!")){showInfo("Setting default...");var A=new XMLHttpRequest;A.open("POST","/default",!0),A.onreadystatechange=function(){4===A.readyState&&(200!==A.status?showError("Error setting default!"):(showInfoSuccess("Settings reset!"),showLoading("Restarting..."),startServerPoll()))},A.send()}}function postBoardType(A){showInfo("Changing board...");var e=new XMLHttpRequest;e.open("POST","/changeBoard/"+A,!0),e.onreadystatechange=function(){4===e.readyState&&(200!==e.status?showError("Error setting pinout default!"):(showInfoSuccess("Board changed!"),getPinSettings(),showRestartRequired()))},e.send()}function postDeviceType(A){showInfo("Changing device...");var e=new XMLHttpRequest;e.open("POST","/changeDevice/"+A,!0),e.onreadystatechange=function(){4===e.readyState&&(200!==e.status?showError("Error setting pinout default!"):(showInfoSuccess("Device changed!"),getPinSettings(),showRestartRequired()))},e.send()}function onRestartClick(A){var e="Device restarting...";A&&(e+=A),showLoading(e),restartClicked=!0;var t=new XMLHttpRequest;t.open("POST","/restart",!0),t.responseType="json",t.onreadystatechange=function(){if(4===t.readyState)if(200==t.status){t.response;var A="";if(logdebug("Restart succeed!"),wifiSettings.bluetoothEnabled&&systemInfo.moduleType==ModuleType.WROOM32)return void showLoading(A+="The web server will be disabled because bluetooth has been enabled.<br>You will need to disable bluetooth via serial usb commands<br>to get back to this page after rebooting.<br><br>");if(resettingAllToDefault?restartingAndChangingAddress=!0:checkRestartRedirect(),restartingAndChangingAddress){var e=wifiSettings.staticIP,n=wifiSettings.localIP,i=wifiSettings.webServerPort,s="http://"+wifiSettings.hostname+".local";s+=80===i?"":":"+i,resettingAllToDefault&&(s="http://"+systemInfo.defaultIP+"/",e=!1);var o="http://"+n;o+=80===i?"":":"+i,A+="Device restarting, the page will redirect to<br><a href='"+s+"'>"+s+"</a> in 10 seconds<br>",resettingAllToDefault||(A+=e?"If this doesnt work, you can try using this url<br><a href='"+o+"'>"+o+"</a> when the device reboots.":"If this doesnt work, you will need<br>to find the dymanic ip address of the esp32."),showLoading(A),setTimeout((()=>{logdebug("Redirecting to: "+s),window.location.href=s}),1e4)}hideRestartRequired()}else logdebug("Restart api call fail!")},t.send()}function isWebSocketConnected(){return!!websocket&&websocket.readyState===WebSocket.OPEN}function isSR6(){return userSettings.deviceType==DeviceType.SR6}function isOSR(){return userSettings.deviceType==DeviceType.OSR}function isSSR1(){return userSettings.deviceType==DeviceType.SSR1}function isBoardType(A){return userSettings.boardType===A}function isModuleType(A){return systemInfo.moduleType==A}function isMotorType(A){return systemInfo.motorType==A}function isBLDCSPI(){return userSettings.BLDC_Encoder==BLDCEncoderType.SPI||userSettings.BLDC_Encoder==BLDCEncoderType.MT6701}function startServerPoll(){serverPollRetryCount>10?showLoading("Waiting for restart timed out<br>Please manually refresh the page when the device is back online."):(serverPollingTimeOut&&clearTimeout(serverPollingTimeOut),serverPollRetryCount++,serverPollingTimeOut=setTimeout((function(){getSystemInfo(!0)}),2e3))}function checkForServer(){}function setSystemInfo(){systemInfo||showError("Error getting system info!"),document.getElementById("version").value=systemInfo.esp32Version,document.getElementById("macAddressSystemInfo").value=systemInfo.mac,document.getElementById("ipAddressSystemInfo").value=systemInfo.localIP,document.getElementById("gatewaySystemInfo").value=systemInfo.gateway,document.getElementById("subnetSystemInfo").value=systemInfo.subnet,document.getElementById("dnsSystemInfo").value=systemInfo.dns1,document.getElementById("chipModel").value=systemInfo.chipModel,document.getElementById("chipRevision").value=systemInfo.chipRevision,document.getElementById("chipCores").value=systemInfo.chipCores,document.getElementById("chipID").value=systemInfo.chipID,tcodeVersions=systemInfo.tcodeVersions;const A=document.getElementById("logLevel");removeAllChildren(A);for(let e=0;e<systemInfo.logLevels.length;e++){const t=document.createElement("option");t.innerText=systemInfo.logLevels[e].name,t.value=systemInfo.logLevels[e].value,A.appendChild(t)}var e=document.getElementById("log-exclude-tags");removeAllChildren(e),systemInfo.availableTags.forEach((A=>{var t=document.createElement("option");t.value=A,t.innerText=A,e.appendChild(t)}));var t=document.getElementById("log-include-tags");removeAllChildren(t),systemInfo.availableTags.forEach((A=>{var e=document.createElement("option");e.value=A,e.innerText=A,t.appendChild(e)}));var n=document.getElementById("Display_I2C_Address");removeAllChildren(n),systemInfo.systemI2CAddresses.forEach((A=>{var e=document.createElement("option");e.value=A,e.innerText=A,n.appendChild(e)}));var i=document.getElementById("bleDeviceType");removeAllChildren(i),systemInfo.bleDeviceTypes.forEach((A=>{var e=document.createElement("option");e.value=A.value,e.innerText=A.name,i.appendChild(e),BLEDeviceType[A.name]=A.value}));var s=document.getElementById("bleLoveDeviceType");if(removeAllChildren(s),systemInfo.bleLoveDeviceTypes.forEach((A=>{var e=document.createElement("option");e.value=A.value,e.innerText=A.name,s.appendChild(e),BLELoveDeviceType[A.name]=A.value})),systemInfo.motorType===MotorType.BLDC?setupEncoderTypes():setupBoardTypes(),setupDeviceTypes(),toggleBuildOptions(),toggleMotorTypeOptions(),setupTimerChannels(),toggleBLESettings(),toggleBluetoothSettings(),systemInfo.moduleType==ModuleType.S3){validPWMpins=[];for(let A=1;A<44;A++)validPWMpins.push(A);inputOnlypins=[46],adc1Pins=[1,2,3,4,5,6,7,8,9,10],adc2Pins=[11,12,13,14,15,16,17,18,19,20]}document.getElementById("lastRebootReason").value=systemInfo.lastRebootReason}function setWifiSettings(){document.getElementById("ssid").value=wifiSettings.ssid,document.getElementById("wifiPass").value=wifiSettings.wifiPass,document.getElementById("bluetoothEnabled").checked=wifiSettings.bluetoothEnabled,document.getElementById("bleEnabled").checked=wifiSettings.bleEnabled,document.getElementById("bleDeviceType").value=wifiSettings.bleDeviceType,toggleBLEDeviceTypes(),document.getElementById("bleLoveDeviceType").value=wifiSettings.bleLoveDeviceType,toggleBLELoveDeviceTypes(),document.getElementById("staticIP").checked=wifiSettings.staticIP,document.getElementById("localIPInput").value=wifiSettings.localIP,document.getElementById("gatewayInput").value=wifiSettings.gateway,document.getElementById("subnetInput").value=wifiSettings.subnet,document.getElementById("dns1Input").value=wifiSettings.dns1,document.getElementById("dns2Input").value=wifiSettings.dns2,toggleStaticIPSettings(wifiSettings.staticIP),document.getElementById("udpServerPort").value=wifiSettings.udpServerPort,document.getElementById("webServerPort").value=wifiSettings.webServerPort,document.getElementById("hostname").value=wifiSettings.hostname,document.getElementById("friendlyName").value=wifiSettings.friendlyName}function setPinoutSettings(){document.getElementById("TwistFeedBack_PIN").value=pinoutSettings.TwistFeedBack_PIN,document.getElementById("RightServo_PIN").value=pinoutSettings.RightServo_PIN,document.getElementById("LeftServo_PIN").value=pinoutSettings.LeftServo_PIN,document.getElementById("RightUpperServo_PIN").value=pinoutSettings.RightUpperServo_PIN,document.getElementById("LeftUpperServo_PIN").value=pinoutSettings.LeftUpperServo_PIN,document.getElementById("PitchLeftServo_PIN").value=pinoutSettings.PitchLeftServo_PIN,document.getElementById("PitchRightServo_PIN").value=pinoutSettings.PitchRightServo_PIN,document.getElementById("ValveServo_PIN").value=pinoutSettings.ValveServo_PIN,document.getElementById("TwistServo_PIN").value=pinoutSettings.TwistServo_PIN,document.getElementById("Vibe0_PIN").value=pinoutSettings.Vibe0_PIN,document.getElementById("Vibe1_PIN").value=pinoutSettings.Vibe1_PIN,document.getElementById("Vibe2_PIN").value=pinoutSettings.Vibe2_PIN,document.getElementById("Vibe3_PIN").value=pinoutSettings.Vibe3_PIN,document.getElementById("LubeButton_PIN").value=pinoutSettings.LubeButton_PIN,document.getElementById("Squeeze_PIN").value=pinoutSettings.Squeeze_PIN,document.getElementById("Temp_PIN").value=pinoutSettings.Temp_PIN,document.getElementById("Heater_PIN").value=pinoutSettings.Heater_PIN,document.getElementById("Case_Fan_PIN").value=pinoutSettings.Case_Fan_PIN,document.getElementById("Internal_Temp_PIN").value=pinoutSettings.Internal_Temp_PIN,document.getElementById("i2cSda_PIN").value=pinoutSettings.i2cSda_PIN,document.getElementById("i2cScl_PIN").value=pinoutSettings.i2cScl_PIN,setPinChannel("Vibe0_CHANNEL",pinoutSettings.Vibe0_CHANNEL),setPinChannel("Vibe1_CHANNEL",pinoutSettings.Vibe1_CHANNEL),setPinChannel("Vibe2_CHANNEL",pinoutSettings.Vibe2_CHANNEL),setPinChannel("Vibe3_CHANNEL",pinoutSettings.Vibe3_CHANNEL),setPinChannel("ValveServo_CHANNEL",pinoutSettings.ValveServo_CHANNEL),setPinChannel("TwistServo_CHANNEL",pinoutSettings.TwistServo_CHANNEL),setPinChannel("Squeeze_CHANNEL",pinoutSettings.Squeeze_CHANNEL),setPinChannel("Heater_CHANNEL",pinoutSettings.Heater_CHANNEL),setPinChannel("Case_Fan_CHANNEL",pinoutSettings.Case_Fan_CHANNEL),setPinChannel("RightServo_CHANNEL",pinoutSettings.RightServo_CHANNEL),setPinChannel("LeftServo_CHANNEL",pinoutSettings.LeftServo_CHANNEL),setPinChannel("PitchLeftServo_CHANNEL",pinoutSettings.PitchLeftServo_CHANNEL),setPinChannel("RightUpperServo_CHANNEL",pinoutSettings.RightUpperServo_CHANNEL),setPinChannel("LeftUpperServo_CHANNEL",pinoutSettings.LeftUpperServo_CHANNEL),setPinChannel("PitchRightServo_CHANNEL",pinoutSettings.PitchRightServo_CHANNEL)}function setUserSettings(){document.getElementById("TCodeVersion").value=userSettings.TCodeVersion,setLogLevelUI(),toggleNonTCodev3Options(),toggleDeviceOptions(userSettings.deviceType),toggleFeedbackTwistSettings(userSettings.feedbackTwist),toggleBatterySettings(userSettings.batteryLevelEnabled),MotionGenerator.setEnabledStatus(),document.getElementById("boardType").value=userSettings.boardType,(isBoardType(BoardType.CRIMZZON)||isBoardType(BoardType.ISAAC))&&(document.getElementById("deviceType").disabled=!0),document.getElementById("msPerRad").value=userSettings.msPerRad,document.getElementById("feedbackTwist").checked=userSettings.feedbackTwist,document.getElementById("continuousTwist").checked=userSettings.continuousTwist,document.getElementById("analogTwist").checked=userSettings.analogTwist,ESPTimer.setup(),systemInfo.motorType===MotorType.BLDC&&BLDCMotor.setup(),Buttons.setup(),document.getElementById("RightServo_ZERO").value=userSettings.RightServo_ZERO,document.getElementById("LeftServo_ZERO").value=userSettings.LeftServo_ZERO,document.getElementById("RightUpperServo_ZERO").value=userSettings.RightUpperServo_ZERO,document.getElementById("LeftUpperServo_ZERO").value=userSettings.LeftUpperServo_ZERO,document.getElementById("PitchLeftServo_ZERO").value=userSettings.PitchLeftServo_ZERO,document.getElementById("PitchRightServo_ZERO").value=userSettings.PitchRightServo_ZERO,document.getElementById("ValveServo_ZERO").value=userSettings.ValveServo_ZERO,document.getElementById("TwistServo_ZERO").value=userSettings.TwistServo_ZERO,document.getElementById("Squeeze_ZERO").value=userSettings.Squeeze_ZERO,document.getElementById("lubeEnabled").checked=userSettings.lubeEnabled,document.getElementById("lubeAmount").value=userSettings.lubeAmount,document.getElementById("deviceType").value=userSettings.deviceType,document.getElementById("autoValve").checked=userSettings.autoValve,document.getElementById("inverseValve").checked=userSettings.inverseValve,document.getElementById("valveServo90Degrees").checked=userSettings.valveServo90Degrees,document.getElementById("inverseStroke").checked=userSettings.inverseStroke,document.getElementById("inversePitch").checked=userSettings.inversePitch,document.getElementById("inverseTwist").checked=userSettings.inverseTwist,document.getElementById("displayEnabled").checked=userSettings.displayEnabled,document.getElementById("sleeveTempDisplayed").checked=userSettings.sleeveTempDisplayed,document.getElementById("internalTempDisplayed").checked=userSettings.internalTempDisplayed,document.getElementById("versionDisplayed").checked=userSettings.versionDisplayed,document.getElementById("tempSleeveEnabled").checked=userSettings.tempSleeveEnabled,document.getElementById("tempInternalEnabled").checked=userSettings.tempInternalEnabled,document.getElementById("Display_Screen_Width").value=userSettings.Display_Screen_Width,document.getElementById("Display_Screen_Height").value=userSettings.Display_Screen_Height,32==userSettings.Display_Screen_Height&&(document.getElementById("displayIs32Px").checked=!0),document.getElementById("TargetTemp").value=userSettings.TargetTemp,document.getElementById("HeatPWM").value=userSettings.HeatPWM,document.getElementById("HoldPWM").value=userSettings.HoldPWM,document.getElementById("Display_I2C_Address").value=userSettings.Display_I2C_Address,document.getElementById("Display_I2C_Address_text").value=userSettings.Display_I2C_Address,document.getElementById("heaterThreshold").value=userSettings.heaterThreshold,document.getElementById("heaterResolution").value=userSettings.heaterResolution,document.getElementById("Display_Screen_Width").readOnly=!0,document.getElementById("Display_Screen_Height").readOnly=!0,document.getElementById("fanControlEnabled").checked=userSettings.fanControlEnabled,document.getElementById("internalTempForFan").value=userSettings.internalTempForFan,document.getElementById("internalMaxTemp").value=userSettings.internalMaxTemp,document.getElementById("caseFanResolution").value=userSettings.caseFanResolution,document.getElementById("vibTimeout").value=userSettings.vibTimeout,document.getElementById("vibTimeoutEnabled").checked=userSettings.vibTimeoutEnabled,batterySetup(),document.getElementById("logLevel").value=userSettings.logLevel;for(var A=document.getElementById("log-include-tags"),e=0;e<A.options.length;e++)A.options[e].selected=userSettings["log-include-tags"].indexOf(A.options[e].value)>=0;var t=document.getElementById("log-exclude-tags");for(e=0;e<t.options.length;e++)t.options[e].selected=userSettings["log-exclude-tags"].indexOf(t.options[e].value)>=0;document.getElementById("voiceEnabled").checked=userSettings.voiceEnabled,document.getElementById("voiceMuted").checked=userSettings.voiceMuted,document.getElementById("voiceVolume").value=userSettings.voiceVolume,document.getElementById("voiceWakeTime").value=userSettings.voiceWakeTime,setupChannelSliders(),documentLoaded=!0}function removeAllChildren(A){if(A)for(;A.firstChild;)A.removeChild(A.lastChild)}function removeByName(A){if(!A)return;let e=document.getElementsByName(A);if(e.length)for(;e[0];)e[0].parentNode.removeChild(e[0]);else console.warn("WARNING: No elemnts found when removing children by name")}function removeByClass(A){if(!A)return;let e=document.getElementsByClassName(A);if(e.length)for(;e[0];)e[0].parentNode.removeChild(e[0]);else console.warn("WARNING: No elemnts found when removing children by class")}function hasFeature(A){return systemInfo.buildFeatures.includes(A)}function toggleBuildOptions(){var A=hasFeature(BuildFeature.TEMP);Utils.toggleControlVisibilityByClassName("build_temprature",A),Utils.toggleControlVisibilityByID("internalTempDisplayedRow",A&&userSettings.tempInternalEnabled),Utils.toggleControlVisibilityByID("sleeveTempDisplayedRow",A&&userSettings.tempSleeveEnabled),Utils.toggleControlVisibilityByClassName("build_display",hasFeature(BuildFeature.DISPLAY_));var e=document.getElementById("TCodeVersion");tcodeVersions.forEach((A=>{const t=document.createElement("option");t.value=A.value,t.innerText=A.name,e.appendChild(t)}))}function toggleMotorTypeOptions(){systemInfo.motorType===MotorType.Servo?Utils.toggleControlVisibilityByClassName("servoOnly",!0):Utils.toggleControlVisibilityByClassName("BLDCOnly",!0)}function toggleBLDCEncoderOptions(){Utils.toggleControlVisibilityByClassName("BLDCPWM",userSettings.BLDC_Encoder==BLDCEncoderType.PWM),Utils.toggleControlVisibilityByClassName("BLDCSPI",isBLDCSPI())}function updateUserSettings(A,e,t,n){documentLoaded&&(null!=A&&null!=A||(A=3e3),e||(e="/settings"),t||(t=userSettings),null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{checkRestartRedirect(),showInfo("Saving...");var A=new XMLHttpRequest,i={};A.open("POST",e,!0),A.onreadystatechange=function(){4===A.readyState&&(A.responseText.length?A.responseText.startsWith("{")?i=JSON.parse(A.responseText):i.msg=A.responseText:i.msg=A.status+": "+A.statusText,"done"!==i.msg?(hideInfo(),showError("Error saving: "+i.msg),getUserSettings()):(restartRequired&&showRestartRequired(),n?n():showInfoSuccess("Settings saved!")))},A.setRequestHeader("Content-Type","application/json");var s=JSON.stringify(t);A.send(s),upDateTimeout=null}),A))}function checkRestartRedirect(){const A="YOUR SSID HERE"!==wifiSettings.ssid&&"YOUR PASSWORD HERE"!=wifiSettings.wifiPass&&wifiSettings.wifiPass!=systemInfo.decoyPass;if(systemInfo.apMode&&A)restartingAndChangingAddress=!0;else{const A=0==window.location.port.length,e=80==wifiSettings.webServerPort,t=A&&!e||!A&&e||!A&&window.location.port!=wifiSettings.webServerPort,n=!systemInfo.apMode&&t,i=!isValidIP(window.location.hostname)&&!systemInfo.apMode&&window.location.hostname!=wifiSettings.hostname;(n||i)&&(restartingAndChangingAddress=!0)}}function isValidIP(A){return A&&A.match(/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/)}function isValidHostName(A){return A&&A.match(/^(?![0-9]+$)(?!.*-$)(?!-)[a-zA-Z0-9-_]{1,63}$/g)}function showRestartRequired(){document.getElementById("resetBtn").classList.add("restart-required"),document.getElementById("menu-button").classList.add("restart-required")}function hideRestartRequired(){document.getElementById("resetBtn").classList.remove("restart-required"),document.getElementById("menu-button").classList.remove("restart-required")}function showLoading(A){var e=document.getElementById("loadingModal");document.getElementById("loadingStatus").innerHTML=A,e.style.visibility="visible",loadingVisible=!0}function hideLoading(){document.getElementById("loadingModal").style.visibility="hidden",loadingVisible=!1}function toggleMenu(){var A=document.getElementById("menu"),e=document.getElementById("menu-button"),t=document.getElementById("menu-content");t.classList.toggle("menu-hidden"),t.classList.toggle("menu-shown"),e.classList.toggle("button-pressed"),A.classList.toggle("menu-hidden"),A.classList.toggle("menu-shown")}function clearErrors(A){var e=document.getElementById("errorText");if(A){for(var t=document.getElementsByName(A),n=0;n<t.length;n++)e.removeChild(t[n].parentNode);(t=document.getElementsByName("errorItem")).length||(document.getElementById("errorMessage").hidden=!0)}}function closeError(){removeAllChildren(document.getElementById("errorText")),document.getElementById("errorMessage").hidden=!0}function showError(A){var e=document.createElement("div");e.setAttribute("name","errorItem"),e.innerHTML=A,document.getElementById("errorText").appendChild(e),document.getElementById("errorMessage").hidden=!1}function showInfo(A){const e=document.getElementById("info");e.innerText=A,e.style.color="white";const t=document.getElementsByTagName("modal-component");for(let e=0;e<t.length;e++)if(t[e].visible()){const n=t[e].shadowRoot.querySelector(".info");n.innerText=A,n.style.color="white"}}function showInfoSuccess(A){const e=document.getElementById("info");e.innerText=A,e.style.color="green";const t=document.getElementsByTagName("modal-component");for(let e=0;e<t.length;e++)if(t[e].visible()){const n=t[e].shadowRoot.querySelector(".info");n.innerText=A,n.style.color="green"}setTimeout((()=>{hideInfo()}),5e3)}function hideInfo(){const A=document.getElementById("info");A.innerText="",A.style.color="";const e=document.getElementsByTagName("modal-component");for(let A=0;A<e.length;A++)if(e[A].visible()){const t=e[A].shadowRoot.querySelector(".info");t.innerText="",t.style.color=""}}function sendWebsocketCommand(A,e){isWebSocketConnected()?websocket.send('{"command":"'+A+'", "message": "'+e+'"}'):startServerPoll()}function sendTCode(A){isWebSocketConnected()?websocket.send(A+String.fromCharCode(10)):startServerPoll()}function sendDeviceHome(){channelSliderList.forEach((A=>A.value=A.channelModel.switch?0:50));var A=getChannelMap(),e="";A.forEach(((A,t,n)=>{e+=getSliderTCode(A.channel,A.switch?0:50,!1,1e3,!1),t!==n.length-1&&(e+=" ")})),sendTCode(e)}function getSliderTCode(A,e,t,n,i){var s=A+percentageToTcode(e).toString().padStart(isTCodeV3()?4:3,"0");return i||(s+=t?"I":"S",s+=n),s}function setupChannelSliders(){var A=document.getElementById("channelTestsTable");deleteAllChildren(A);var e=document.createElement("div");A.appendChild(e);var t=document.createElement("div"),n=document.createElement("div");n.classList.add("tHeader"),n.colSpan="2",n.style.textAlign="center";var i=document.createElement("h3");i.innerText="Test",n.appendChild(i),t.appendChild(n),e.appendChild(t);var s=document.createElement("div");s.classList.add("tRow");var o=document.createElement("div");o.classList.add("tCell"),o.innerText="TCode input: awaiting user...",o.colSpan="2",o.style.justifyContent="flex-start",s.appendChild(o),e.appendChild(s),channelSliderList=[];for(var a=getChannelMap(),l=0;l<a.length;l++)if(isSR6()||!a[l].sr6Only){var r=a[l].channel,d=a[l].channelName,u=document.createElement("div");u.classList.add("tRow");var c=document.createElement("div");c.classList.add("tCell"),c.innerText=d+" ("+r+")";var g=document.createElement("div");g.classList.add("tCell"),u.appendChild(c),u.appendChild(g);var m=document.createElement("input");m.style.width="100%",m.type="range",m.id=r+"TestSlider",m.min=0,m.max=99,m.channelModel=a[l],m.value=a[l].switch?0:50,m.addEventListener("input",function(A,e,t,n){var i=getSliderTCode(e,A.value,testDeviceUseIModifier,testDeviceModifierValue,testDeviceDisableModifier);sendTCode(i),n.innerText="TCode input: "+i+" ("+t+")"}.bind(null,m,r,d,o)),channelSliderList.push(m),g.appendChild(m),e.appendChild(u)}var p=document.createElement("input");p.value=testDeviceModifierValue,p.type="number",p.min="1",p.step="1",p.addEventListener("input",(A=>{testDeviceModifierValue=A.target.value}));var v=document.createElement("div");v.classList.add("tRow");var S=document.createElement("div");S.classList.add("tCell"),S.innerText="Magnitude (I/S) value";var y=document.createElement("div");y.classList.add("tCell"),y.appendChild(p),v.appendChild(S),v.appendChild(y),e.appendChild(v);var I=document.createElement("input");I.type="checkbox",I.checked=testDeviceUseIModifier,I.addEventListener("click",(A=>{testDeviceUseIModifier=A.target.checked}));var E=document.createElement("div");E.classList.add("tRow");var h=document.createElement("div");h.classList.add("tCell"),h.innerText="Use Magnitude + Time Interval (I)";var f=document.createElement("div");f.classList.add("tCell"),f.appendChild(I),E.appendChild(h),E.appendChild(f),e.appendChild(E);var B=document.createElement("input");B.type="checkbox",B.checked=testDeviceDisableModifier,B.addEventListener("click",(A=>{testDeviceDisableModifier=A.target.checked}));var T=document.createElement("div");T.classList.add("tRow");var b=document.createElement("div");b.classList.add("tCell"),b.innerText="Disable magnitude";var P=document.createElement("td");P.classList.add("tCell"),P.appendChild(B),T.appendChild(b),T.appendChild(P),e.appendChild(T);var C=document.createElement("button");C.addEventListener("click",(A=>{sendDeviceHome()})),C.innerText="All home";var w=document.createElement("div");w.classList.add("tRow");var R=document.createElement("div");R.classList.add("tCell"),R.style.justifyContent="flex-end",R.colSpan=2,R.appendChild(C),w.appendChild(R),e.appendChild(w),DeviceRangeSlider.setup(),MotionGenerator.setup()}function deleteAllChildren(A){for(;A.firstChild;)A.removeChild(A.firstChild)}function isTCodeV3(){return userSettings.TCodeVersion>=TCodeVersion.V3}function hasTCodeV2(){return hasFeature(BuildFeature.HAS_TCODE_V2)}function getTCodeMax(){return 9999}function getChannelMap(){return systemInfo.motorType==MotorType.Servo?AvailibleChannelsV3:AvailibleChannelsBLDC}function onChannelSliderInput(A,e){sendTCode(A+e.toString().padStart(4,"0")+"S1000")}function tcodeToPercentage(A){return convertRange(0,getTCodeMax(),0,99,A)}function percentageToTcode(A){return convertRange(0,99,0,getTCodeMax(),A)}function convertRange(A,e,t,n,i){var s=(n-t)/(e-A);return Math.round(t+s*(i-A))}function onSpeedInput(){var A=parseInt(document.getElementById("speedInput").value);userSettings.speed=A>999?A:0,updateSpeedUI(A),updateUserSettings()}function updateUdpPort(){wifiSettings.udpServerPort=parseInt(document.getElementById("udpServerPort").value),setRestartRequired(),postWifiSettings()}function updateWebPort(){wifiSettings.webServerPort=parseInt(document.getElementById("webServerPort").value),setRestartRequired(),postWifiSettings()}function updateMSPerRad(A){var e=document.getElementById("msPerRad");return e.checkValidity()?(userSettings.msPerRad=parseInt(e.value),A||(document.getElementById("msPerRadIs270").checked=425==userSettings.msPerRad),setRestartRequired(),updateUserSettings(),!0):(showError(e.validationMessage),!1)}function toggleMsPerRadIs270(){var A=document.getElementById("msPerRad"),e=document.getElementById("msPerRadIs270");const t=A.value;e.checked?A.value=425:A.value=637,updateMSPerRad(!0)||(e.checked=!e.checked,A.value=t)}function updateContinuousTwist(){var A=document.getElementById("continuousTwist").checked;A?confirm("WARNING! If you enable continuous twist\nMAKE SURE THERE ARE NO WIRES CONNECTED TO YOUR FLESHLIGHT CASE!\nThis can twist the wires and possible injury can occur.\n CONFIRM THERE ARE NO WIRES CONNECTED?")?(userSettings.continuousTwist=A,updateUserSettings()):document.getElementById("continuousTwist").checked=!1:(userSettings.continuousTwist=!1,updateUserSettings())}function updateAnalogTwist(){var A=document.getElementById("analogTwist").checked;userSettings.analogTwist=A,A?(document.getElementById("TwistFeedBack_PIN").value=32,pinoutSettings.TwistFeedBack_PIN=32,alert("Note, twist feedback pin has been changed to analog input pin 32.\nPlease adjust your hardware accordingly.")):(document.getElementById("TwistFeedBack_PIN").value=26,pinoutSettings.TwistFeedBack_PIN=26,alert("Note, twist feedback pin reset to 26.\nPlease adjust your hardware accordingly.")),setRestartRequired(),postAndValidatePinoutSettings(3e3,postCommonSettings)}function updateFeedbackTwist(){var A=document.getElementById("feedbackTwist").checked;userSettings.feedbackTwist=A,toggleFeedbackTwistSettings(A),setRestartRequired(),updateUserSettings()}function toggleFeedbackTwistSettings(A){for(var e=document.getElementsByClassName("feedbackTwistOnly"),t=0;t<e.length;t++)e[t].style.display=A?"flex":"none";A&&!isTCodeV3()&&(document.getElementById("analogTwistRow").style.display="none")}function updateHostName(){null!==hostnameTimeout&&clearTimeout(hostnameTimeout),hostnameTimeout=setTimeout((()=>{clearErrors("hostnameValidation");let A=document.getElementById("hostname").value;if(isValidHostName(A))wifiSettings.hostname=A,setRestartRequired(),postWifiSettings(0);else{showError("<div name='hostnameValidation'>Invalid hostname</div></div>")}}),3e3)}function updateFriendlyName(){wifiSettings.friendlyName=document.getElementById("friendlyName").value,setRestartRequired(),postWifiSettings()}function setupBoardTypes(){const A=document.getElementById("boardType");removeAllChildren(A);for(let e=0;e<systemInfo.boardTypes.length;e++){const t=document.createElement("option");t.innerText=systemInfo.boardTypes[e].name,t.value=systemInfo.boardTypes[e].value,A.appendChild(t),BoardType[systemInfo.boardTypes[e].name]=systemInfo.boardTypes[e].value}}function setEncoderType(){userSettings.BLDC_Encoder=document.getElementById("BLDC_Encoder").value,toggleBLDCEncoderOptions(),updateUserSettings(0)}function setupEncoderTypes(){const A=document.getElementById("BLDC_Encoder");removeAllChildren(A);for(let e=0;e<systemInfo.encoderTypes.length;e++){const t=document.createElement("option");t.innerText=systemInfo.encoderTypes[e].name,t.value=systemInfo.encoderTypes[e].value,A.appendChild(t),BLDCEncoderType[systemInfo.encoderTypes[e].name]=systemInfo.encoderTypes[e].value}}function setBoardType(){var A=document.getElementById("boardType"),e=A.value;confirm("This will reset the current pinout to default and restart the device. Continue?")?postBoardType(e):A.value=userSettings.boardType}function setupDeviceTypes(){const A=document.getElementById("deviceType");removeAllChildren(A);for(let e=0;e<systemInfo.deviceTypes.length;e++){const t=document.createElement("option");t.innerText=systemInfo.deviceTypes[e].name,t.value=systemInfo.deviceTypes[e].value,A.appendChild(t),DeviceType[systemInfo.deviceTypes[e].name]=systemInfo.deviceTypes[e].value}}function setDeviceType(){var A=document.getElementById("deviceType");let e=A.value;confirm("This will reset the current pinout to default. Continue?")?postDeviceType(e):A.value=userSettings.deviceType}function setupTimerChannels(){const A=document.getElementsByName("timerChannels");for(let e=0;e<A.length;e++){const t=A[e];removeAllChildren(t);for(let A=0;A<systemInfo.timerChannels.length;A++){const e=document.createElement("option");e.innerText=systemInfo.timerChannels[A].name,e.value=systemInfo.timerChannels[A].value,t.appendChild(e)}}}function setAutoValve(){userSettings.autoValve=document.getElementById("autoValve").checked,updateUserSettings()}function setInverseValve(){userSettings.inverseValve=document.getElementById("inverseValve").checked,updateUserSettings()}function setValveServo90Degrees(){var A=document.getElementById("valveServo90Degrees").checked;A?confirm("WARNING! If you 90 degree servo\nMAKE SURE YOU ARE NOT USING THE T-Valve LID!\nThe servo will stall hitting the wall and burn out!")?(userSettings.valveServo90Degrees=A,updateUserSettings()):document.getElementById("valveServo90Degrees").checked=!1:(userSettings.valveServo90Degrees=!1,updateUserSettings())}function setInverseStroke(){userSettings.inverseStroke=document.getElementById("inverseStroke").checked,updateUserSettings()}function setInversePitch(){userSettings.inversePitch=document.getElementById("inversePitch").checked,updateUserSettings()}function setInverseTwist(){userSettings.inverseTwist=document.getElementById("inverseTwist").checked,updateUserSettings()}function disablePinValidation(){!userSettings.disablePinValidation&&confirm("This will disable ALL PIN validations.\nBe sure you know what you're doing!")?userSettings.disablePinValidation=!0:(userSettings.disablePinValidation=!1,document.getElementById("disablePinValidation").checked=!1),updateUserSettings()}function setPinChannel(A,e){let t=document.getElementById(A);t.value=e,toggleEnableTimerChannels(t)}function onSelectPinChannel(A){pinoutSettings[A.id]=A.value,toggleEnableTimerChannels(A),setRestartRequired(),postPinoutSettings()}function toggleEnableTimerChannels(A){const e=document.getElementsByName("timerChannels");for(let t=0;t<e.length;t++){const n=e[t];A.id!==n.id&&(n.options[A.selectedIndex].disabled=A.value>-1)}}function updatePins(){systemInfo.motorType!=MotorType.BLDC?(null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{var A=validatePins();A&&(pinoutSettings.RightServo_PIN=A.rightPin,pinoutSettings.LeftServo_PIN=A.leftPin,pinoutSettings.RightUpperServo_PIN=A.rightUpper,pinoutSettings.LeftUpperServo_PIN=A.leftUpper,pinoutSettings.PitchLeftServo_PIN=A.pitchLeft,pinoutSettings.PitchRightServo_PIN=A.pitchRight,updateCommonPins(A),setRestartRequired(),postPinoutSettings(0))}),3e3)):updateBLDCPins()}function updateCommonPins(A){pinoutSettings.TwistServo_PIN=A.twistServo,pinoutSettings.ValveServo_PIN=A.valveServo,pinoutSettings.Squeeze_PIN=A.squeezeServo,pinoutSettings.Vibe0_PIN=A.vibe0,pinoutSettings.Vibe1_PIN=A.vibe1,pinoutSettings.Vibe2_PIN=A.vibe2,pinoutSettings.Vibe3_PIN=A.vibe3,pinoutSettings.LubeButton_PIN=A.lubeButton,pinoutSettings.Heater_PIN=A.heat,pinoutSettings.Case_Fan_PIN=A.caseFanPin,pinoutSettings.Temp_PIN=A.temp,pinoutSettings.TwistFeedBack_PIN=A.twistFeedBack,pinoutSettings.Internal_Temp_PIN=A.internalTemp,pinoutSettings.i2cSda_PIN=A.i2cSda,pinoutSettings.i2cScl_PIN=A.i2cScl}function setIntMax(A,e){(e=document.getElementById(A)).setAttribute("max",parseInt(e))}function setIntMinAndMax(A,e){setElementsIntMinAndMax(document.getElementById(A),document.getElementById(e))}function setElementsIntMinAndMax(A,e){A.setAttribute("max",parseInt(e.value)-1),e.setAttribute("min",parseInt(A.value)+1)}function validateIntControl(A,e,t,n){var i=A;if("string"==typeof A&&(i=document.getElementById(A)),clearErrors(i.id),n&&n(i.value)||i.checkValidity())return e[t]=parseInt(i.value),!0;var s=i.validationMessage;return s||(s=i.errorText),showError(`<div name="${i.id}"> ${i.id} is invalid: ${s??""}</div>`),!1}function validateFloatControl(A,e,t,n){var i=A;if("string"==typeof A&&(i=document.getElementById(A)),clearErrors(i.id),n&&n(i.value)||i.checkValidity())return e[t]=parseFloat(i.value),!0;var s=i.validationMessage;return s||(s=i.errorText),showError(`<div name="${i.id}"> ${i.id} is invalid: ${s??""}</div>`),!1}function validateStringControl(A,e,t,n){var i=A;if("string"==typeof A&&(i=document.getElementById(A)),clearErrors(i.id),n&&n(i.value)||i.checkValidity())return e[t&&t.trim().length?t:controlID]=i.value,!0;var s=i.validationMessage;return s||(s=i.errorText),showError(`<div name="${i.id}"> ${i.id} is invalid: ${s??""}</div>`),!1}function validatePin(A,e,t,n,i,s){if(A>-1){let o=t.findIndex((e=>e.pin===A));o>-1&&n.push(e+" pin and "+t[o].name),!0===i&&-1==inputOnlypins.indexOf(A)&&-1==validPWMpins.indexOf(A)&&s.push(e+" pin: "+A),t.push({name:e,pin:A})}}function validatePWMPin(A,e,t,n,i){A>-1&&(validatePin(A,e,t,n),-1==validPWMpins.indexOf(A)&&i.push(e+" pin: "+A))}function validatePins(){if(systemInfo.motorType==MotorType.BLDC)return validateBLDCPins();clearErrors("pinValidation");var A=[],e=[],t=[],n=getServoPinValues();if(userSettings.disablePinValidation)return n;validatePWMPin(n.rightPin,"Right servo",A,e,t),validatePWMPin(n.leftPin,"Left servo",A,e,t),validatePWMPin(n.pitchLeft,"Pitch left servo",A,e,t),validatePWMPin(n.rightUpper,"Right upper servo",A,e,t),validatePWMPin(n.leftUpper,"Left upper servo",A,e,t),validatePWMPin(n.pitchRight,"Pitch right servo",A,e,t),validateCommonPWMPins(A,e,n,t);var i=[];if(validateNonPWMPins(A,e,i,n),e.length||t.length||i.length){var s="<div name='pinValidation'>Pins NOT saved due to invalid input.<br>";return e.length&&(s+="<div style='margin-left: 25px;'>The following pins are duplicated:<br><div style='color: white; margin-left: 25px;'>"+e.join("<br>")+"</div></div>"),i.length&&(e.length&&(s+="<br>"),s+="<div style='margin-left: 25px;'>The following pins are invalid:<br><div style='color: white; margin-left: 25px;'>"+i.join("<br>")+"</div></div>"),t.length&&((e.length||i.length)&&(s+="<br>"),s+="<div style='margin-left: 25px;'>The following pins are invalid PWM pins:<br><div style='color: white; margin-left: 25px;'>"+t.join("<br>")+"</div></div>"),void showError(s+="</div>")}return n}function validateCommonPWMPins(A,e,t,n){validatePWMPin(t.twistServo,"Twist servo",A,e,n),validatePWMPin(t.squeezeServo,"Squeeze servo",A,e,n),validatePWMPin(t.valveServo,"Valve servo",A,e,n),validatePWMPin(t.vibe0,"Vibe 1",A,e,n),validatePWMPin(t.vibe1,"Vibe 2",A,e,n),validatePWMPin(t.vibe2,"Vibe 3",A,e,n),validatePWMPin(t.vibe3,"Vibe 4",A,e,n),userSettings.tempSleeveEnabled&&validatePWMPin(t.heat,"Heater",A,e,n),userSettings.tempInternalEnabled&&validatePWMPin(t.caseFanPin,"Case fan ",A,e,n)}function validateNonPWMPins(A,e,t,n){if(userSettings.displayEnabled||userSettings.voiceEnabled||userSettings.batteryLevelEnabled){let i=[];userSettings.displayEnabled&&i.push("Display"),userSettings.voiceEnabled&&i.push("Voice"),userSettings.batteryLevelEnabled&&i.push("Battery level"),n.i2cScl<0&&t.push("I2C SCL pin: "+n.i2cScl+" and I2C modules enabled: "+i.join(",")),n.i2cSda<0&&t.push("I2C SDA pin: "+n.i2cSda+" and I2C modules enabled: "+i.join(",")),validatePin(n.i2cSda,"I2C SDA",A,e),validatePin(n.i2cScl,"I2C SCL",A,e)}else isMotorType(MotorType.BLDC)&&isBLDCSPI()&&(n.i2cScl<0&&t.push("I2C SCL pin: "+n.i2cScl),n.i2cSda<0&&t.push("I2C SDA pin: "+n.i2cSda),validatePin(n.i2cSda,"I2C SDA",A,e),validatePin(n.i2cScl,"I2C SCL",A,e));if(validatePin(n.lubeButton,"Lube button",A,e,!0,t),userSettings.tempSleeveEnabled&&validatePin(n.temp,"Temp",A,e,!0,t),userSettings.tempInternalEnabled&&validatePin(n.internalTemp,"Internal temp",A,e,!0,t),userSettings.feedbackTwist&&n.twistFeedBack&&validatePin(n.twistFeedBack,"Twist feedback",A,e,!0,t),Buttons.isButtonSetsEnabled())for(var i=0;i<n.buttonSets.length;i++){validatePin(n.buttonSets[i],"Button set "+i,A,e,!0,t)}return!e.length&&!t.length}function getServoPinValues(){var A={};return A.rightPin=parseInt(document.getElementById("RightServo_PIN").value),A.leftPin=parseInt(document.getElementById("LeftServo_PIN").value),A.rightUpper=parseInt(document.getElementById("RightUpperServo_PIN").value),A.leftUpper=parseInt(document.getElementById("LeftUpperServo_PIN").value),A.pitchRight=parseInt(document.getElementById("PitchRightServo_PIN").value),A.pitchLeft=parseInt(document.getElementById("PitchLeftServo_PIN").value),getCommonPinValues(A),A}function getCommonPinValues(A){A.twistServo=parseInt(document.getElementById("TwistServo_PIN").value),A.squeezeServo=parseInt(document.getElementById("Squeeze_PIN").value),A.valveServo=parseInt(document.getElementById("ValveServo_PIN").value),A.vibe0=parseInt(document.getElementById("Vibe0_PIN").value),A.vibe1=parseInt(document.getElementById("Vibe1_PIN").value),A.vibe2=parseInt(document.getElementById("Vibe2_PIN").value),A.vibe3=parseInt(document.getElementById("Vibe3_PIN").value),A.heat=parseInt(document.getElementById("Heater_PIN").value),A.caseFanPin=parseInt(document.getElementById("Case_Fan_PIN").value),A.i2cSda=parseInt(document.getElementById("i2cSda_PIN").value),A.i2cScl=parseInt(document.getElementById("i2cScl_PIN").value),A.lubeButton=parseInt(document.getElementById("LubeButton_PIN").value),A.temp=parseInt(document.getElementById("Temp_PIN").value),A.internalTemp=parseInt(document.getElementById("Internal_Temp_PIN").value),A.twistFeedBack=parseInt(document.getElementById("TwistFeedBack_PIN").value);var e=document.getElementsByName("buttonSetPins");A.buttonSets=[],e.forEach(((e,t)=>{A.buttonSets[t]=parseInt(document.getElementById("buttonSetPin"+t).value)}))}function updateZeros(){null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{const A=2500,e=500;clearErrors("zeroValidation");var t=!0,n=[],i=parseInt(document.getElementById("RightServo_ZERO").value);(!i||i>A||i<e)&&(t=!1,n.push("Right servo ZERO"));var s=parseInt(document.getElementById("LeftServo_ZERO").value);(!s||s>A||s<e)&&(t=!1,n.push("Left servo ZERO"));var o=parseInt(document.getElementById("RightUpperServo_ZERO").value);(!o||o>A||o<e)&&(t=!1,n.push("Right upper servo ZERO"));var a=parseInt(document.getElementById("LeftUpperServo_ZERO").value);(!a||a>A||a<e)&&(t=!1,n.push("Left upper servo ZERO"));var l=parseInt(document.getElementById("PitchLeftServo_ZERO").value);(!l||l>A||l<e)&&(t=!1,n.push("Pitch left servo ZERO"));var r=parseInt(document.getElementById("PitchRightServo_ZERO").value);(!r||r>A||r<e)&&(t=!1,n.push("Pitch right servo ZERO"));var d=parseInt(document.getElementById("ValveServo_ZERO").value);(!d||d>A||d<e)&&(t=!1,n.push("Valve servo ZERO"));var u=parseInt(document.getElementById("TwistServo_ZERO").value);(!u||u>A||u<e)&&(t=!1,n.push("Twist servo ZERO"));var c=parseInt(document.getElementById("Squeeze_ZERO").value);(!c||c>A||c<e)&&(t=!1,n.push("Squeeze servo ZERO")),t?(userSettings.RightServo_ZERO=i,userSettings.LeftServo_ZERO=s,userSettings.RightUpperServo_ZERO=o,userSettings.LeftUpperServo_ZERO=a,userSettings.PitchLeftServo_ZERO=l,userSettings.PitchRightServo_ZERO=r,userSettings.ValveServo_ZERO=d,userSettings.TwistServo_ZERO=u,updateUserSettings()):showError("<div name='zeroValidation'>Zeros NOT saved due to invalid input.<br><div style='margin-left: 25px;'>The values should be between 500 and 2500 for the following:<br><div style='color: white; margin-left: 25px;'>"+n.join("<br>")+"</div></div></div>")}),2e3)}function updateLubeAmount(){userSettings.lubeAmount=parseInt(document.getElementById("lubeAmount").value),updateUserSettings()}function setDiplayIs32Px(){var A=document.getElementById("Display_Screen_Height");document.getElementById("displayIs32Px").checked?A.value=32:A.value=64,userSettings.Display_Screen_Height=parseInt(A.value),setRestartRequired(),updateUserSettings()}function setDisplaySettings(){const A=document.getElementById("displayEnabled").checked;!userSettings.displayEnabled&&A&&validatePins(),userSettings.displayEnabled=A,userSettings.Display_I2C_Address=document.getElementById("Display_I2C_Address_text").value,userSettings.sleeveTempDisplayed=document.getElementById("sleeveTempDisplayed").checked,userSettings.internalTempDisplayed=document.getElementById("internalTempDisplayed").checked,userSettings.versionDisplayed=document.getElementById("versionDisplayed").checked,setRestartRequired(),userSettings.displayEnabled&&validatePins(),updateUserSettings()}function setDisplayAddress(){var A=document.getElementById("Display_I2C_Address").value;document.getElementById("Display_I2C_Address_text").value=A,userSettings.Display_I2C_Address=A,setRestartRequired(),updateUserSettings()}function setTempSettings(){const A=document.getElementById("tempSleeveEnabled").checked;!userSettings.tempSleeveEnabled&&A&&validatePins(),userSettings.tempSleeveEnabled=A,userSettings.TargetTemp=parseFloat(document.getElementById("TargetTemp").value),userSettings.HeatPWM=parseInt(document.getElementById("HeatPWM").value),userSettings.HoldPWM=parseInt(document.getElementById("HoldPWM").value),userSettings.heaterThreshold=parseInt(document.getElementById("heaterThreshold").value),userSettings.heaterResolution=parseInt(document.getElementById("heaterResolution").value),Utils.toggleControlVisibilityByID("sleeveTempDisplayedRow",hasFeature(BuildFeature.TEMP)&&userSettings.tempSleeveEnabled),setRestartRequired(),updateUserSettings()}function setInternalTempSettings(){userSettings.tempInternalEnabled=document.getElementById("tempInternalEnabled").checked,userSettings.caseFanResolution=parseInt(document.getElementById("caseFanResolution").value),Utils.toggleControlVisibilityByID("internalTempDisplayedRow",hasFeature(BuildFeature.TEMP)&&userSettings.tempInternalEnabled),setRestartRequired(),updateUserSettings()}function toggleVoiceSettings(){userSettings.voiceEnabled=document.getElementById("voiceEnabled").checked,setRestartRequired(),userSettings.voiceEnabled&&validatePins(),updateUserSettings()}function setVoiceSettings(){userSettings.voiceMuted=document.getElementById("voiceMuted").checked,validateIntControl("voiceVolume",userSettings,"voiceVolume")&&validateIntControl("voiceWakeTime",userSettings,"voiceWakeTime")&&(setRestartRequired(),updateUserSettings(0))}function setFanControl(){userSettings.fanControlEnabled=document.getElementById("fanControlEnabled").checked,toggleFanControlSettings(userSettings.fanControlEnabled),setRestartRequired(),userSettings.fanControlEnabled&&validatePins(),updateUserSettings()}function setFanOnTemp(){userSettings.internalTempForFan=parseFloat(document.getElementById("internalTempForFan").value),updateUserSettings()}function setMaxTemp(){userSettings.internalMaxTemp=parseFloat(document.getElementById("internalMaxTemp").value),updateUserSettings()}function setBuildFanControl(A){for(var e=document.getElementsByClassName("fan-control-build"),t=0;t<e.length;t++)Utils.toggleElementShown(e[t],A);toggleFanControlSettings(A)}function toggleFanControlSettings(A){for(var e=document.getElementsByClassName("fan-control"),t=0;t<e.length;t++)Utils.toggleElementShown(e[t],A)}function connectWifi(){}function showWifiPassword(){var A=document.getElementById("wifiPass");"password"===A.type?A.type="text":A.type="password"}function updateWifiLoginSettings(){wifiSettings.ssid=document.getElementById("ssid").value,wifiSettings.wifiPass=document.getElementById("wifiPass").value,setRestartRequired(),postWifiSettings()}function updateWifiSettings(){null!==staticIPAddressTimeout&&clearTimeout(staticIPAddressTimeout);var A=document.getElementById("staticIP").checked;toggleStaticIPSettings(A),staticIPAddressTimeout=setTimeout((()=>{var e={};e.localIP=document.getElementById("localIPInput").value,e.gateway=document.getElementById("gatewayInput").value,e.subnet=document.getElementById("subnetInput").value,e.dns1=document.getElementById("dns1Input").value,e.dns2=document.getElementById("dns2Input").value,validateStaticIPAddresses(e)&&(wifiSettings.staticIP=A,wifiSettings.localIP=e.localIP,wifiSettings.gateway=e.gateway,wifiSettings.subnet=e.subnet,wifiSettings.dns1=e.dns1,wifiSettings.dns2=e.dns2,setRestartRequired(),postWifiSettings(0))}),3e3)}function validateStaticIPAddresses(A){var e=[];if(clearErrors("staticIPValidation"),isValidIP(A.localIP)||e.push("Invalid static IP address"),isValidIP(A.gateway)||e.push("Invalid static gateway address"),isValidIP(A.subnet)||e.push("Invalid static subnet address"),A.dns1&&A.dns1.length>0&&!isValidIP(A.dns1)&&e.push("Invalid static dns1 address"),A.dns1&&A.dns2.length>0&&!isValidIP(A.dns1)&&e.push("Invalid static dns2 address"),e.length){var t="<div name='staticIPValidation'>Static Ip settings not saved due to invalid IP addresses<br>";return t+="<div style='margin-left: 25px;'>The following addreses are invalid:<br><div style='color: white; margin-left: 25px;'>"+e.join("<br>")+"</div></div>",showError(t+="</div>"),!1}return!0}function toggleStaticIPSettings(A){Utils.toggleControlVisibilityByID("localIP",A),Utils.toggleControlVisibilityByID("gateway",A),Utils.toggleControlVisibilityByID("subnet",A),Utils.toggleControlVisibilityByID("dns1",A),Utils.toggleControlVisibilityByID("dns2",A)}function toggleDeviceOptions(A){for(var e=document.getElementsByClassName("osrOnly"),t=document.getElementsByClassName("sr6Only"),n=0;n<t.length;n++)t[n].style.display=A==DeviceType.SR6&&A!=DeviceType.SSR1?"flex":"none";for(n=0;n<e.length;n++)e[n].style.display=A==DeviceType.OSR&&A!=DeviceType.SSR1?"flex":"none";A==DeviceType.SR6&&A!=DeviceType.SSR1&&425==userSettings.msPerRad&&(document.getElementById("msPerRadIs270").checked=!0)}function toggleNonTCodev3Options(){for(var A=document.getElementsByClassName("v2Only"),e=document.getElementsByClassName("v3Only"),t=0;t<e.length;t++)e[t].style.display=isTCodeV3()?"flex":"none";for(t=0;t<A.length;t++)A[t].style.display=isTCodeV3()?"none":"flex";toggleFeedbackTwistSettings(userSettings.feedbackTwist),userSettings.feedbackTwist&&!isTCodeV3()&&(document.getElementById("analogTwistRow").style.display="none")}function updateBlueToothSettings(){const A=document.getElementById("bluetoothEnabled");let e=A.checked;if(e&&systemInfo.moduleType==ModuleType.WROOM32){if(wifiSettings.bleEnabled)return alert("BLE and Bluetooth classic cannot be enabled at the same time due to ram constraints."),void(A.checked=!1);confirm("This will disable this web server. The Wroom32 chip does not have enough memory for bluetooth and the web server.\n\nYou will need to disable bluetooth to see this web page again.\n\nMost settings can be configured via tcode command #setting.\nUse the tcode command #help for more information\n\nUDP TCode will probably still work.\n\nYuu will be able to continue configuration on this page until you reboot the board."+"\n\nContinue?")?(wifiSettings.bluetoothEnabled=e,setRestartRequired(),postWifiSettings()):A.checked=!1}else wifiSettings.bluetoothEnabled=e,setRestartRequired(),postWifiSettings()}function toggleBluetoothSettings(){if(!hasFeature(BuildFeature.BLUETOOTH)){const e=document.getElementsByClassName("bluetoothOnly");for(var A=0;A<e.length;A++)e[A].classList.add("hidden")}}function updateBleSettings(){const A=document.getElementById("bleEnabled");let e=A.checked;if(e&&systemInfo.moduleType==ModuleType.WROOM32){if(wifiSettings.bluetoothEnabled)return alert("BLE and Bluetooth classic cannot be enabled at the same time due to ram constraints."),void(A.checked=!1);confirm("This will disable this web server. The Wroom32 chip does not have enough memory for bluetooth and the web server.\n\nYou will need to disable bluetooth to see this web page again.\n\nMost settings can be configured via tcode command #setting.\nUse the tcode command #help for more information\n\nUDP TCode will probably still work.\n\nYuu will be able to continue configuration on this page until you reboot the board."+"\n\nContinue?")?(wifiSettings.bleEnabled=e,setRestartRequired(),postWifiSettings()):A.checked=!1}else wifiSettings.bleEnabled=e,setRestartRequired(),postWifiSettings();toggleBLEDeviceTypes(wifiSettings.bleEnabled)}function toggleBLESettings(){if(hasFeature(BuildFeature.BLE));else{const e=document.getElementsByClassName("BLEOnly");for(var A=0;A<e.length;A++)e[A].classList.add("hidden")}}function toggleBLEDeviceTypes(){const A=document.getElementsByClassName("BLEEnabled");for(var e=0;e<A.length;e++)wifiSettings.bleEnabled&&hasFeature(BuildFeature.BLE)?A[e].classList.remove("hidden"):A[e].classList.add("hidden")}function setBLEDeviceType(){wifiSettings.bleDeviceType=parseInt(document.getElementById("bleDeviceType").value),toggleBLELoveDeviceTypes(),setRestartRequired(),postWifiSettings()}function toggleBLELoveDeviceTypes(){const A=document.getElementsByClassName("BLELoveOnly");for(var e=0;e<A.length;e++)wifiSettings.bleDeviceType==BLEDeviceType.LOVE&&hasFeature(BuildFeature.BLE)?A[e].classList.remove("hidden"):A[e].classList.add("hidden")}function setBLELoveDeviceType(){wifiSettings.bleLoveDeviceType=parseInt(document.getElementById("bleLoveDeviceType").value),setRestartRequired(),postWifiSettings()}function setTCodeVersion(){userSettings.TCodeVersion=parseInt(document.getElementById("TCodeVersion").value),toggleNonTCodev3Options(),setRestartRequired(),updateUserSettings()}function setRestartRequired(){documentLoaded&&(restartRequired=!0)}function updateVibTimeout(){userSettings.vibTimeout=parseInt(document.getElementById("vibTimeout").value),userSettings.vibTimeoutEnabled=document.getElementById("vibTimeoutEnabled").checked,updateUserSettings()}function updateLubeEnabled(){userSettings.lubeEnabled=document.getElementById("lubeEnabled").checked,setRestartRequired(),updateUserSettings()}function toggleSounds(){playSounds=document.getElementById("soundsEnabled").checked,document.getElementsByName("testSoundButton").forEach((A=>{Utils.toggleElementShown(A,playSounds)}))}function exportToJsonFile(){alert("Wifi password will NOT be exported!");const A=JSON.parse(JSON.stringify(userSettings));A.wifiSettings=wifiSettings,A.motionDefaultProfileIndex=motionProviderSettings.motionDefaultProfileIndex,A.motionProfiles=motionProviderSettings.motionProfiles,A.buttonSettings=buttonSettings,A.pinoutSettings=pinoutSettings;let e=JSON.stringify(A),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),n="userSettings_"+systemInfo.esp32Version+".json",i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",n),i.click()}function createImportSettingsInputElement(){(importSettingsInputElement=document.createElement("input")).type="file",importSettingsInputElement.accept="application/json,.json",importSettingsInputElement.addEventListener("change",importSettings)}function openImportSettingsFileDialog(){importSettingsInputElement.dispatchEvent(new MouseEvent("click"))}function importSettings(){if(alert("Wifi password will NOT be imported!"),importSettingsInputElement.files.length>0){var A=importSettingsInputElement.files[0],e=new FileReader;e.addEventListener("load",(()=>{var A=e.result,t=JSON.parse(A);Object.keys(t).forEach((function(A,e){if("wifiPass"!==A){var n=t[A],i=userSettings[A],s=wifiSettings[A];null!=i&&null!=i?userSettings[A]=checkMigrateData(A,n):null!=s&&null!=s?wifiSettings[A]=checkMigrateData(A,n):handleImportRenames(A,n)}})),-1==tcodeVersions.findIndex((A=>A.value==userSettings.TCodeVersion))&&(userSettings.TCodeVersion=latestTCodeVersion,document.getElementById("TCodeVersion").value=userSettings.TCodeVersion,toggleNonTCodev3Options()),setWifiSettings(),setUserSettings(),setPinoutSettings(),setRestartRequired(),updateALLUserSettings()}),!1),e.readAsText(A)}}function checkMigrateData(A,e){return"TCodeVersion"==A&&1==e?TCodeVersion.V3:e}function handleImportRenames(A,e){switch(A){case"LubeManual_PIN":return void(pinoutSettings.LubeButton_PIN=e);case"motionProfiles":return motionProviderSettings.motionProfiles=e,void motionProviderSettings.motionProfiles.forEach((A=>{A.edited=!0,A.channels.forEach((A=>A.edited=!0))}));case"motionDefaultProfileIndex":return void(motionProviderSettings.motionDefaultProfileIndex=e);case"wifiSettings":return void Object.keys(e).forEach((function(A,t){"wifiPass"!==A&&(wifiSettings[A]=e[A])}));case"ssid":return void(wifiSettings.ssid=e);case"staticIP":return void(wifiSettings.staticIP=e);case"localIP":return void(wifiSettings.localIP=e);case"gateway":return void(wifiSettings.gateway=e);case"subnet":return void(wifiSettings.subnet=e);case"dns1":return void(wifiSettings.dns1=e);case"dns2":return void(wifiSettings.dns2=e);case"udpServerPort":return void(wifiSettings.udpServerPort=e);case"webServerPort":return void(wifiSettings.webServerPort=e);case"hostname":return void(wifiSettings.hostname=e);case"friendlyName":return void(wifiSettings.friendlyName=e);case"bootButtonCommand":return void(buttonSettings.bootButtonCommand=e);case"buttonSettings":return void(buttonSettings=e);case"pinoutSettings":return void Object.keys(e).forEach((function(A,t){pinoutSettings[A]=e[A]}));case"sr6Mode":return void(isMotorType(MotorType.BLDC)?userSettings.deviceType=DeviceType.SSR1:userSettings.deviceType=e?DeviceType.SR6:DeviceType.OSR);case"BLDC_UsePWM":userSettings.BLDC_Encoder=e?BLDCEncoderType.PWM:BLDCEncoderType.SPI;case"BLDC_UseMT6701":userSettings.BLDC_Encoder=e?BLDCEncoderType.MT6701:BLDCEncoderType.SPI}A.endsWith("_PIN")&&(pinoutSettings[A]=e)}