var upDateTimeout,infoNode,userSettings={},restartRequired=!1,documentLoaded=!1,newtoungeHatExists=!1,debugEnabled=!0;function logdebug(e){}function onDocumentLoad(){infoNode=document.getElementById("info"),getUserSettings(),initWebSocket()}function getUserSettings(){var e=new XMLHttpRequest;e.open("GET","/userSettings",!0),e.responseType="json",e.onload=function(){200!==e.status?showError("Error loading user settings!"):(userSettings=e.response,setUserSettings())},e.send()}function initWebSocket(){try{var e="ws://"+window.location.host+"/ws";"function"==typeof MozWebSocket&&(WebSocket=MozWebSocket),t&&1==t.readyState&&t.close();var t=new WebSocket(e);t.onopen=function(e){logdebug("CONNECTED")},t.onclose=function(e){logdebug("DISCONNECTED")},t.onmessage=function(e){wsCallBackFunction(e),logdebug("MESSAGE RECIEVED: "+e.data)},t.onerror=function(t){alert("ERROR: "+t.data+", Address: "+e)}}catch(t){alert("ERROR: "+t+", Address: "+e)}}function wsCallBackFunction(e){try{var t=JSON.parse(e.data);switch(t.command){case"tempStatus":var n=t.message,s=n.status,u=n.temp;document.getElementById("currentTempStatus").innerText=s,document.getElementById("currentTemp").innerText=u;break}}catch(e){}}function onDefaultClick(){if(confirm("WARNING! Are you sure you wish to reset ALL settings?")){infoNode.hidden=!0,infoNode.innerText="Resetting...",infoNode.style.color="black";var e=new XMLHttpRequest;e.open("POST","/default",!0),e.onreadystatechange=function(){4===e.readyState&&(onDocumentLoad(),infoNode.innerText="Settings reset!",infoNode.style.color="green",document.getElementById("requiresRestart").hidden=!1,document.getElementById("resetBtn").disabled=!1,setTimeout((()=>{infoNode.hidden=!0,infoNode.innerText=""}),5e3))},e.send()}}function setUserSettings(){toggleNonTCodev3Options(1==userSettings.TCodeVersion),toggleDeviceOptions(userSettings.sr6Mode),toggleStaticIPSettings(userSettings.staticIP),toggleDisplaySettings(userSettings.displayEnabled),toggleTempSettings(userSettings.tempControlEnabled),togglePitchServoFrequency(userSettings.pitchFrequencyIsDifferent),document.getElementById("version").innerHTML=userSettings.esp32Version;var e=userSettings.xMin,t=userSettings.xMax;document.getElementById("xMin").value=e,calculateAndUpdateMinUI("x",e),document.getElementById("xMax").value=t,calculateAndUpdateMaxUI("x",t),updateRangePercentageLabel("x",tcodeToPercentage(e),tcodeToPercentage(t));var n=userSettings.yRollMin,s=userSettings.yRollMax;document.getElementById("yRollMin").value=n,calculateAndUpdateMinUI("yRoll",n),document.getElementById("yRollMax").value=s,calculateAndUpdateMaxUI("yRoll",s),updateRangePercentageLabel("yRoll",tcodeToPercentage(n),tcodeToPercentage(s));var u=userSettings.xRollMin,d=userSettings.xRollMax;document.getElementById("xRollMin").value=u,calculateAndUpdateMinUI("xRoll",u),document.getElementById("xRollMax").value=d,calculateAndUpdateMaxUI("xRoll",d),updateRangePercentageLabel("xRoll",tcodeToPercentage(u),tcodeToPercentage(d)),updateSpeedUI(userSettings.speed),document.getElementById("udpServerPort").value=userSettings.udpServerPort,document.getElementById("hostname").value=userSettings.hostname,document.getElementById("friendlyName").value=userSettings.friendlyName,document.getElementById("servoFrequency").value=userSettings.servoFrequency,document.getElementById("pitchFrequency").value=userSettings.pitchFrequency,document.getElementById("valveFrequency").value=userSettings.valveFrequency,document.getElementById("twistFrequency").value=userSettings.twistFrequency,document.getElementById("continuousTwist").checked=userSettings.continuousTwist,document.getElementById("analogTwist").checked=userSettings.analogTwist,document.getElementById("TwistFeedBack_PIN").value=userSettings.TwistFeedBack_PIN,document.getElementById("RightServo_PIN").value=userSettings.RightServo_PIN,document.getElementById("LeftServo_PIN").value=userSettings.LeftServo_PIN,document.getElementById("RightUpperServo_PIN").value=userSettings.RightUpperServo_PIN,document.getElementById("LeftUpperServo_PIN").value=userSettings.LeftUpperServo_PIN,document.getElementById("PitchLeftServo_PIN").value=userSettings.PitchLeftServo_PIN,document.getElementById("PitchRightServo_PIN").value=userSettings.PitchRightServo_PIN,document.getElementById("ValveServo_PIN").value=userSettings.ValveServo_PIN,document.getElementById("TwistServo_PIN").value=userSettings.TwistServo_PIN,document.getElementById("Vibe0_PIN").value=userSettings.Vibe0_PIN,document.getElementById("Vibe1_PIN").value=userSettings.Vibe1_PIN,document.getElementById("LubeManual_PIN").value=userSettings.LubeManual_PIN,document.getElementById("RightServo_ZERO").value=userSettings.RightServo_ZERO,document.getElementById("LeftServo_ZERO").value=userSettings.LeftServo_ZERO,document.getElementById("RightUpperServo_ZERO").value=userSettings.RightUpperServo_ZERO,document.getElementById("LeftUpperServo_ZERO").value=userSettings.LeftUpperServo_ZERO,document.getElementById("PitchLeftServo_ZERO").value=userSettings.PitchLeftServo_ZERO,document.getElementById("PitchRightServo_ZERO").value=userSettings.PitchRightServo_ZERO,document.getElementById("ValveServo_ZERO").value=userSettings.ValveServo_ZERO,document.getElementById("TwistServo_ZERO").value=userSettings.TwistServo_ZERO,document.getElementById("lubeEnabled").checked=userSettings.lubeEnabled,document.getElementById("lubeAmount").value=userSettings.lubeAmount,document.getElementById("sr6Mode").checked=userSettings.sr6Mode,document.getElementById("autoValve").checked=userSettings.autoValve,document.getElementById("inverseValve").checked=userSettings.inverseValve,document.getElementById("valveServo90Degrees").checked=userSettings.valveServo90Degrees,document.getElementById("inverseStroke").checked=userSettings.inverseStroke,document.getElementById("inversePitch").checked=userSettings.inversePitch,document.getElementById("displayEnabled").checked=userSettings.displayEnabled,document.getElementById("sleeveTempDisplayed").checked=userSettings.sleeveTempDisplayed,document.getElementById("tempControlEnabled").checked=userSettings.tempControlEnabled,document.getElementById("pitchFrequencyIsDifferent").checked=userSettings.pitchFrequencyIsDifferent,document.getElementById("Display_Screen_Width").value=userSettings.Display_Screen_Width,document.getElementById("Display_Screen_Height").value=userSettings.Display_Screen_Height,document.getElementById("TargetTemp").value=userSettings.TargetTemp,document.getElementById("HeatPWM").value=userSettings.HeatPWM,document.getElementById("HoldPWM").value=userSettings.HoldPWM,document.getElementById("Display_I2C_Address").value=userSettings.Display_I2C_Address,document.getElementById("Temp_PIN").value=userSettings.Temp_PIN,document.getElementById("Heater_PIN").value=userSettings.Heater_PIN,document.getElementById("WarmUpTime").value=userSettings.WarmUpTime,document.getElementById("heaterFailsafeTime").value=userSettings.heaterFailsafeTime,document.getElementById("heaterThreshold").value=userSettings.heaterThreshold,document.getElementById("heaterResolution").value=userSettings.heaterResolution,document.getElementById("heaterFrequency").value=userSettings.heaterFrequency,document.getElementById("TCodeVersion").value=userSettings.TCodeVersion,document.getElementById("ssid").value=userSettings.ssid,document.getElementById("wifiPass").value=userSettings.wifiPass,document.getElementById("staticIP").checked=userSettings.staticIP,document.getElementById("localIP").value=userSettings.localIP,document.getElementById("gateway").value=userSettings.gateway,document.getElementById("subnet").value=userSettings.subnet,document.getElementById("dns1").value=userSettings.dns1,document.getElementById("dns2").value=userSettings.dns2,newtoungeHatExists=userSettings.newtoungeHatExists,document.getElementById("TwistFeedBack_PIN").readonly=newtoungeHatExists,document.getElementById("RightServo_PIN").readonly=newtoungeHatExists,document.getElementById("LeftServo_PIN").readonly=newtoungeHatExists,document.getElementById("RightUpperServo_PIN").readonly=newtoungeHatExists,document.getElementById("LeftUpperServo_PIN").readonly=newtoungeHatExists,document.getElementById("PitchLeftServo_PIN").readonly=newtoungeHatExists,document.getElementById("PitchRightServo_PIN").readonly=newtoungeHatExists,document.getElementById("ValveServo_PIN").readonly=newtoungeHatExists,document.getElementById("TwistServo_PIN").readonly=newtoungeHatExists,document.getElementById("Vibe0_PIN").readonly=newtoungeHatExists,document.getElementById("Vibe1_PIN").readonly=newtoungeHatExists,document.getElementById("LubeManual_PIN").readonly=newtoungeHatExists,document.getElementById("Temp_PIN").readonly=newtoungeHatExists,document.getElementById("Heater_PIN").readonly=newtoungeHatExists,document.getElementById("Display_Screen_Width").readonly=!0,document.getElementById("Display_Screen_Height").readonly=!0,documentLoaded=!0}function updateUserSettings(){documentLoaded&&(null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{closeError(),infoNode.hidden=!1,infoNode.innerText="Saving...",infoNode.style.color="black";var e=new XMLHttpRequest,t={};e.open("POST","/settings",!0),e.onreadystatechange=function(){4===e.readyState&&(""===e.responseText?t.msg=e.status+": "+e.statusText:t=JSON.parse(e.responseText),"done"!==t.msg?(infoNode.hidden=!0,infoNode.innerText="",showError("Error saving: "+t.msg),onDocumentLoad()):(infoNode.visibility="visible",infoNode.innerText="Settings saved!",infoNode.style.color="green",restartRequired&&(document.getElementById("requiresRestart").hidden=!1,document.getElementById("resetBtn").disabled=!1),setTimeout((()=>{infoNode.hidden=!0,infoNode.innerText=""}),5e3)))},e.setRequestHeader("Content-Type","application/json");var n=JSON.stringify(userSettings);e.send(n),upDateTimeout=null}),3e3))}function closeError(){document.getElementById("errorText").innerHTML="",document.getElementById("errorMessage").hidden=!0}function showError(e){document.getElementById("errorText").innerHTML+=e,document.getElementById("errorMessage").hidden=!1}function onMinInput(e){var t=e+"Min",n=document.getElementById(t),s=document.getElementById(e+"Max");n.value=Math.min(n.value,s.value-2),updateMinUI(e,100/(parseInt(n.max)-parseInt(n.min))*parseInt(n.value)-100/(parseInt(n.max)-parseInt(n.min))*parseInt(n.min)),updateRangePercentageLabel(e,n.value,document.getElementById(e+"Max").value);var u=percentageToTcode(n.value);u<1&&(u=1),userSettings[t]=u,updateUserSettings()}function onMaxInput(e){var t=e+"Max",n=document.getElementById(t),s=document.getElementById(e+"Min");n.value=Math.max(n.value,s.value- -2),updateMaxUI(e,100/(parseInt(n.max)-parseInt(n.min))*parseInt(n.value)-100/(parseInt(n.max)-parseInt(n.min))*parseInt(n.min)),updateRangePercentageLabel(e,document.getElementById(e+"Min").value,n.value);var u=percentageToTcode(n.value);userSettings[t]=u,updateUserSettings()}function calculateAndUpdateMinUI(e,t){updateMinUI(e,tcodeToPercentage(t))}function calculateAndUpdateMaxUI(e,t){updateMaxUI(e,tcodeToPercentage(t))}function updateMinUI(e,t){document.getElementById(e+"Min").value=t,document.getElementById(e+"InverseMin").style.width=t+"%",document.getElementById(e+"Range").style.left=t+"%",document.getElementById(e+"ThumbMin").style.left=t+"%",document.getElementById(e+"SignMin").style.left=t+"%",document.getElementById(e+"ValueMin").innerText=t+"%"}function updateMaxUI(e,t){document.getElementById(e+"Max").value=t,document.getElementById(e+"InverseMax").style.width=100-t+"%",document.getElementById(e+"Range").style.right=100-t+"%",document.getElementById(e+"ThumbMax").style.left=t+"%",document.getElementById(e+"SignMax").style.left=t+"%",document.getElementById(e+"ValueMax").innerText=t+"%"}function updateSpeedUI(e){var t=speedToPercentage(e);document.getElementById("speedSign").style.left=t+"%",document.getElementById("speedThumb").style.left=t+"%",document.getElementById("speedValue").style.left=t+"%",document.getElementById("speedInverseMax").style.width=100-t+"%",document.getElementById("speedRange").style.right=100-t+"%",e>999?(document.getElementById("speedValue").innerText=e,document.getElementById("speedLabel").innerText=e+"ms"):(document.getElementById("speedValue").innerText="off",document.getElementById("speedLabel").innerText="off")}function updateRangePercentageLabel(e,t,n){document.getElementById(e+"RangeLabel").innerText=n-t+"%"}function tcodeToPercentage(e){return convertRange(1,1e3,1,100,e)}function percentageToTcode(e){return convertRange(1,100,1,1e3,e)}function speedToPercentage(e){return convertRange(999,4e3,0,100,e)}function convertRange(e,t,n,s,u){var d=(s-n)/(t-e);return Math.round(n+d*(u-e))}function onSpeedInput(){var e=parseInt(document.getElementById("speedInput").value);userSettings.speed=e>999?e:0,updateSpeedUI(e),updateUserSettings()}function updateUdpPort(){userSettings.udpServerPort=parseInt(document.getElementById("udpServerPort").value),showRestartRequired(),updateUserSettings()}function setPitchFrequencyIsDifferent(){var e=document.getElementById("pitchFrequencyIsDifferent").checked;userSettings.pitchFrequencyIsDifferent=e,togglePitchServoFrequency(e)}function updateServoFrequency(){userSettings.servoFrequency=parseInt(document.getElementById("servoFrequency").value),userSettings.pitchFrequency=parseInt(document.getElementById("pitchFrequency").value),userSettings.valveFrequency=parseInt(document.getElementById("valveFrequency").value),userSettings.twistFrequency=parseInt(document.getElementById("twistFrequency").value),showRestartRequired(),updateUserSettings()}function updateContinuousTwist(){var e=document.getElementById("continuousTwist").checked;e?confirm("WARNING! If you enable continuous twist\nMAKE SURE THERE ARE NO WIRES CONNECTED TO YOUR FLESHLIGHT CASE!\nThis can twist the wires and possible injury can occur.\n CONFIRM THERE ARE NO WIRES CONNECTED?")?(userSettings.continuousTwist=e,updateUserSettings()):document.getElementById("continuousTwist").checked=!1:(userSettings.continuousTwist=!1,updateUserSettings())}function updateAnalogTwist(){var e=document.getElementById("analogTwist").checked;userSettings.analogTwist=e,e&&!newtoungeHatExists?(document.getElementById("TwistFeedBack_PIN").value=32,userSettings.TwistFeedBack_PIN=32,alert("Note, twist feedback pin has been changed to analog input pin 32.\nPlease adjust your hardware accordingly.")):(document.getElementById("TwistFeedBack_PIN").value=26,userSettings.TwistFeedBack_PIN=26,alert("Note, twist feedback pin reset to 26.\nPlease adjust your hardware accordingly.")),showRestartRequired(),updateUserSettings()}function updateHostName(){userSettings.hostname=document.getElementById("hostname").value,showRestartRequired(),updateUserSettings()}function updateFriendlyName(){userSettings.friendlyName=document.getElementById("friendlyName").value,showRestartRequired(),updateUserSettings()}function setSR6Mode(){userSettings.sr6Mode=document.getElementById("sr6Mode").checked,toggleDeviceOptions(userSettings.sr6Mode),showRestartRequired(),updateUserSettings()}function setAutoValve(){userSettings.autoValve=document.getElementById("autoValve").checked,updateUserSettings()}function setInverseValve(){userSettings.inverseValve=document.getElementById("inverseValve").checked,updateUserSettings()}function setValveServo90Degrees(){var e=document.getElementById("valveServo90Degrees").checked;e?confirm("WARNING! If you 90 degree servo\nMAKE SURE YOU ARE NOT USING THE T-Valve LID!\nThe servo will stall hitting the wall and burn out!")?(userSettings.valveServo90Degrees=e,updateUserSettings()):document.getElementById("valveServo90Degrees").checked=!1:(userSettings.valveServo90Degrees=!1,updateUserSettings())}function setInverseStroke(){userSettings.inverseStroke=document.getElementById("inverseStroke").checked,updateUserSettings()}function setInversePitch(){userSettings.inversePitch=document.getElementById("inversePitch").checked,updateUserSettings()}function updatePins(){newtoungeHatExists||(null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{var e=[2,4,5,12,13,14,15,16,17,18,19,21,23,25,26,27,32,33],t=[],n=[],s=[],u=parseInt(document.getElementById("TwistFeedBack_PIN").value);t.push(u);var d=parseInt(document.getElementById("TwistServo_PIN").value);t.indexOf(d)>-1&&n.push("Twist servo pin"),-1==e.indexOf(d)&&s.push("Twist servo pin: "+d),t.push(d);var o=parseInt(document.getElementById("RightServo_PIN").value);t.indexOf(o)>-1&&n.push("Right servo pin"),-1==e.indexOf(o)&&s.push("Right servo pin: "+o),t.push(o);var r=parseInt(document.getElementById("LeftServo_PIN").value);t.indexOf(r)>-1&&n.push("Left servo pin"),-1==e.indexOf(r)&&s.push("Left servo pin: "+r),t.push(r);var i=parseInt(document.getElementById("RightUpperServo_PIN").value);t.indexOf(i)>-1&&n.push("Right upper servo pin"),-1==e.indexOf(i)&&s.push("Right upper servo pin: "+i),t.push(i);var a=parseInt(document.getElementById("LeftUpperServo_PIN").value);t.indexOf(a)>-1&&n.push("Left upper servo pin"),-1==e.indexOf(a)&&s.push("Left upper servo pin: "+a),t.push(a);var l=parseInt(document.getElementById("PitchLeftServo_PIN").value);t.indexOf(l)>-1&&n.push("Pitch left servo pin"),-1==e.indexOf(l)&&s.push("Pitch left servo pin: "+l),t.push(l);var g=parseInt(document.getElementById("PitchRightServo_PIN").value);t.indexOf(g)>-1&&n.push("Pitch right servo pin"),-1==e.indexOf(g)&&s.push("Pitch right servo pin: "+g),t.push(g);var c=parseInt(document.getElementById("ValveServo_PIN").value);t.indexOf(c)>-1&&n.push("Valve servo pin"),-1==e.indexOf(c)&&s.push("Valve servo pin: "+c),t.push(c);var m=parseInt(document.getElementById("Vibe0_PIN").value);t.indexOf(m)>-1&&n.push("Vibe 0 pin"),-1==e.indexOf(m)&&s.push("Vibe 0 pin: "+m),t.push(m);var I=parseInt(document.getElementById("Vibe1_PIN").value);t.indexOf(I)>-1&&n.push("Lube/Vibe 1 pin"),-1==e.indexOf(I)&&s.push("Lube/Vibe 1 pin: "+I),t.push(I);var v=parseInt(document.getElementById("Temp_PIN").value);t.indexOf(v)>-1&&n.push("Temp pin"),-1==e.indexOf(v)&&s.push("Temp pin: "+v),t.push(v);var p=parseInt(document.getElementById("Heater_PIN").value);t.indexOf(p)>-1&&n.push("Heater pin"),-1==e.indexOf(p)&&s.push("Heater pin: "+p),t.push(p);var y=parseInt(document.getElementById("LubeManual_PIN").value);if(t.indexOf(y)>-1&&n.push("Lube manual pin"),-1==e.indexOf(y)&&s.push("Lube manual pin: "+y),n.length>0||s.length>0){var E="Pins NOT saved due to invalid input.<br>";n.length>0&&(E+="<div style='margin-left: 25px;'>The following pins are duplicated:<br><div style='color: white; margin-left: 25px;'>"+n.join("<br>")+"</div></div>"),s.length>0&&(n.length>0&&(E+="<br>"),E+="<div style='margin-left: 25px;'>The following pins are invalid PWM pins:<br><div style='color: white; margin-left: 25px;'>"+s.join("<br>")+"</div></div>"),showError(E)}else closeError(),userSettings.TwistFeedBack_PIN=u,userSettings.TwistServo_PIN=d,userSettings.RightServo_PIN=o,userSettings.LeftServo_PIN=r,userSettings.RightUpperServo_PIN=i,userSettings.LeftUpperServo_PIN=a,userSettings.PitchLeftServo_PIN=l,userSettings.PitchRightServo_PIN=g,userSettings.ValveServo_PIN=c,userSettings.Vibe0_PIN=m,userSettings.Vibe1_PIN=I,userSettings.Temp_PIN=v,userSettings.Heater_PIN=p,userSettings.LubeManual_PIN=y,showRestartRequired(),updateUserSettings()}),2e3))}function updateZeros(){null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{var e=!0,t=[],n=parseInt(document.getElementById("RightServo_ZERO").value);(!n||n>1750||n<1250)&&(e=!1,t.push("Right servo ZERO"));var s=parseInt(document.getElementById("LeftServo_ZERO").value);(!s||s>1750||s<1250)&&(e=!1,t.push("Left servo ZERO"));var u=parseInt(document.getElementById("RightUpperServo_ZERO").value);(!u||u>1750||u<1250)&&(e=!1,t.push("Right upper servo ZERO"));var d=parseInt(document.getElementById("LeftUpperServo_ZERO").value);(!d||d>1750||d<1250)&&(e=!1,t.push("Left upper servo ZERO"));var o=parseInt(document.getElementById("PitchLeftServo_ZERO").value);(!o||o>1750||o<1250)&&(e=!1,t.push("Pitch left servo ZERO"));var r=parseInt(document.getElementById("PitchRightServo_ZERO").value);(!r||r>1750||r<1250)&&(e=!1,t.push("Pitch right servo ZERO"));var i=parseInt(document.getElementById("ValveServo_ZERO").value);(!i||i>1750||i<1250)&&(e=!1,t.push("Valve servo ZERO"));var a=parseInt(document.getElementById("TwistServo_ZERO").value);(!a||a>1750||a<1250)&&(e=!1,t.push("Twist servo ZERO")),e?(closeError(),userSettings.RightServo_ZERO=document.getElementById("RightServo_ZERO").value,userSettings.LeftServo_ZERO=document.getElementById("LeftServo_ZERO").value,userSettings.RightUpperServo_ZERO=document.getElementById("RightUpperServo_ZERO").value,userSettings.LeftUpperServo_ZERO=document.getElementById("LeftUpperServo_ZERO").value,userSettings.PitchLeftServo_ZERO=document.getElementById("PitchLeftServo_ZERO").value,userSettings.PitchRightServo_ZERO=document.getElementById("PitchRightServo_ZERO").value,userSettings.ValveServo_ZERO=document.getElementById("ValveServo_ZERO").value,userSettings.TwistServo_ZERO=document.getElementById("TwistServo_ZERO").value,updateUserSettings()):showError("Zeros NOT saved due to invalid input.<br><div style='margin-left: 25px;'>The values should be between 1250 and 1750 for the following:<br><div style='color: white; margin-left: 25px;'>"+t.join("<br>")+"</div></div>")}),2e3)}function updateLubeAmount(){userSettings.lubeAmount=parseInt(document.getElementById("lubeAmount").value),updateUserSettings()}function toggleDisplaySettings(e){document.getElementById("deviceSettingsDisplayTable").hidden=!e}function toggleTempSettings(e){document.getElementById("tempSettingsDisplayTable").hidden=!e}function setDisplaySettings(){userSettings.displayEnabled=document.getElementById("displayEnabled").checked,toggleDisplaySettings(userSettings.displayEnabled),userSettings.Display_Screen_Width=parseInt(document.getElementById("Display_Screen_Width").value),userSettings.Display_Screen_Height=parseInt(document.getElementById("Display_Screen_Height").value),userSettings.Display_I2C_Address=document.getElementById("Display_I2C_Address").value,userSettings.sleeveTempDisplayed=document.getElementById("sleeveTempDisplayed").checked,showRestartRequired(),updateUserSettings()}function setTempSettings(){userSettings.tempControlEnabled=document.getElementById("tempControlEnabled").checked,toggleTempSettings(userSettings.tempControlEnabled),userSettings.TargetTemp=parseInt(document.getElementById("TargetTemp").value),userSettings.HeatPWM=parseInt(document.getElementById("HeatPWM").value),userSettings.HoldPWM=parseInt(document.getElementById("HoldPWM").value),userSettings.WarmUpTime=parseInt(document.getElementById("WarmUpTime").value),userSettings.heaterFailsafeTime=parseInt(document.getElementById("heaterFailsafeTime").value),userSettings.heaterThreshold=parseInt(document.getElementById("heaterThreshold").value),userSettings.heaterResolution=parseInt(document.getElementById("heaterResolution").value),userSettings.heaterFrequency=parseInt(document.getElementById("heaterFrequency").value),showRestartRequired(),updateUserSettings()}function connectWifi(){}function showWifiPassword(){var e=document.getElementById("wifiPass");"password"===e.type?e.type="text":e.type="password"}function updateWifiSettings(){userSettings.ssid=document.getElementById("ssid").value,userSettings.wifiPass=document.getElementById("wifiPass").value;var e=document.getElementById("staticIP").checked,t=document.getElementById("localIP").value,n=document.getElementById("gateway").value,s=document.getElementById("subnet").value,u=document.getElementById("dns1").value,d=document.getElementById("dns2").value;userSettings.staticIP=e,toggleStaticIPSettings(e),userSettings.localIP=t,userSettings.gateway=n,userSettings.subnet=s,userSettings.dns1=u,userSettings.dns2=d,showRestartRequired(),updateUserSettings()}function togglePitchServoFrequency(e){document.getElementById("pitchFrequencyRow").hidden=!e}function toggleStaticIPSettings(e){e?(document.getElementById("localIPLabel").hidden=!1,document.getElementById("gatewayLabel").hidden=!1,document.getElementById("subnetLabel").hidden=!1,document.getElementById("dns1Label").hidden=!1,document.getElementById("dns2Label").hidden=!1,document.getElementById("localIP").hidden=!1,document.getElementById("gateway").hidden=!1,document.getElementById("subnet").hidden=!1,document.getElementById("dns1").hidden=!1,document.getElementById("dns2").hidden=!1):(document.getElementById("localIPLabel").hidden=!0,document.getElementById("gatewayLabel").hidden=!0,document.getElementById("subnetLabel").hidden=!0,document.getElementById("dns1Label").hidden=!0,document.getElementById("dns2Label").hidden=!0,document.getElementById("localIP").hidden=!0,document.getElementById("gateway").hidden=!0,document.getElementById("subnet").hidden=!0,document.getElementById("dns1").hidden=!0,document.getElementById("dns2").hidden=!0)}function toggleDeviceOptions(e){for(var t=document.getElementsByClassName("osrOnly"),n=document.getElementsByClassName("sr6Only"),s=0;s<n.length;s++)n[s].style.display=e?"revert":"none";for(s=0;s<t.length;s++)t[s].style.display=e?"none":"revert"}function toggleNonTCodev3Options(e){for(var t=document.getElementsByClassName("v2Only"),n=document.getElementsByClassName("v3Only"),s=0;s<n.length;s++)n[s].style.display=e?"revert":"none";for(s=0;s<t.length;s++)t[s].style.display=e?"none":"revert"}function updateBlueToothSettings(){userSettings.bluetoothEnabled=document.getElementById("bluetoothEnabled").checked,showRestartRequired(),updateUserSettings()}function setTCodeVersion(){userSettings.TCodeVersion=parseInt(document.getElementById("TCodeVersion").value),toggleNonTCodev3Options(1==userSettings.TCodeVersion),showRestartRequired(),updateUserSettings()}function showRestartRequired(){documentLoaded&&(restartRequired=!0)}function updateLubeEnabled(){userSettings.lubeEnabled=document.getElementById("lubeEnabled").checked,updateUserSettings()}document.addEventListener("DOMContentLoaded",(function(){onDocumentLoad()}));