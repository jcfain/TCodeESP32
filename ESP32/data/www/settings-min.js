var upDateTimeout,upDatePinsTimeout,importSettingsInputElement,websocket,userSettings={},wifiSettings={},pinoutSettings={},systemInfo={},motionProviderSettings={},buttonSettings={},restartRequired=!1,documentLoaded=!1,debugEnabled=!0,playSounds=!1;const EndPointType={System:{uri:"/systemInfo"},Common:{uri:"/settings"},Pins:{uri:"/pins"},Wifi:{uri:"/wifiSettings"},MotionProfile:{uri:"/motionProfiles"},Buttons:{uri:"/buttonSettings"}},TCodeVersion={V3:0,V4:1},latestTCodeVersion=TCodeVersion.V3,MotorType={Servo:0,BLDC:1},ModuleType={WROOM32:0,S3:1},BuildFeature={NONE:0,DEBUG:1,WIFI:2,BLUETOOTH:3,BLE:4,DA:5,DISPLAY_:6,TEMP:7,HTTPS:8,COEXIST:9,MAX_FEATURE:10};let BoardType={DEVKIT:0,CRIMZZON:1,ISAAC:2},DeviceType={OSR:0,SR6:1,SSR1:2},BLEDeviceType={TCODE:0,LOVE:1,HC:2},BLELoveDeviceType={EDGE:0},BLDCEncoderType={MT6701:0,SPI:1,PWM:2};const servoDegreeValue180=637,servoDegreeValue270=425;dubugMessages=[];var startUpHostName,startUpWebPort,startUpStaticIP,startUpLocalIP,tcodeVersions=[],testDeviceUseIModifier=!1,testDeviceDisableModifier=!1,testDeviceModifierValue="1000",restartClicked=!1,serverPollingTimeOut=null,staticIPAddressTimeout=null,hostnameTimeout=null,serverPollRetryCount=0,channelSliderList=[],restartingAndChangingAddress=!1,resettingAllToDefault=!1;const defaultDebounce=3e3;let validPWMpins=[2,4,5,12,13,14,15,16,17,18,19,21,22,23,25,26,27,32,33],inputOnlypins=[34,35,36,39],adc1Pins=[36,37,38,39,32,33,34,35],adc2Pins=[4,0,2,15,13,12,14,27,25,26];const AvailibleChannelsV3=[{channel:"L0",channelName:"Stroke",switch:!1,sr6Only:!1},{channel:"L1",channelName:"Surge",switch:!1,sr6Only:!0},{channel:"L2",channelName:"Sway",switch:!1,sr6Only:!0},{channel:"R0",channelName:"Twist",switch:!1,sr6Only:!1},{channel:"R1",channelName:"Roll",switch:!1,sr6Only:!1},{channel:"R2",channelName:"Pitch",switch:!1,sr6Only:!1},{channel:"V0",channelName:"Vibe 1",switch:!0,sr6Only:!1},{channel:"V1",channelName:"Vibe 2",switch:!0,sr6Only:!1},{channel:"V2",channelName:"Vibe 3",switch:!0,sr6Only:!1},{channel:"V3",channelName:"Vibe 4",switch:!0,sr6Only:!1},{channel:"A0",channelName:"Suck manual",switch:!1,sr6Only:!1},{channel:"A1",channelName:"Suck level",switch:!1,sr6Only:!1},{channel:"A2",channelName:"Lube",switch:!0,sr6Only:!1},{channel:"A3",channelName:"Aux",switch:!1,sr6Only:!1}],AvailibleChannelsBLDC=[{channel:"L0",channelName:"Stroke",switch:!1,sr6Only:!1},{channel:"R0",channelName:"Twist",switch:!1,sr6Only:!1},{channel:"V0",channelName:"Vibe 1",switch:!0,sr6Only:!1},{channel:"V1",channelName:"Vibe 2",switch:!0,sr6Only:!1},{channel:"V2",channelName:"Vibe 3",switch:!0,sr6Only:!1},{channel:"V3",channelName:"Vibe 4",switch:!0,sr6Only:!1},{channel:"A0",channelName:"Suck manual",switch:!1,sr6Only:!1},{channel:"A1",channelName:"Suck level",switch:!1,sr6Only:!1},{channel:"A2",channelName:"Lube",switch:!0,sr6Only:!1},{channel:"A3",channelName:"Aux",switch:!1,sr6Only:!1}];function logdebug(message){debugEnabled&&console.log(message)}function get(name,uri,callback,callbackFail){var xhr=new XMLHttpRequest;xhr.open("GET",uri,!0),xhr.responseType="json",xhr.onload=function(){200!==xhr.status?(showError("Error loading "+name+"!"),callbackFail&&callbackFail(xhr)):callback&&callback(xhr)},callbackFail&&(xhr.onerror=function(){callbackFail(xhr)}),xhr.send()}function onDocumentLoad(){getSystemInfo(!0),createImportSettingsInputElement()}function getSystemInfo(chain){let polling=!1;serverPollingTimeOut&&(polling=!0,clearTimeout(serverPollingTimeOut),serverPollingTimeOut=null),showLoading("Loading system info..."),get("system info",EndPointType.System.uri,(function(xhr){if(!(systemInfo=xhr.response))return polling||showError("Error getting system info!"),void startServerPoll();"restarting"!==systemInfo.status?(setSystemInfo(),chain?getPinSettings(chain):polling||hideLoading(),serverPollRetryCount=0):startServerPoll()}),(function(xhr){polling||showError("Error getting system info!"),startServerPoll()}))}function getPinSettings(chain){showLoading("Loading pinout..."),get("Pinout settings",EndPointType.Pins.uri,(function(xhr){(pinoutSettings=xhr.response)?setPinoutSettings():showError("Error getting pinout!"),chain?getWifiSettings(chain):hideLoading()}))}function getWifiSettings(chain){showLoading("Loading network settings..."),get("wifi settings",EndPointType.Wifi.uri,(function(xhr){(wifiSettings=xhr.response)&&wifiSettings.ssid?(startUpStaticIP=wifiSettings.staticIP,startUpLocalIP=wifiSettings.localIP,startUpWebPort=wifiSettings.webServerPort,startUpHostName=wifiSettings.hostname,setWifiSettings()):showError("Error getting wifi settings!"),chain?getMotionProviderSettings(chain):hideLoading()}))}function getMotionProviderSettings(chain){showLoading("Loading motion generator settings..."),get("motion settings",EndPointType.MotionProfile.uri,(function(xhr){(motionProviderSettings=xhr.response)&&motionProviderSettings.motionProfiles||showError("Error getting motion provider settings!"),chain?getButtonSettings(chain):hideLoading()}))}function getButtonSettings(chain){showLoading("Loading button settings..."),get("button settings",EndPointType.Buttons.uri,(function(xhr){(buttonSettings=xhr.response)&&buttonSettings.bootButtonCommand||showError("Error getting button settings!"),chain?getUserSettings():hideLoading()}))}function postCommonSettings(debounce,callback){updateUserSettings(debounce,EndPointType.Common.uri,userSettings,callback)}function postAndValidatePinoutSettings(debounce,callback){(!debounce||debounce<0)&&(debounce=0),upDatePinsTimeout&&clearTimeout(upDatePinsTimeout),upDatePinsTimeout=setTimeout((()=>{validatePins()?updateUserSettings(0,EndPointType.Pins.uri,pinoutSettings,callback):callback&&callback()}),debounce)}function postPinoutSettings(debounce,callback){updateUserSettings(debounce,EndPointType.Pins.uri,pinoutSettings,callback)}function postWifiSettings(debounce,callback){updateUserSettings(debounce,EndPointType.Wifi.uri,wifiSettings,callback)}function postButtonSettings(debounce,callback){updateUserSettings(debounce,EndPointType.Buttons.uri,buttonSettings,callback)}function postMotionProfileSettings(debounce){MotionGenerator.updateSettings(null,null,debounce)}function updateALLUserSettings(){postCommonSettings(0,updatePinoutChain)}document.addEventListener("DOMContentLoaded",(function(){onDocumentLoad(),document.getElementById("page-body").style.visibility="visible",hideLoading()}));var updatePinoutChain=function(){postAndValidatePinoutSettings(0,updateWifiSettingsChain)},updateWifiSettingsChain=function(){postWifiSettings(0,updateButtonSettingsChain)},updateButtonSettingsChain=function(){postButtonSettings(0,updateMotionProfileSettings)},updateMotionProfileSettings=function(){postMotionProfileSettings(0)};function getUserSettings(){showLoading("Loading common settings..."),get("common settings",EndPointType.Common.uri,(function(xhr){(userSettings=xhr.response)&&null!=userSettings.TCodeVersion?setUserSettings():showError("Error getting user settings!"),initWebSocket()}))}function initWebSocket(){try{var wsUri=(hasFeature(BuildFeature.HTTPS)?"wss://":"ws://")+window.location.host+"/ws";"function"==typeof MozWebSocket&&(WebSocket=MozWebSocket),websocket&&websocket.close(),(websocket=new WebSocket(wsUri)).onopen=function(evt){logdebug("CONNECTED"),restartClicked&&(getUserSettings(),restartClicked=!1),hideLoading(),serverPollingTimeOut&&(clearTimeout(serverPollingTimeOut),serverPollingTimeOut=null)},websocket.onclose=function(evt){if(logdebug("DISCONNECTED"),!serverPollingTimeOut&&!restartingAndChangingAddress){let message="Server disconnected, waiting for restart...";systemInfo.apMode&&(message+="\n(Hint: Make sure you are connected to the AP in wifi networks."),showLoading(message),startServerPoll()}},websocket.onmessage=function(evt){wsCallBackFunction(evt),logdebug("MESSAGE RECIEVED: "+evt.data)},websocket.onerror=function(evt){serverPollingTimeOut||restartingAndChangingAddress||(showLoading("Server error, waiting for restart..."),startServerPoll())}}catch(exception){serverPollingTimeOut||restartingAndChangingAddress||(showLoading("Server exception, waiting for restart..."),startServerPoll())}}function wsCallBackFunction(evt){try{var data=JSON.parse(evt.data);switch(data.command){case"sleeveTempStatus":var tempStatus=(status=data.message).status,temp=status.temp;document.getElementById("currentTempStatus").value=tempStatus,document.getElementById("currentTemp").value=temp;break;case"internalTempStatus":var status;tempStatus=(status=data.message).status,temp=status.temp;document.getElementById("internalTempStatus").value=tempStatus,document.getElementById("internalTemp").value=temp;break;case"tempReached":playSuccess();break;case"batteryStatus":wsBatteryStatus(data);break;case"debug":debug(data.message);break}}catch(e){console.error(e.toString())}}function debug(message){debugTextElement&&(dubugMessages.length>1e3&&dubugMessages.shift(),dubugMessages.push(message),debugTextElement.value=dubugMessages.join("\n"),debugTextElement.scrollTop=debugTextElement.scrollHeight)}function setLogLevelUI(){const clearTagsButton=document.getElementById("clearTagsButton"),clearFiltersButton=document.getElementById("clearFiltersButton"),selectedIncludes=userSettings["log-include-tags"],selectedExcludes=userSettings["log-exclude-tags"];clearTagsButton.disabled=!selectedIncludes?.length,clearFiltersButton.disabled=!selectedExcludes?.length,clearTagsButton.innerText="Clear included"+(selectedIncludes.length?": "+selectedIncludes.length:""),clearFiltersButton.innerText="Clear excluded"+(selectedExcludes.length?": "+selectedExcludes.length:"")}function setLogLevel(){userSettings.logLevel=parseInt(document.getElementById("logLevel").value);const selectedIncludes=document.querySelectorAll("#log-include-tags option:checked");userSettings["log-include-tags"]=Array.from(selectedIncludes).map((el=>el.value));const selectedExcludes=document.querySelectorAll("#log-exclude-tags option:checked");userSettings["log-exclude-tags"]=Array.from(selectedExcludes).map((el=>el.value)),setLogLevelUI(),updateUserSettings()}function clearTags(name){userSettings[name]=[];for(var element=document.getElementById(name),i=0;i<element.options.length;i++)element.options[i].selected=!1;setLogLevelUI(),updateUserSettings()}function clearLog(){debugTextElement&&(dubugMessages=[],debugTextElement.value="")}function playSuccess(){playSounds&&new Audio("data:audio/mp3;base64,SUQzAwAAAAAfdlRJVDIAAAA+AAAAZWFyY29uIGV2ZW50IG5vdGlmaWNhdGlvbiBhbGVydCBtdXNpY2FsICAodmVyIDMpIHNvdW5kIGVmZmVjdFRQRTEAAAARAAAAc291bmRlZmZlY3QuaW5mb1RBTEIAAAARAAAAc291bmRlZmZlY3QuaW5mb1RZRVIAAAAFAAAAMjAxNlRDT04AAAAFAAAAUm9ja0NPTU0AAAAPAAAAZW5nAGV4Y2VsbGVudCFUUkNLAAAABgAAADA0LzE2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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nbI6LOGdZdS5FqNy3twsesxGOco+c6rmlO+piSUEEAxBQ0IhEy4ayp4XrN7rVqcxzMZQ6Bbnlk390YD/+mBgGCvDAAMSIVRrWqJOAAAJcAAAAQuU01Gt5GtwAAAlwAAABFzE1JsAhFZSgaAb4dVZNHRGAeiKkSC4wUJJ732jX+o7FPGGVggQ2foDrbyx+I3/UpO+oojemxgtmMYzmpL5z8j/mQVoHM6dCMBBgopKUHMUHu/9SsQHJnWrta2AYYCX/pC6MmFlIUmpXl3F2GJBrFXYYVU4iQ8go/xMQhvW6SJrQYkcQO5l/n/++/zk1L65iYb8Y4TdPllTBuRRB5ycSm8uRwJIlF3a0sJmsXLtlzdaP8AElXGrrK0BKUh9KFkAAk6ZRo+2kgygdFdHgyBkL4Yb5kZFRf5+qpVCnHGs2s7/+mJg8knTAAMdNlRreTLcAAAJcAAAAQtQn0+s6KlwAAAlwAAABFj/6752QyPiAI9XG1EWRKIlXdFe9eVHVRGJHMiGREFyyxFiloEThWKLfTV/X//////////////////////////////////iCm87HbZGgB4EUyqiQYSBlcw6YB08zWaC0WqvMRNU+rbF734mSU3q1eGFhzAFArcazTY5Y/JL6bnEhqShAs0iBXDCFqEjD6ECgfMAEg8ylI0XvlxI1i/ZTsQFJXWrbI0ANARYDNF1x0ERFgbaQ0WHd8zBldM2MHR3JZlvuRj0Fq7UfdShmxwCMCd5//c9MGRMPOBUWFQKkas7//pgYP5+44AC4C7U61ka3AAACXAAAAELiL9PrWhrcAAAJcAAAASShgWUkXkAKwHFQWaXY6bOE3vMsV9f//////////////////////////////////////////////////////////////5AJvSt3a1oCKl+ImQKh4m8YyEeFY33GHMig0RjwKzeU0GqpvZzuW7kfVlCX4VZ7j37l75nn+/nH2Du6UwZ6wEtRXVV8TWXEK+TRR5TUGRjXJtZnWGsxT1r1aQC55ZLbIkA9DObhbFRcrHgmCLNYtdC4psDkjSVPMwgCD5BZpjUvKOxbljWwQOMRAd2mxrbyuybRk8UKhyw7lIS//pgYKgb9oADoTFS6zoq3AAACXAAAAELEElJreNG8AAAJcAAAARnZDuR32n1Veziw+lisYLkGPatwvStvuGdGLI////////////////////////////////////////////////////////////////////////////+kAuZ1qSNogKE0WYOLFUa2cGa0F3YjBa9rKdBj/NcLZxSn7iaj963GHbTkYufTcI7//93ilCltj3kI905TPKa8fTSi4GFtuPWiirEFN6Zu2yJAAoKHArKMCSqJBljo+HXo+g61mN4RnhLZKlXOsbs09SU8QaWtkfXgbHuPfr+UFzAooPwgGj4IXrF//pgYPSg/4AELRJSa1nRvAAACXAAAAELKMVLrGRrcAAAJcAAAARWCo8JnQdMk7FhUkE6n/f0b+iWegl///////////////////////////////////////////////////////////////////////////5Alz3W22RgBThf1QOJwCRCABKEo07pBDJX6FktXTlnqTCqeHc7W3SO2FFDq+ZzLsbVXsEz+3aEtN75dq9bqdbKq+rtFfv5/5t9mkrV7m1abo+oAyaaOyNogJmsygkwAhhBMYEcpTSG6cDIMSZcDaIYgCaxxuHDNaqww7aGCV58Vvxn//+N/+Y56smhezPHbgvp//piYBiM/4AEri1R61oa3AAACXAAAAEJQElDrWcm8AAAJcAAAARxB9usky0CJQ81iyWEFs6/1f//////////////////////////////////////////////////////////////////////////////////////////////9ICb0zckbIAhhcs0h6VQlqmGURgKxvuOSXlHxCeBXfh2/2qcUt6tdgBVdeI+892Ped+5aQRcWH2kD1ywi9PYIhXUjTh329CoAuaaSSNogLsYLbMMIhAQrBuI1LFrohM8D+h0WLsMn7P1jdcv0W7MNjAxzNOLTY5crRwKkG0mIocvWRPTyWklPv/6YGAxi/+ABG0SUetYybwAAAlwAAABCixLSa1jJvgAACXAAAAEHhHbFwsdcQW5BYornbAnZ0///////////////////////////////////////////////////////////////////////////////////////////UAbddbJG0QIEfWoDlXqHjxjFr8osGiCiqtQweHIa3YkeVKd1s7bpI2tAtOd3MAb7zvICsKYdqHuuk2sS1lipU07KtxzPJdp9laEFOa6SSNkAQJjklk8ZMcZSo/G2kMEJ24zoNe5sGUlPjWPGqXVLcoYGuUH5Qfj3n8rXrD0IOSPThciSY0DKNgFbP/6YGAvAf+ABMMVUOtZycwAAAlwAAABCNBJQazjJvAAACXAAAAEQf2mrOr/////////////////////////////////////////////////////////////////////////////////////////////////////hADlkn/SAlazKOgoQVBKAICRBKFZ0FHtHaEA2p5vrb5lVNQhs63j5AKOEYbWmx7z93sLb4sVnuzRr9t/Rb/t79keedxT+a2lRV27d+hKaAMltsbaRAE7coACDKgFAYI4ixIbpwUYup3hDFQSjvLc0b9hTcwp30AokzUmOWdc/lDZ3Ws2KJr6WUm/YYeaYP/6YGB0av+ABK0R0Gs4ybwAAAlwAAABCShJQ6znJvAAACXAAAAE52hbFd79X///////////////////////////////////////////////////////////////////////////////////////////////////////////EAnLbJJGyAHNmI+OkbCTMBoCcDT4bHCNykoVS3ueGtVTqds63UibugNaRcy33dCYEgxRSEgibhU2sNO5dxi8JxQ+kKxV9+xfiALtssbaRAD8SWOGAG8A0SIYx5WexQRQQ7p0GnHEO43qxqzk9z/wKog5wxpsus6xqTNvC6MMMZbzL0Vl0XteJP/6YmDE4P+ABJASUGs4ybwAAAlwAAABCbRLOY1jRvgAACXAAAAESVu0lYoGrCP/6f//////////////////////////////////////////////////////////////////////////////////////////////////////////ZAMksv/QBFJnIaBIuJgiKCu+GKQHPXS1wK+lE3h2tLT2jnf/tIFSRTuJVe/r921lXH/nFtY572c53v/DnDYJtsvVsv/7QQA1Z5eNbZEAJNnwoBKhAkGZCY+2tR9BlrIbAVO9tNr/khtz09rOpK2gnDJN/Z86DQczgrD9l1KjVTFy603iDQn/+mBghTL/gAS3Es7rWdG8AAAJcAAAAQj4Rz2sYybwAAAlwAAABKtavar///////////////////////////////////////////////////////////////////////////////////////////////////////////////VAEniKidtrWAJN80Cl2fERwM8Fup3QWW1V7gUlqePebqnYvLeYZVEpg3RtaazLaxrcdE9hYkYcspJjjKnniq3xKPYTf69AVAAoh5edrrWAIrQQWBCH3FjhD4xCN04OQ051hnVbDvMbh9RW//wQngXcPYVmiIqBlt9EIpWLkyQ1j3IvUsueafr/+mBglZL/gATQEs7rONG8AAAJcAAAAQigSTeNYyb4AAAlwAAABHROMThcLf///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ZgBq6u0SSNkATnJoQDkoaFRkoD5i133GFMCekEraDn/92Anea7qu0A7UpfjdW0ZfTagmlQi2E69RR6pFY0oItGnoNIMwAWhXZ5JGyAKLlcwwiwCuAG7jWM9sQqepxTMFodz/5oHJX987gzInAg4ClhUwKNQtr2i2biSxSs/sGXVuL6vcj/+mBgjVP/gATED8x7ONG4AAAJcAAAAQjEPzXs4ybgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0QQOZeAi22RACi7YDkV8jxopa5cMUgQtiLLBHyUXcemiICqn4nsGw5s2tyqXtFVo1vCNCy9azb+KEC4v11kgZvdfJI0ABRZ3CIuMDyJlKj661HYGXshsA0b5Zb/HSFX4b1uHDKC2IRcE2oSxzxeWcpU4eEi5AdFaPY5u1np//+mBgQRH/gATbD8z7OMG4AAAJcAAAAQh0Py3s4ybgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0yFvdNJJIwBO5SkIEIACgUGXDV0huCI7wweW1c/HvEGC3lTah9AupqbLetavc0fM0OYaFBtxsUOuFqLEvdX9MWzCF9LN/0AXvjwXHJQnuEfTWCbL4X0IMSQQyTdgWT+JuBfgU7Wq6ioUQm7tQUxgaGpiV7cXio9etf///////////+mJg8UD/gAUUDst7OMm4AAAJcAAAAQesOzHs4gbgAAAlwAAABP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+GDLXRf/4C9yVjISwRQWZrA+4rG7ZARwqqw8t7zTrBSV+SgJ04EU4+JZh7LLHEaVT7it1hscTWaVmRRfwDgwVrI7n/Ac+4Cgb5MeBfRb2e2IyQRLWc2+d1m5xb/+IQRMweapvqikdhqm9San1Fq83cKfucr////////////////pgYHXm/4AE9A7K6zjBuAAACXAAAAEICD8prOJGwAAAJcAAAAT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////DIVsjlWoBe/IWGVTKAxTN22CIXtlZBTsX1qcQPX2qG7iy3rx0fcfHqDMHAoWUlDENQffpURE7q45/+IXvlI0YQCxw0ox/Mkh+Ad0jo53WN7WEy6yARKOvQkWYEWJrte9DK1yC1S6Hsdchn//Z8p////////////pgYFvO/4AFDw5KYzBpuAAACXAAAAEHmDsljOGmwAAAJcAAAAT//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Kk7XHCpQDn3Ag9O0WIBmA1lFwO1rjGjv/FxCzX4KRn0k0kCFKaLKaSCc573S8VGWOOf/wHPiKCCUkSAzQ+grRhiUgO9Z2QZSzVCcPZxr2RpTWeUlsK5Sm1wpM1va7Uz1f///////////////////pgYKL5/4AFUg7JYzh5sAAACXAAAAEGjDsljL1m4AAAJcAAAAT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////iuWwSRxttADnzCE1RweJMtofYBPNwUJWbt/rjHbGtjKZPPYIQ+erupOmLWD7nNkIsWeDbW/4tFsWyWiORySIAc+0nUSjMZCto1aSgSOIiK/kFNtUSTPku0WeUSJp6w+4oKrlljEvWJIRFfV///////////////////piYAlk/4AFkw5JYy85sAAACXAAAAEFsDkljL1G4AAAJcAAAAT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4sdkjcqlAOfglyn8JDilsBghAfPFT6t2ZEQtQdJ6lfqPJ6aXpdfMudbINB9YW7ayWySSMAc/BocqKHmKJH8kKA6rjf/vz7UMJDqhjaIopxNWAZQXOtH5Q2g+gl1L1awpp///////////////////6YGAsC/+ABTkOSWMpObAAAAlwAAABBvQ7JaysxsAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8X+2SSedADSoBCf4YsDOhcKdEyusXcVQiLqexFrvlTG9yhe08gjSKvFqcO2RuN1agDYTUTeoVugADoSqQXB4G1rTijHqUmrFC4EPCdJEjQmwz7S65f///////////////////////////////6YGDxQv+ABZUOyesnEbAAAAlwAAABBYg5JYyYpuAAACXAAAAE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////E3kgbdUoA1QiUbSAMMCfD0IwbdXl2JW2pMQoSzU2tfGTSmrrY5ZtaAFeAVERFEkkYAawAxFC0RxjUuGYdXksACTupVY3chUgTM7maGi7Un5dmyun//////////////////////////////6YGCXof+ABagOSmsJGbAAAAlwAAABBTgZKYPkwmAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////BcSIRMqoBw2ONqMZgkAJnWYkCfDouaMPKyhYaK2bJ9UAInntnvDSn7regdALAAAGozVUV0PaXsbvoj5OiWWtEe4gmaXY8jWMl1qJm6///////////////////////////////////////////6YGB/wf+ABbYGSWC5GJgAAAlwAAABBQAZJYPgYmAAACXAAAAE///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ALBAAHOR2GwRUab1wq8Uctr2Ct6mJSlFGz/ZabbNKBcSTSXgUcNGU+Lua8QsxtSWy5WeNjVIMx86LjnLmXvxdiUISr//////////////////////////////////////6YmCI//+ABaQFyni5EJAAAAlwAAABBWwTHYLgIkAAACXAAAAE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AKBBAE4gENYFFCx1DIvKViKkHJSYFCX8dZ0gFylNajClaF8M2WGS94kIiRmeR1ck5mNfoVsHFtrRguhrhQOL4un///////////////////////////////////////////+mBgJ4H/gAYCBMYgTwiQAAAJcAAAAQPYExiAvCJAAAAlwAAABP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CoGaiUA6BuZqLHz29jVpFmv/dCL1Le1vVfvtJPsRBVlX8Ot7gYFnJQX1tWIWur+SHpnDJitkQmLExqklBTo1Vp//////////////////////////////////////////+mBgsS3/gAX8BEhYBXgYAAAJcAAAAQPoERiABMBAAAAlwAAABP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////817KoBsV7erFNJowD79N7noEgEXzVpJsrl6EfW673h1f3ut/6ZFHK+a///////////////////////////////////////////////////////////////////+mBg4Hr/gAYIBEdAATAQAAAJcAAAAQO8Dx8gBEBAAAAlwAAABP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////P//////////////////////////////////////////////////////////////////////////////////////+mJg+Ir/gAYwAEdAAAAAAAAJcAAAAQNAARzAAAAAAAAlwAAABP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//pgYBbJ/4AG9gDGAAAAAAAACXAAAAEAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//pgQPcd/4AG+ABLgAAACAAACXAAAAEAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA").play()}function onDefaultClick(){if(confirm("WARNING! Are you sure you wish to reset ALL settings?\nThis will restart your device and you may need to reconfigure your WiFi settings!")){showInfo("Setting default...");var xhr=new XMLHttpRequest;xhr.open("POST","/default",!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(200!==xhr.status?showError("Error setting default!"):(showInfoSuccess("Settings reset!"),showLoading("Restarting..."),startServerPoll()))},xhr.send()}}function postBoardType(newBoardType){showInfo("Changing board...");var xhr=new XMLHttpRequest;xhr.open("POST","/changeBoard/"+newBoardType,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(200!==xhr.status?showError("Error setting pinout default!"):(showInfoSuccess("Board changed!"),getPinSettings(),showRestartRequired()))},xhr.send()}function postDeviceType(deviceType){showInfo("Changing device...");var xhr=new XMLHttpRequest;xhr.open("POST","/changeDevice/"+deviceType,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(200!==xhr.status?showError("Error setting pinout default!"):(showInfoSuccess("Device changed!"),getPinSettings(),showRestartRequired()))},xhr.send()}function onRestartClick(optionalMessage){var warningmessage="Device restarting...";optionalMessage&&(warningmessage+=optionalMessage),showLoading(warningmessage),restartClicked=!0;var xhr=new XMLHttpRequest;xhr.open("POST","/restart",!0),xhr.responseType="json",xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200==xhr.status){xhr.response;var message="";if(logdebug("Restart succeed!"),wifiSettings.bluetoothEnabled&&systemInfo.moduleType==ModuleType.WROOM32)return void showLoading(message+="The web server will be disabled because bluetooth has been enabled.<br>You will need to disable bluetooth via serial usb commands<br>to get back to this page after rebooting.<br><br>");if(resettingAllToDefault?restartingAndChangingAddress=!0:checkRestartRedirect(),restartingAndChangingAddress){var isIPStatic=wifiSettings.staticIP,localIP=wifiSettings.localIP,webServerPort=wifiSettings.webServerPort,url="http://"+wifiSettings.hostname+".local";url+=80===webServerPort?"":":"+webServerPort,resettingAllToDefault&&(url="http://"+systemInfo.defaultIP+"/",isIPStatic=!1);var staticIPUrl="http://"+localIP;staticIPUrl+=80===webServerPort?"":":"+webServerPort,message+="Device restarting, the page will redirect to<br><a href='"+url+"'>"+url+"</a> in 10 seconds<br>",resettingAllToDefault||(message+=isIPStatic?"If this doesnt work, you can try using this url<br><a href='"+staticIPUrl+"'>"+staticIPUrl+"</a> when the device reboots.":"If this doesnt work, you will need<br>to find the dymanic ip address of the esp32."),showLoading(message),setTimeout((()=>{logdebug("Redirecting to: "+url),window.location.href=url}),1e4)}hideRestartRequired()}else logdebug("Restart api call fail!")},xhr.send()}function isWebSocketConnected(){return!!websocket&&websocket.readyState===WebSocket.OPEN}function isSR6(){return userSettings.deviceType==DeviceType.SR6}function isOSR(){return userSettings.deviceType==DeviceType.OSR}function isSSR1(){return userSettings.deviceType==DeviceType.SSR1}function startServerPoll(){serverPollRetryCount>10?showLoading("Waiting for restart timed out<br>Please manually refresh the page when the device is back online."):(serverPollingTimeOut&&clearTimeout(serverPollingTimeOut),serverPollRetryCount++,serverPollingTimeOut=setTimeout((function(){getSystemInfo(!0)}),2e3))}function checkForServer(){}function setSystemInfo(){systemInfo||showError("Error getting system info!"),document.getElementById("version").value=systemInfo.esp32Version,document.getElementById("macAddressSystemInfo").value=systemInfo.mac,document.getElementById("ipAddressSystemInfo").value=systemInfo.localIP,document.getElementById("gatewaySystemInfo").value=systemInfo.gateway,document.getElementById("subnetSystemInfo").value=systemInfo.subnet,document.getElementById("dnsSystemInfo").value=systemInfo.dns1,document.getElementById("chipModel").value=systemInfo.chipModel,document.getElementById("chipRevision").value=systemInfo.chipRevision,document.getElementById("chipCores").value=systemInfo.chipCores,document.getElementById("chipID").value=systemInfo.chipID,tcodeVersions=systemInfo.tcodeVersions;const logLevelElement=document.getElementById("logLevel");removeAllChildren(logLevelElement);for(let i=0;i<systemInfo.logLevels.length;i++){const option=document.createElement("option");option.innerText=systemInfo.logLevels[i].name,option.value=systemInfo.logLevels[i].value,logLevelElement.appendChild(option)}var excludedTagsElement=document.getElementById("log-exclude-tags");removeAllChildren(excludedTagsElement),systemInfo.availableTags.forEach((element=>{var option=document.createElement("option");option.value=element,option.innerText=element,excludedTagsElement.appendChild(option)}));var includedTagsElement=document.getElementById("log-include-tags");removeAllChildren(includedTagsElement),systemInfo.availableTags.forEach((element=>{var option=document.createElement("option");option.value=element,option.innerText=element,includedTagsElement.appendChild(option)}));var i2cAddressesElement=document.getElementById("Display_I2C_Address");removeAllChildren(i2cAddressesElement),systemInfo.systemI2CAddresses.forEach((element=>{var option=document.createElement("option");option.value=element,option.innerText=element,i2cAddressesElement.appendChild(option)}));var bleDeviceTypeElement=document.getElementById("bleDeviceType");removeAllChildren(bleDeviceTypeElement),systemInfo.bleDeviceTypes.forEach((element=>{var option=document.createElement("option");option.value=element.value,option.innerText=element.name,bleDeviceTypeElement.appendChild(option),BLEDeviceType[element.name]=element.value}));var bleLoveDeviceTypeElement=document.getElementById("bleLoveDeviceType");if(removeAllChildren(bleLoveDeviceTypeElement),systemInfo.bleLoveDeviceTypes.forEach((element=>{var option=document.createElement("option");option.value=element.value,option.innerText=element.name,bleLoveDeviceTypeElement.appendChild(option),BLELoveDeviceType[element.name]=element.value})),systemInfo.motorType===MotorType.BLDC?setupEncoderTypes():setupBoardTypes(),setupDeviceTypes(),toggleBuildOptions(),toggleMotorTypeOptions(),setupTimerChannels(),toggleBLESettings(),toggleBluetoothSettings(),systemInfo.moduleType==ModuleType.S3){validPWMpins=[];for(let i=1;i<44;i++)validPWMpins.push(i);inputOnlypins=[46],adc1Pins=[1,2,3,4,5,6,7,8,9,10],adc2Pins=[11,12,13,14,15,16,17,18,19,20]}document.getElementById("lastRebootReason").value=systemInfo.lastRebootReason}function setWifiSettings(){document.getElementById("ssid").value=wifiSettings.ssid,document.getElementById("wifiPass").value=wifiSettings.wifiPass,document.getElementById("bluetoothEnabled").checked=wifiSettings.bluetoothEnabled,document.getElementById("bleEnabled").checked=wifiSettings.bleEnabled,document.getElementById("bleDeviceType").value=wifiSettings.bleDeviceType,toggleBLEDeviceTypes(),document.getElementById("bleLoveDeviceType").value=wifiSettings.bleLoveDeviceType,toggleBLELoveDeviceTypes(),document.getElementById("staticIP").checked=wifiSettings.staticIP,document.getElementById("localIPInput").value=wifiSettings.localIP,document.getElementById("gatewayInput").value=wifiSettings.gateway,document.getElementById("subnetInput").value=wifiSettings.subnet,document.getElementById("dns1Input").value=wifiSettings.dns1,document.getElementById("dns2Input").value=wifiSettings.dns2,toggleStaticIPSettings(wifiSettings.staticIP),document.getElementById("udpServerPort").value=wifiSettings.udpServerPort,document.getElementById("webServerPort").value=wifiSettings.webServerPort,document.getElementById("hostname").value=wifiSettings.hostname,document.getElementById("friendlyName").value=wifiSettings.friendlyName}function setPinoutSettings(){document.getElementById("TwistFeedBack_PIN").value=pinoutSettings.TwistFeedBack_PIN,document.getElementById("RightServo_PIN").value=pinoutSettings.RightServo_PIN,document.getElementById("LeftServo_PIN").value=pinoutSettings.LeftServo_PIN,document.getElementById("RightUpperServo_PIN").value=pinoutSettings.RightUpperServo_PIN,document.getElementById("LeftUpperServo_PIN").value=pinoutSettings.LeftUpperServo_PIN,document.getElementById("PitchLeftServo_PIN").value=pinoutSettings.PitchLeftServo_PIN,document.getElementById("PitchRightServo_PIN").value=pinoutSettings.PitchRightServo_PIN,document.getElementById("ValveServo_PIN").value=pinoutSettings.ValveServo_PIN,document.getElementById("TwistServo_PIN").value=pinoutSettings.TwistServo_PIN,document.getElementById("Vibe0_PIN").value=pinoutSettings.Vibe0_PIN,document.getElementById("Vibe1_PIN").value=pinoutSettings.Vibe1_PIN,document.getElementById("Vibe2_PIN").value=pinoutSettings.Vibe2_PIN,document.getElementById("Vibe3_PIN").value=pinoutSettings.Vibe3_PIN,document.getElementById("LubeButton_PIN").value=pinoutSettings.LubeButton_PIN,document.getElementById("Squeeze_PIN").value=pinoutSettings.Squeeze_PIN,document.getElementById("Temp_PIN").value=pinoutSettings.Temp_PIN,document.getElementById("Heater_PIN").value=pinoutSettings.Heater_PIN,document.getElementById("Case_Fan_PIN").value=pinoutSettings.Case_Fan_PIN,document.getElementById("Internal_Temp_PIN").value=pinoutSettings.Internal_Temp_PIN,document.getElementById("i2cSda_PIN").value=pinoutSettings.i2cSda_PIN,document.getElementById("i2cScl_PIN").value=pinoutSettings.i2cScl_PIN,setPinChannel("Vibe0_CHANNEL",pinoutSettings.Vibe0_CHANNEL),setPinChannel("Vibe1_CHANNEL",pinoutSettings.Vibe1_CHANNEL),setPinChannel("Vibe2_CHANNEL",pinoutSettings.Vibe2_CHANNEL),setPinChannel("Vibe3_CHANNEL",pinoutSettings.Vibe3_CHANNEL),setPinChannel("ValveServo_CHANNEL",pinoutSettings.ValveServo_CHANNEL),setPinChannel("TwistServo_CHANNEL",pinoutSettings.TwistServo_CHANNEL),setPinChannel("Squeeze_CHANNEL",pinoutSettings.Squeeze_CHANNEL),setPinChannel("Heater_CHANNEL",pinoutSettings.Heater_CHANNEL),setPinChannel("Case_Fan_CHANNEL",pinoutSettings.Case_Fan_CHANNEL),setPinChannel("RightServo_CHANNEL",pinoutSettings.RightServo_CHANNEL),setPinChannel("LeftServo_CHANNEL",pinoutSettings.LeftServo_CHANNEL),setPinChannel("PitchLeftServo_CHANNEL",pinoutSettings.PitchLeftServo_CHANNEL),setPinChannel("RightUpperServo_CHANNEL",pinoutSettings.RightUpperServo_CHANNEL),setPinChannel("LeftUpperServo_CHANNEL",pinoutSettings.LeftUpperServo_CHANNEL),setPinChannel("PitchRightServo_CHANNEL",pinoutSettings.PitchRightServo_CHANNEL)}function setUserSettings(){document.getElementById("TCodeVersion").value=userSettings.TCodeVersion,setLogLevelUI(),toggleNonTCodev3Options(),toggleDeviceOptions(userSettings.deviceType),toggleFeedbackTwistSettings(userSettings.feedbackTwist),toggleBatterySettings(userSettings.batteryLevelEnabled),MotionGenerator.setEnabledStatus(),document.getElementById("boardType").value=userSettings.boardType,userSettings.boardType!==BoardType.CRIMZZON&&userSettings.boardType!==BoardType.ISAAC||(document.getElementById("deviceType").disabled=!0),document.getElementById("msPerRad").value=userSettings.msPerRad,document.getElementById("feedbackTwist").checked=userSettings.feedbackTwist,document.getElementById("continuousTwist").checked=userSettings.continuousTwist,document.getElementById("analogTwist").checked=userSettings.analogTwist,ESPTimer.setup(),systemInfo.motorType===MotorType.BLDC&&BLDCMotor.setup(),Buttons.setup(),document.getElementById("RightServo_ZERO").value=userSettings.RightServo_ZERO,document.getElementById("LeftServo_ZERO").value=userSettings.LeftServo_ZERO,document.getElementById("RightUpperServo_ZERO").value=userSettings.RightUpperServo_ZERO,document.getElementById("LeftUpperServo_ZERO").value=userSettings.LeftUpperServo_ZERO,document.getElementById("PitchLeftServo_ZERO").value=userSettings.PitchLeftServo_ZERO,document.getElementById("PitchRightServo_ZERO").value=userSettings.PitchRightServo_ZERO,document.getElementById("ValveServo_ZERO").value=userSettings.ValveServo_ZERO,document.getElementById("TwistServo_ZERO").value=userSettings.TwistServo_ZERO,document.getElementById("Squeeze_ZERO").value=userSettings.Squeeze_ZERO,document.getElementById("lubeEnabled").checked=userSettings.lubeEnabled,document.getElementById("lubeAmount").value=userSettings.lubeAmount,document.getElementById("deviceType").value=userSettings.deviceType,document.getElementById("autoValve").checked=userSettings.autoValve,document.getElementById("inverseValve").checked=userSettings.inverseValve,document.getElementById("valveServo90Degrees").checked=userSettings.valveServo90Degrees,document.getElementById("inverseStroke").checked=userSettings.inverseStroke,document.getElementById("inversePitch").checked=userSettings.inversePitch,document.getElementById("displayEnabled").checked=userSettings.displayEnabled,document.getElementById("sleeveTempDisplayed").checked=userSettings.sleeveTempDisplayed,document.getElementById("internalTempDisplayed").checked=userSettings.internalTempDisplayed,document.getElementById("versionDisplayed").checked=userSettings.versionDisplayed,document.getElementById("tempSleeveEnabled").checked=userSettings.tempSleeveEnabled,document.getElementById("tempInternalEnabled").checked=userSettings.tempInternalEnabled,document.getElementById("Display_Screen_Width").value=userSettings.Display_Screen_Width,document.getElementById("Display_Screen_Height").value=userSettings.Display_Screen_Height,32==userSettings.Display_Screen_Height&&(document.getElementById("displayIs32Px").checked=!0),document.getElementById("TargetTemp").value=userSettings.TargetTemp,document.getElementById("HeatPWM").value=userSettings.HeatPWM,document.getElementById("HoldPWM").value=userSettings.HoldPWM,document.getElementById("Display_I2C_Address").value=userSettings.Display_I2C_Address,document.getElementById("Display_I2C_Address_text").value=userSettings.Display_I2C_Address,document.getElementById("heaterThreshold").value=userSettings.heaterThreshold,document.getElementById("heaterResolution").value=userSettings.heaterResolution,document.getElementById("Display_Screen_Width").readOnly=!0,document.getElementById("Display_Screen_Height").readOnly=!0,document.getElementById("fanControlEnabled").checked=userSettings.fanControlEnabled,document.getElementById("internalTempForFan").value=userSettings.internalTempForFan,document.getElementById("internalMaxTemp").value=userSettings.internalMaxTemp,document.getElementById("caseFanResolution").value=userSettings.caseFanResolution,document.getElementById("vibTimeout").value=userSettings.vibTimeout,document.getElementById("vibTimeoutEnabled").checked=userSettings.vibTimeoutEnabled,batterySetup(),document.getElementById("logLevel").value=userSettings.logLevel;for(var includedElement=document.getElementById("log-include-tags"),i=0;i<includedElement.options.length;i++)includedElement.options[i].selected=userSettings["log-include-tags"].indexOf(includedElement.options[i].value)>=0;var excludedElement=document.getElementById("log-exclude-tags");for(i=0;i<excludedElement.options.length;i++)excludedElement.options[i].selected=userSettings["log-exclude-tags"].indexOf(excludedElement.options[i].value)>=0;document.getElementById("voiceEnabled").checked=userSettings.voiceEnabled,document.getElementById("voiceMuted").checked=userSettings.voiceMuted,document.getElementById("voiceVolume").value=userSettings.voiceVolume,document.getElementById("voiceWakeTime").value=userSettings.voiceWakeTime,setupChannelSliders(),documentLoaded=!0}function removeAllChildren(element){if(element)for(;element.firstChild;)element.removeChild(element.lastChild)}function removeByName(name){if(!name)return;let nodes=document.getElementsByName(name);if(nodes.length)for(;nodes[0];)nodes[0].parentNode.removeChild(nodes[0]);else console.warn("WARNING: No elemnts found when removing children by name")}function removeByClass(name){if(!name)return;let nodes=document.getElementsByClassName(name);if(nodes.length)for(;nodes[0];)nodes[0].parentNode.removeChild(nodes[0]);else console.warn("WARNING: No elemnts found when removing children by class")}function hasFeature(buildFeature){return systemInfo.buildFeatures.includes(buildFeature)}function toggleBuildOptions(){var hasTemp=hasFeature(BuildFeature.TEMP);Utils.toggleControlVisibilityByClassName("build_temprature",hasTemp),Utils.toggleControlVisibilityByID("internalTempDisplayedRow",hasTemp&&userSettings.tempInternalEnabled),Utils.toggleControlVisibilityByID("sleeveTempDisplayedRow",hasTemp&&userSettings.tempSleeveEnabled),Utils.toggleControlVisibilityByClassName("build_display",hasFeature(BuildFeature.DISPLAY_));var tcodeVersionElement=document.getElementById("TCodeVersion");tcodeVersions.forEach((x=>{const optionElement=document.createElement("option");optionElement.value=x.value,optionElement.innerText=x.name,tcodeVersionElement.appendChild(optionElement)}))}function toggleMotorTypeOptions(){systemInfo.motorType===MotorType.Servo?Utils.toggleControlVisibilityByClassName("servoOnly",!0):Utils.toggleControlVisibilityByClassName("BLDCOnly",!0)}function updateUserSettings(debounceInMs,uri,objectToSave,callback){documentLoaded&&(null!=debounceInMs&&null!=debounceInMs||(debounceInMs=3e3),uri||(uri="/settings"),objectToSave||(objectToSave=userSettings),null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{checkRestartRedirect(),showInfo("Saving...");var xhr=new XMLHttpRequest,response={};xhr.open("POST",uri,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(xhr.responseText.length?xhr.responseText.startsWith("{")?response=JSON.parse(xhr.responseText):response.msg=xhr.responseText:response.msg=xhr.status+": "+xhr.statusText,"done"!==response.msg?(hideInfo(),showError("Error saving: "+response.msg),getUserSettings()):(restartRequired&&showRestartRequired(),callback?callback():showInfoSuccess("Settings saved!")))},xhr.setRequestHeader("Content-Type","application/json");var body=JSON.stringify(objectToSave);xhr.send(body),upDateTimeout=null}),debounceInMs))}function checkRestartRedirect(){const passwordChanged="YOUR SSID HERE"!==wifiSettings.ssid&&"YOUR PASSWORD HERE"!=wifiSettings.wifiPass&&wifiSettings.wifiPass!=systemInfo.decoyPass;if(systemInfo.apMode&&passwordChanged)restartingAndChangingAddress=!0;else{const isPort80=0==window.location.port.length,isUserPort80=80==wifiSettings.webServerPort,portChanged=isPort80&&!isUserPort80||!isPort80&&isUserPort80||!isPort80&&window.location.port!=wifiSettings.webServerPort,connectedAndPortChanged=!systemInfo.apMode&&portChanged,connectedAndHostnameChanged=!isValidIP(window.location.hostname)&&!systemInfo.apMode&&window.location.hostname!=wifiSettings.hostname;(connectedAndPortChanged||connectedAndHostnameChanged)&&(restartingAndChangingAddress=!0)}}function isValidIP(ip){return ip&&ip.match(/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/)}function isValidHostName(hostname){return hostname&&hostname.match(/^(?![0-9]+$)(?!.*-$)(?!-)[a-zA-Z0-9-_]{1,63}$/g)}function showRestartRequired(){document.getElementById("resetBtn").classList.add("restart-required"),document.getElementById("menu-button").classList.add("restart-required")}function hideRestartRequired(){document.getElementById("resetBtn").classList.remove("restart-required"),document.getElementById("menu-button").classList.remove("restart-required")}function showLoading(message){var loadingModal=document.getElementById("loadingModal");document.getElementById("loadingStatus").innerHTML=message,loadingModal.style.visibility="visible",loadingVisible=!0}function hideLoading(){document.getElementById("loadingModal").style.visibility="hidden",loadingVisible=!1}function toggleMenu(){var menu=document.getElementById("menu"),menuButton=document.getElementById("menu-button"),menuContent=document.getElementById("menu-content");menuContent.classList.toggle("menu-hidden"),menuContent.classList.toggle("menu-shown"),menuButton.classList.toggle("button-pressed"),menu.classList.toggle("menu-hidden"),menu.classList.toggle("menu-shown")}function clearErrors(name){var errorText=document.getElementById("errorText");if(name){for(var errors=document.getElementsByName(name),i=0;i<errors.length;i++)errorText.removeChild(errors[i].parentNode);(errors=document.getElementsByName("errorItem")).length||(document.getElementById("errorMessage").hidden=!0)}}function closeError(){removeAllChildren(document.getElementById("errorText")),document.getElementById("errorMessage").hidden=!0}function showError(message){var div=document.createElement("div");div.setAttribute("name","errorItem"),div.innerHTML=message,document.getElementById("errorText").appendChild(div),document.getElementById("errorMessage").hidden=!1}function showInfo(message){const infoNode=document.getElementById("info");infoNode.innerText=message,infoNode.style.color="white";const modals=document.getElementsByTagName("modal-component");for(let i=0;i<modals.length;i++)if(modals[i].visible()){const node=modals[i].shadowRoot.querySelector(".info");node.innerText=message,node.style.color="white"}}function showInfoSuccess(message){const infoNode=document.getElementById("info");infoNode.innerText=message,infoNode.style.color="green";const modals=document.getElementsByTagName("modal-component");for(let i=0;i<modals.length;i++)if(modals[i].visible()){const node=modals[i].shadowRoot.querySelector(".info");node.innerText=message,node.style.color="green"}setTimeout((()=>{hideInfo()}),5e3)}function hideInfo(){const infoNode=document.getElementById("info");infoNode.innerText="",infoNode.style.color="";const modals=document.getElementsByTagName("modal-component");for(let i=0;i<modals.length;i++)if(modals[i].visible()){const node=modals[i].shadowRoot.querySelector(".info");node.innerText="",node.style.color=""}}function sendWebsocketCommand(command,message){isWebSocketConnected()?websocket.send('{"command":"'+command+'", "message": "'+message+'"}'):startServerPoll()}function sendTCode(tcode){isWebSocketConnected()?websocket.send(tcode+String.fromCharCode(10)):startServerPoll()}function sendDeviceHome(){channelSliderList.forEach((x=>x.value=x.channelModel.switch?0:50));var availibleChannels=getChannelMap(),tcode="";availibleChannels.forEach(((element,index,array)=>{tcode+=getSliderTCode(element.channel,element.switch?0:50,!1,1e3,!1),index!==array.length-1&&(tcode+=" ")})),sendTCode(tcode)}function getSliderTCode(channel,sliderValue,useIModifier,modifierValue,disableModifier){var tcode=channel+percentageToTcode(sliderValue).toString().padStart(isTCodeV3()?4:3,"0");return disableModifier||(tcode+=useIModifier?"I":"S",tcode+=modifierValue),tcode}function setupChannelSliders(){var channelTestsNode=document.getElementById("channelTestsTable");deleteAllChildren(channelTestsNode);var bodyNode=document.createElement("div");channelTestsNode.appendChild(bodyNode);var headerRowNode=document.createElement("div"),headerCellNode=document.createElement("div");headerCellNode.classList.add("tHeader"),headerCellNode.colSpan="2",headerCellNode.style.textAlign="center";var headerH3Node=document.createElement("h3");headerH3Node.innerText="Test",headerCellNode.appendChild(headerH3Node),headerRowNode.appendChild(headerCellNode),bodyNode.appendChild(headerRowNode);var feedbackRowNode=document.createElement("div");feedbackRowNode.classList.add("tRow");var feedbackCellNode=document.createElement("div");feedbackCellNode.classList.add("tCell"),feedbackCellNode.innerText="TCode input: awaiting user...",feedbackCellNode.colSpan="2",feedbackCellNode.style.justifyContent="flex-start",feedbackRowNode.appendChild(feedbackCellNode),bodyNode.appendChild(feedbackRowNode),channelSliderList=[];for(var availibleChannels=getChannelMap(),i=0;i<availibleChannels.length;i++)if(isSR6()||!availibleChannels[i].sr6Only){var channel=availibleChannels[i].channel,channelName=availibleChannels[i].channelName,rowNode=document.createElement("div");rowNode.classList.add("tRow");var titleCellNode=document.createElement("div");titleCellNode.classList.add("tCell"),titleCellNode.innerText=channelName+" ("+channel+")";var inputCellNode=document.createElement("div");inputCellNode.classList.add("tCell"),rowNode.appendChild(titleCellNode),rowNode.appendChild(inputCellNode);var sliderNode=document.createElement("input");sliderNode.style.width="100%",sliderNode.type="range",sliderNode.id=channel+"TestSlider",sliderNode.min=0,sliderNode.max=99,sliderNode.channelModel=availibleChannels[i],sliderNode.value=availibleChannels[i].switch?0:50,sliderNode.addEventListener("input",function(sliderNode,channel,channelName,feedbackCellNode){var tcode=getSliderTCode(channel,sliderNode.value,testDeviceUseIModifier,testDeviceModifierValue,testDeviceDisableModifier);sendTCode(tcode),feedbackCellNode.innerText="TCode input: "+tcode+" ("+channelName+")"}.bind(null,sliderNode,channel,channelName,feedbackCellNode)),channelSliderList.push(sliderNode),inputCellNode.appendChild(sliderNode),bodyNode.appendChild(rowNode)}var testDeviceModifierValueNode=document.createElement("input");testDeviceModifierValueNode.value=testDeviceModifierValue,testDeviceModifierValueNode.type="number",testDeviceModifierValueNode.min="1",testDeviceModifierValueNode.step="1",testDeviceModifierValueNode.addEventListener("input",(event=>{testDeviceModifierValue=event.target.value}));var testDeviceModifierValueRowNode=document.createElement("div");testDeviceModifierValueRowNode.classList.add("tRow");var testDeviceModifierValueCellNode=document.createElement("div");testDeviceModifierValueCellNode.classList.add("tCell"),testDeviceModifierValueCellNode.innerText="Magnitude (I/S) value";var testDeviceModifierValueInputCellNode=document.createElement("div");testDeviceModifierValueInputCellNode.classList.add("tCell"),testDeviceModifierValueInputCellNode.appendChild(testDeviceModifierValueNode),testDeviceModifierValueRowNode.appendChild(testDeviceModifierValueCellNode),testDeviceModifierValueRowNode.appendChild(testDeviceModifierValueInputCellNode),bodyNode.appendChild(testDeviceModifierValueRowNode);var testDeviceUseIModifierNode=document.createElement("input");testDeviceUseIModifierNode.type="checkbox",testDeviceUseIModifierNode.checked=testDeviceUseIModifier,testDeviceUseIModifierNode.addEventListener("click",(event=>{testDeviceUseIModifier=event.target.checked}));var testDeviceUseIModifierRowNode=document.createElement("div");testDeviceUseIModifierRowNode.classList.add("tRow");var testDeviceUseIModifierCellNode=document.createElement("div");testDeviceUseIModifierCellNode.classList.add("tCell"),testDeviceUseIModifierCellNode.innerText="Use Magnitude + Time Interval (I)";var testDeviceUseIModifierInputCellNode=document.createElement("div");testDeviceUseIModifierInputCellNode.classList.add("tCell"),testDeviceUseIModifierInputCellNode.appendChild(testDeviceUseIModifierNode),testDeviceUseIModifierRowNode.appendChild(testDeviceUseIModifierCellNode),testDeviceUseIModifierRowNode.appendChild(testDeviceUseIModifierInputCellNode),bodyNode.appendChild(testDeviceUseIModifierRowNode);var testDeviceDisableModifierNode=document.createElement("input");testDeviceDisableModifierNode.type="checkbox",testDeviceDisableModifierNode.checked=testDeviceDisableModifier,testDeviceDisableModifierNode.addEventListener("click",(event=>{testDeviceDisableModifier=event.target.checked}));var testDeviceDisableModifierRowNode=document.createElement("div");testDeviceDisableModifierRowNode.classList.add("tRow");var testDeviceDisableModifierCellNode=document.createElement("div");testDeviceDisableModifierCellNode.classList.add("tCell"),testDeviceDisableModifierCellNode.innerText="Disable magnitude";var testDeviceDisableModifierInputCellNode=document.createElement("td");testDeviceDisableModifierInputCellNode.classList.add("tCell"),testDeviceDisableModifierInputCellNode.appendChild(testDeviceDisableModifierNode),testDeviceDisableModifierRowNode.appendChild(testDeviceDisableModifierCellNode),testDeviceDisableModifierRowNode.appendChild(testDeviceDisableModifierInputCellNode),bodyNode.appendChild(testDeviceDisableModifierRowNode);var testDeviceHomeNode=document.createElement("button");testDeviceHomeNode.addEventListener("click",(event=>{sendDeviceHome()})),testDeviceHomeNode.innerText="All home";var testDeviceHomeRowNode=document.createElement("div");testDeviceHomeRowNode.classList.add("tRow");var testDeviceHomeCellNode=document.createElement("div");testDeviceHomeCellNode.classList.add("tCell"),testDeviceHomeCellNode.style.justifyContent="flex-end",testDeviceHomeCellNode.colSpan=2,testDeviceHomeCellNode.appendChild(testDeviceHomeNode),testDeviceHomeRowNode.appendChild(testDeviceHomeCellNode),bodyNode.appendChild(testDeviceHomeRowNode),DeviceRangeSlider.setup(),MotionGenerator.setup()}function deleteAllChildren(parentNode){for(;parentNode.firstChild;)parentNode.removeChild(parentNode.firstChild)}function isTCodeV3(){return userSettings.TCodeVersion>=TCodeVersion.V3}function hasTCodeV2(){return hasFeature(BuildFeature.HAS_TCODE_V2)}function getTCodeMax(){return 9999}function getChannelMap(){return systemInfo.motorType==MotorType.Servo?AvailibleChannelsV3:AvailibleChannelsBLDC}function onChannelSliderInput(channel,value){sendTCode(channel+value.toString().padStart(4,"0")+"S1000")}function tcodeToPercentage(tcodeValue){return convertRange(0,getTCodeMax(),0,99,tcodeValue)}function percentageToTcode(value){return convertRange(0,99,0,getTCodeMax(),value)}function convertRange(input_start,input_end,output_start,output_end,value){var slope=(output_end-output_start)/(input_end-input_start);return Math.round(output_start+slope*(value-input_start))}function onSpeedInput(){var speedInMillisecs=parseInt(document.getElementById("speedInput").value);userSettings.speed=speedInMillisecs>999?speedInMillisecs:0,updateSpeedUI(speedInMillisecs),updateUserSettings()}function updateUdpPort(){wifiSettings.udpServerPort=parseInt(document.getElementById("udpServerPort").value),setRestartRequired(),postWifiSettings()}function updateWebPort(){wifiSettings.webServerPort=parseInt(document.getElementById("webServerPort").value),setRestartRequired(),postWifiSettings()}function updateMSPerRad(userChecked){var control=document.getElementById("msPerRad");return control.checkValidity()?(userSettings.msPerRad=parseInt(control.value),userChecked||(document.getElementById("msPerRadIs270").checked=425==userSettings.msPerRad),setRestartRequired(),updateUserSettings(),!0):(showError(control.validationMessage),!1)}function toggleMsPerRadIs270(){var control=document.getElementById("msPerRad"),msPerRadIs270Checkbox=document.getElementById("msPerRadIs270");const backupvalue=control.value;msPerRadIs270Checkbox.checked?control.value=425:control.value=637,updateMSPerRad(!0)||(msPerRadIs270Checkbox.checked=!msPerRadIs270Checkbox.checked,control.value=backupvalue)}function updateContinuousTwist(){var checked=document.getElementById("continuousTwist").checked;checked?confirm("WARNING! If you enable continuous twist\nMAKE SURE THERE ARE NO WIRES CONNECTED TO YOUR FLESHLIGHT CASE!\nThis can twist the wires and possible injury can occur.\n CONFIRM THERE ARE NO WIRES CONNECTED?")?(userSettings.continuousTwist=checked,updateUserSettings()):document.getElementById("continuousTwist").checked=!1:(userSettings.continuousTwist=!1,updateUserSettings())}function updateAnalogTwist(){var checked=document.getElementById("analogTwist").checked;userSettings.analogTwist=checked,checked?(document.getElementById("TwistFeedBack_PIN").value=32,pinoutSettings.TwistFeedBack_PIN=32,alert("Note, twist feedback pin has been changed to analog input pin 32.\nPlease adjust your hardware accordingly.")):(document.getElementById("TwistFeedBack_PIN").value=26,pinoutSettings.TwistFeedBack_PIN=26,alert("Note, twist feedback pin reset to 26.\nPlease adjust your hardware accordingly.")),setRestartRequired(),postAndValidatePinoutSettings(3e3,postCommonSettings)}function updateFeedbackTwist(){var checked=document.getElementById("feedbackTwist").checked;userSettings.feedbackTwist=checked,toggleFeedbackTwistSettings(checked),setRestartRequired(),updateUserSettings()}function toggleFeedbackTwistSettings(feedbackChecked){for(var feedbackTwistOnly=document.getElementsByClassName("feedbackTwistOnly"),i=0;i<feedbackTwistOnly.length;i++)feedbackTwistOnly[i].style.display=feedbackChecked?"flex":"none";feedbackChecked&&!isTCodeV3()&&(document.getElementById("analogTwistRow").style.display="none")}function updateHostName(){null!==hostnameTimeout&&clearTimeout(hostnameTimeout),hostnameTimeout=setTimeout((()=>{clearErrors("hostnameValidation");let value=document.getElementById("hostname").value;if(isValidHostName(value))wifiSettings.hostname=value,setRestartRequired(),postWifiSettings(0);else{"</div>",showError("<div name='hostnameValidation'>Invalid hostname</div></div>")}}),3e3)}function updateFriendlyName(){wifiSettings.friendlyName=document.getElementById("friendlyName").value,setRestartRequired(),postWifiSettings()}function setupBoardTypes(){const boardTypeElement=document.getElementById("boardType");removeAllChildren(boardTypeElement);for(let i=0;i<systemInfo.boardTypes.length;i++){const boardTypeOption=document.createElement("option");boardTypeOption.innerText=systemInfo.boardTypes[i].name,boardTypeOption.value=systemInfo.boardTypes[i].value,boardTypeElement.appendChild(boardTypeOption),BoardType[systemInfo.boardTypes[i].name]=systemInfo.boardTypes[i].value}}function setEncoderType(){userSettings.BLDC_Encoder=document.getElementById("BLDC_Encoder").value,Utils.toggleControlVisibilityByClassName("BLDCPWM",userSettings.BLDC_Encoder==BLDCEncoderType.PWM),Utils.toggleControlVisibilityByClassName("BLDCSPI",userSettings.BLDC_Encoder==BLDCEncoderType.SPI),updateUserSettings(0)}function setupEncoderTypes(){const element=document.getElementById("BLDC_Encoder");for(let i=0;i<systemInfo.encoderTypes.length;i++){const option=document.createElement("option");option.innerText=systemInfo.encoderTypes[i].name,option.value=systemInfo.encoderTypes[i].value,element.appendChild(option),BLDCEncoderType[systemInfo.encoderTypes[i].name]=systemInfo.encoderTypes[i].value}}function setBoardType(){var element=document.getElementById("boardType"),newBoardType=element.value;confirm("This will reset the current pinout to default and restart the device. Continue?")?postBoardType(newBoardType):element.value=userSettings.boardType}function setupDeviceTypes(){const element=document.getElementById("deviceType");removeAllChildren(element);for(let i=0;i<systemInfo.deviceTypes.length;i++){const option=document.createElement("option");option.innerText=systemInfo.deviceTypes[i].name,option.value=systemInfo.deviceTypes[i].value,element.appendChild(option),DeviceType[systemInfo.deviceTypes[i].name]=systemInfo.deviceTypes[i].value}}function setDeviceType(){var element=document.getElementById("deviceType");let newValue=element.value;confirm("This will reset the current pinout to default. Continue?")?postDeviceType(newValue):element.value=userSettings.deviceType}function setupTimerChannels(){const elements=document.getElementsByName("timerChannels");for(let index=0;index<elements.length;index++){const element=elements[index];removeAllChildren(element);for(let i=0;i<systemInfo.timerChannels.length;i++){const option=document.createElement("option");option.innerText=systemInfo.timerChannels[i].name,option.value=systemInfo.timerChannels[i].value,element.appendChild(option)}}}function setAutoValve(){userSettings.autoValve=document.getElementById("autoValve").checked,updateUserSettings()}function setInverseValve(){userSettings.inverseValve=document.getElementById("inverseValve").checked,updateUserSettings()}function setValveServo90Degrees(){var checked=document.getElementById("valveServo90Degrees").checked;checked?confirm("WARNING! If you 90 degree servo\nMAKE SURE YOU ARE NOT USING THE T-Valve LID!\nThe servo will stall hitting the wall and burn out!")?(userSettings.valveServo90Degrees=checked,updateUserSettings()):document.getElementById("valveServo90Degrees").checked=!1:(userSettings.valveServo90Degrees=!1,updateUserSettings())}function setInverseStroke(){userSettings.inverseStroke=document.getElementById("inverseStroke").checked,updateUserSettings()}function setInversePitch(){userSettings.inversePitch=document.getElementById("inversePitch").checked,updateUserSettings()}function disablePinValidation(){!userSettings.disablePinValidation&&confirm("This will disable ALL PIN validations.\nBe sure you know what you're doing!")?userSettings.disablePinValidation=!0:(userSettings.disablePinValidation=!1,document.getElementById("disablePinValidation").checked=!1),updateUserSettings()}function setPinChannel(id,value){let element=document.getElementById(id);element.value=value,toggleEnableTimerChannels(element)}function onSelectPinChannel(element){pinoutSettings[element.id]=element.value,toggleEnableTimerChannels(element),setRestartRequired(),postPinoutSettings()}function toggleEnableTimerChannels(element){const timerSelects=document.getElementsByName("timerChannels");for(let index=0;index<timerSelects.length;index++){const otherElement=timerSelects[index];element.id!==otherElement.id&&(otherElement.options[element.selectedIndex].disabled=element.value>-1)}}function updatePins(){systemInfo.motorType!=MotorType.BLDC?(null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{var pinValues=validatePins();pinValues&&(pinoutSettings.RightServo_PIN=pinValues.rightPin,pinoutSettings.LeftServo_PIN=pinValues.leftPin,pinoutSettings.RightUpperServo_PIN=pinValues.rightUpper,pinoutSettings.LeftUpperServo_PIN=pinValues.leftUpper,pinoutSettings.PitchLeftServo_PIN=pinValues.pitchLeft,pinoutSettings.PitchRightServo_PIN=pinValues.pitchRight,updateCommonPins(pinValues),setRestartRequired(),postPinoutSettings(0))}),3e3)):updateBLDCPins()}function updateCommonPins(pinValues){pinoutSettings.TwistServo_PIN=pinValues.twistServo,pinoutSettings.ValveServo_PIN=pinValues.valveServo,pinoutSettings.Squeeze_PIN=pinValues.squeezeServo,pinoutSettings.Vibe0_PIN=pinValues.vibe0,pinoutSettings.Vibe1_PIN=pinValues.vibe1,pinoutSettings.Vibe2_PIN=pinValues.vibe2,pinoutSettings.Vibe3_PIN=pinValues.vibe3,pinoutSettings.LubeButton_PIN=pinValues.lubeButton,pinoutSettings.Heater_PIN=pinValues.heat,pinoutSettings.Case_Fan_PIN=pinValues.caseFanPin,pinoutSettings.Temp_PIN=pinValues.temp,pinoutSettings.TwistFeedBack_PIN=pinValues.twistFeedBack,pinoutSettings.Internal_Temp_PIN=pinValues.internalTemp,pinoutSettings.i2cSda_PIN=pinValues.i2cSda,pinoutSettings.i2cScl_PIN=pinValues.i2cScl}function setIntMax(id,max){(max=document.getElementById(id)).setAttribute("max",parseInt(max))}function setIntMinAndMax(minID,maxID){setElementsIntMinAndMax(document.getElementById(minID),document.getElementById(maxID))}function setElementsIntMinAndMax(minElement,maxElement){minElement.setAttribute("max",parseInt(maxElement.value)-1),maxElement.setAttribute("min",parseInt(minElement.value)+1)}function validateIntControl(controlIDOrElement,settingsObject,settingVariableName,additionalValidations){var control=controlIDOrElement;if("string"==typeof controlIDOrElement&&(control=document.getElementById(controlIDOrElement)),clearErrors(control.id),additionalValidations&&additionalValidations(control.value)||control.checkValidity())return settingsObject[settingVariableName]=parseInt(control.value),!0;var message=control.validationMessage;return message||(message=control.errorText),showError(`<div name="${control.id}"> ${control.id} is invalid: ${message??""}</div>`),!1}function validateFloatControl(controlIDOrElement,settingsObject,settingVariableName,additionalValidations){var control=controlIDOrElement;if("string"==typeof controlIDOrElement&&(control=document.getElementById(controlIDOrElement)),clearErrors(control.id),additionalValidations&&additionalValidations(control.value)||control.checkValidity())return settingsObject[settingVariableName]=parseFloat(control.value),!0;var message=control.validationMessage;return message||(message=control.errorText),showError(`<div name="${control.id}"> ${control.id} is invalid: ${message??""}</div>`),!1}function validateStringControl(controlIDOrElement,settingsObject,settingVariableName,additionalValidations){var control=controlIDOrElement;if("string"==typeof controlIDOrElement&&(control=document.getElementById(controlIDOrElement)),clearErrors(control.id),additionalValidations&&additionalValidations(control.value)||control.checkValidity())return settingsObject[settingVariableName&&settingVariableName.trim().length?settingVariableName:controlID]=control.value,!0;var message=control.validationMessage;return message||(message=control.errorText),showError(`<div name="${control.id}"> ${control.id} is invalid: ${message??""}</div>`),!1}function validatePin(pin,pinName,assignedPins,duplicatePins,isInput,invalidPins){if(pin>-1){let pinDupeIndex=assignedPins.findIndex((x=>x.pin===pin));pinDupeIndex>-1&&duplicatePins.push(pinName+" pin and "+assignedPins[pinDupeIndex].name),!0===isInput&&-1==inputOnlypins.indexOf(pin)&&-1==validPWMpins.indexOf(pin)&&invalidPins.push(pinName+" pin: "+pin),assignedPins.push({name:pinName,pin:pin})}}function validatePWMPin(pin,pinName,assignedPins,duplicatePins,pwmErrors){pin>-1&&(validatePin(pin,pinName,assignedPins,duplicatePins),-1==validPWMpins.indexOf(pin)&&pwmErrors.push(pinName+" pin: "+pin))}function validatePins(){if(systemInfo.motorType==MotorType.BLDC)return validateBLDCPins();clearErrors("pinValidation");var assignedPins=[],duplicatePins=[],pwmErrors=[],pinValues=getServoPinValues();if(userSettings.disablePinValidation)return pinValues;validatePWMPin(pinValues.rightPin,"Right servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.leftPin,"Left servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.pitchLeft,"Pitch left servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.rightUpper,"Right upper servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.leftUpper,"Left upper servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.pitchRight,"Pitch right servo",assignedPins,duplicatePins,pwmErrors),validateCommonPWMPins(assignedPins,duplicatePins,pinValues,pwmErrors);var invalidPins=[];if(validateNonPWMPins(assignedPins,duplicatePins,invalidPins,pinValues),duplicatePins.length||pwmErrors.length||invalidPins.length){var errorString="<div name='pinValidation'>Pins NOT saved due to invalid input.<br>";return duplicatePins.length&&(errorString+="<div style='margin-left: 25px;'>The following pins are duplicated:<br><div style='color: white; margin-left: 25px;'>"+duplicatePins.join("<br>")+"</div></div>"),invalidPins.length&&(duplicatePins.length&&(errorString+="<br>"),errorString+="<div style='margin-left: 25px;'>The following pins are invalid:<br><div style='color: white; margin-left: 25px;'>"+invalidPins.join("<br>")+"</div></div>"),pwmErrors.length&&((duplicatePins.length||invalidPins.length)&&(errorString+="<br>"),errorString+="<div style='margin-left: 25px;'>The following pins are invalid PWM pins:<br><div style='color: white; margin-left: 25px;'>"+pwmErrors.join("<br>")+"</div></div>"),void showError(errorString+="</div>")}return pinValues}function validateCommonPWMPins(assignedPins,duplicatePins,pinValues,pwmErrors){validatePWMPin(pinValues.twistServo,"Twist servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.squeezeServo,"Squeeze servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.valveServo,"Valve servo",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.vibe0,"Vibe 1",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.vibe1,"Vibe 2",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.vibe2,"Vibe 3",assignedPins,duplicatePins,pwmErrors),validatePWMPin(pinValues.vibe3,"Vibe 4",assignedPins,duplicatePins,pwmErrors),userSettings.tempSleeveEnabled&&validatePWMPin(pinValues.heat,"Heater",assignedPins,duplicatePins,pwmErrors),userSettings.tempInternalEnabled&&validatePWMPin(pinValues.caseFanPin,"Case fan ",assignedPins,duplicatePins,pwmErrors)}function validateNonPWMPins(assignedPins,duplicatePins,invalidPins,pinValues){if(userSettings.displayEnabled||userSettings.voiceEnabled||userSettings.batteryLevelEnabled){let enabledValues=[];userSettings.displayEnabled&&enabledValues.push("Display"),userSettings.voiceEnabled&&enabledValues.push("Voice"),userSettings.batteryLevelEnabled&&enabledValues.push("Battery level"),pinValues.i2cScl<0&&invalidPins.push("I2C SCL pin: "+pinValues.i2cScl+" and I2C modules enabled: "+enabledValues.join(",")),pinValues.i2cSda<0&&invalidPins.push("I2C SDA pin: "+pinValues.i2cSda+" and I2C modules enabled: "+enabledValues.join(",")),validatePin(pinValues.i2cSda,"I2C SDA",assignedPins,duplicatePins),validatePin(pinValues.i2cScl,"I2C SCL",assignedPins,duplicatePins)}validatePin(pinValues.lubeButton,"Lube button",assignedPins,duplicatePins,!0,invalidPins),userSettings.tempSleeveEnabled&&validatePin(pinValues.temp,"Temp",assignedPins,duplicatePins,!0,invalidPins),userSettings.tempInternalEnabled&&validatePin(pinValues.internalTemp,"Internal temp",assignedPins,duplicatePins,!0,invalidPins),userSettings.feedbackTwist&&pinValues.twistFeedBack&&validatePin(pinValues.twistFeedBack,"Twist feedback",assignedPins,duplicatePins,!0,invalidPins);for(var i=0;i<pinValues.buttonSets.length;i++){validatePin(pinValues.buttonSets[i],"Button set "+i,assignedPins,duplicatePins,!0,invalidPins)}return!duplicatePins.length&&!invalidPins.length}function getServoPinValues(){var pinValues={};return pinValues.rightPin=parseInt(document.getElementById("RightServo_PIN").value),pinValues.leftPin=parseInt(document.getElementById("LeftServo_PIN").value),pinValues.rightUpper=parseInt(document.getElementById("RightUpperServo_PIN").value),pinValues.leftUpper=parseInt(document.getElementById("LeftUpperServo_PIN").value),pinValues.pitchRight=parseInt(document.getElementById("PitchRightServo_PIN").value),pinValues.pitchLeft=parseInt(document.getElementById("PitchLeftServo_PIN").value),getCommonPinValues(pinValues),pinValues}function getCommonPinValues(pinValues){pinValues.twistServo=parseInt(document.getElementById("TwistServo_PIN").value),pinValues.squeezeServo=parseInt(document.getElementById("Squeeze_PIN").value),pinValues.valveServo=parseInt(document.getElementById("ValveServo_PIN").value),pinValues.vibe0=parseInt(document.getElementById("Vibe0_PIN").value),pinValues.vibe1=parseInt(document.getElementById("Vibe1_PIN").value),pinValues.vibe2=parseInt(document.getElementById("Vibe2_PIN").value),pinValues.vibe3=parseInt(document.getElementById("Vibe3_PIN").value),pinValues.heat=parseInt(document.getElementById("Heater_PIN").value),pinValues.caseFanPin=parseInt(document.getElementById("Case_Fan_PIN").value),pinValues.i2cSda=parseInt(document.getElementById("i2cSda_PIN").value),pinValues.i2cScl=parseInt(document.getElementById("i2cScl_PIN").value),pinValues.lubeButton=parseInt(document.getElementById("LubeButton_PIN").value),pinValues.temp=parseInt(document.getElementById("Temp_PIN").value),pinValues.internalTemp=parseInt(document.getElementById("Internal_Temp_PIN").value),pinValues.twistFeedBack=parseInt(document.getElementById("TwistFeedBack_PIN").value);var buttonSetPins=document.getElementsByName("buttonSetPins");pinValues.buttonSets=[],buttonSetPins.forEach(((node,index)=>{pinValues.buttonSets[index]=parseInt(document.getElementById("buttonSetPin"+index).value)}))}function updateZeros(){null!==upDateTimeout&&clearTimeout(upDateTimeout),upDateTimeout=setTimeout((()=>{clearErrors("zeroValidation");var validValue=!0,invalidValues=[],RightServo_ZERO=parseInt(document.getElementById("RightServo_ZERO").value);(!RightServo_ZERO||RightServo_ZERO>2500||RightServo_ZERO<500)&&(validValue=!1,invalidValues.push("Right servo ZERO"));var LeftServo_ZERO=parseInt(document.getElementById("LeftServo_ZERO").value);(!LeftServo_ZERO||LeftServo_ZERO>2500||LeftServo_ZERO<500)&&(validValue=!1,invalidValues.push("Left servo ZERO"));var RightUpperServo_ZERO=parseInt(document.getElementById("RightUpperServo_ZERO").value);(!RightUpperServo_ZERO||RightUpperServo_ZERO>2500||RightUpperServo_ZERO<500)&&(validValue=!1,invalidValues.push("Right upper servo ZERO"));var LeftUpperServo_ZERO=parseInt(document.getElementById("LeftUpperServo_ZERO").value);(!LeftUpperServo_ZERO||LeftUpperServo_ZERO>2500||LeftUpperServo_ZERO<500)&&(validValue=!1,invalidValues.push("Left upper servo ZERO"));var PitchLeftServo_ZERO=parseInt(document.getElementById("PitchLeftServo_ZERO").value);(!PitchLeftServo_ZERO||PitchLeftServo_ZERO>2500||PitchLeftServo_ZERO<500)&&(validValue=!1,invalidValues.push("Pitch left servo ZERO"));var PitchRightServo_ZERO=parseInt(document.getElementById("PitchRightServo_ZERO").value);(!PitchRightServo_ZERO||PitchRightServo_ZERO>2500||PitchRightServo_ZERO<500)&&(validValue=!1,invalidValues.push("Pitch right servo ZERO"));var ValveServo_ZERO=parseInt(document.getElementById("ValveServo_ZERO").value);(!ValveServo_ZERO||ValveServo_ZERO>2500||ValveServo_ZERO<500)&&(validValue=!1,invalidValues.push("Valve servo ZERO"));var TwistServo_ZERO=parseInt(document.getElementById("TwistServo_ZERO").value);(!TwistServo_ZERO||TwistServo_ZERO>2500||TwistServo_ZERO<500)&&(validValue=!1,invalidValues.push("Twist servo ZERO"));var Squeeze_ZERO=parseInt(document.getElementById("Squeeze_ZERO").value);(!Squeeze_ZERO||Squeeze_ZERO>2500||Squeeze_ZERO<500)&&(validValue=!1,invalidValues.push("Squeeze servo ZERO")),validValue?(userSettings.RightServo_ZERO=RightServo_ZERO,userSettings.LeftServo_ZERO=LeftServo_ZERO,userSettings.RightUpperServo_ZERO=RightUpperServo_ZERO,userSettings.LeftUpperServo_ZERO=LeftUpperServo_ZERO,userSettings.PitchLeftServo_ZERO=PitchLeftServo_ZERO,userSettings.PitchRightServo_ZERO=PitchRightServo_ZERO,userSettings.ValveServo_ZERO=ValveServo_ZERO,userSettings.TwistServo_ZERO=TwistServo_ZERO,updateUserSettings()):showError("<div name='zeroValidation'>Zeros NOT saved due to invalid input.<br><div style='margin-left: 25px;'>The values should be between 500 and 2500 for the following:<br><div style='color: white; margin-left: 25px;'>"+invalidValues.join("<br>")+"</div></div></div>")}),2e3)}function updateLubeAmount(){userSettings.lubeAmount=parseInt(document.getElementById("lubeAmount").value),updateUserSettings()}function setDiplayIs32Px(){var heightControl=document.getElementById("Display_Screen_Height");document.getElementById("displayIs32Px").checked?heightControl.value=32:heightControl.value=64,userSettings.Display_Screen_Height=parseInt(heightControl.value),setRestartRequired(),updateUserSettings()}function setDisplaySettings(){const enabled=document.getElementById("displayEnabled").checked;!userSettings.displayEnabled&&enabled&&validatePins(),userSettings.displayEnabled=enabled,userSettings.Display_I2C_Address=document.getElementById("Display_I2C_Address_text").value,userSettings.sleeveTempDisplayed=document.getElementById("sleeveTempDisplayed").checked,userSettings.internalTempDisplayed=document.getElementById("internalTempDisplayed").checked,userSettings.versionDisplayed=document.getElementById("versionDisplayed").checked,setRestartRequired(),userSettings.displayEnabled&&validatePins(),updateUserSettings()}function setDisplayAddress(){var selectValue=document.getElementById("Display_I2C_Address").value;document.getElementById("Display_I2C_Address_text").value=selectValue,userSettings.Display_I2C_Address=selectValue,setRestartRequired(),updateUserSettings()}function setTempSettings(){const enabled=document.getElementById("tempSleeveEnabled").checked;!userSettings.tempSleeveEnabled&&enabled&&validatePins(),userSettings.tempSleeveEnabled=enabled,userSettings.TargetTemp=parseFloat(document.getElementById("TargetTemp").value),userSettings.HeatPWM=parseInt(document.getElementById("HeatPWM").value),userSettings.HoldPWM=parseInt(document.getElementById("HoldPWM").value),userSettings.heaterThreshold=parseInt(document.getElementById("heaterThreshold").value),userSettings.heaterResolution=parseInt(document.getElementById("heaterResolution").value),Utils.toggleControlVisibilityByID("sleeveTempDisplayedRow",hasFeature(BuildFeature.TEMP)&&userSettings.tempSleeveEnabled),setRestartRequired(),updateUserSettings()}function setInternalTempSettings(){userSettings.tempInternalEnabled=document.getElementById("tempInternalEnabled").checked,userSettings.caseFanResolution=parseInt(document.getElementById("caseFanResolution").value),Utils.toggleControlVisibilityByID("internalTempDisplayedRow",hasFeature(BuildFeature.TEMP)&&userSettings.tempInternalEnabled),setRestartRequired(),updateUserSettings()}function toggleVoiceSettings(){userSettings.voiceEnabled=document.getElementById("voiceEnabled").checked,setRestartRequired(),userSettings.voiceEnabled&&validatePins(),updateUserSettings()}function setVoiceSettings(){userSettings.voiceMuted=document.getElementById("voiceMuted").checked,validateIntControl("voiceVolume",userSettings,"voiceVolume")&&validateIntControl("voiceWakeTime",userSettings,"voiceWakeTime")&&(setRestartRequired(),updateUserSettings(0))}function setFanControl(){userSettings.fanControlEnabled=document.getElementById("fanControlEnabled").checked,toggleFanControlSettings(userSettings.fanControlEnabled),setRestartRequired(),userSettings.fanControlEnabled&&validatePins(),updateUserSettings()}function setFanOnTemp(){userSettings.internalTempForFan=parseFloat(document.getElementById("internalTempForFan").value),updateUserSettings()}function setMaxTemp(){userSettings.internalMaxTemp=parseFloat(document.getElementById("internalMaxTemp").value),updateUserSettings()}function setBuildFanControl(enabled){for(var elements=document.getElementsByClassName("fan-control-build"),i=0;i<elements.length;i++)Utils.toggleElementShown(elements[i],enabled);toggleFanControlSettings(enabled)}function toggleFanControlSettings(enabled){for(var elements=document.getElementsByClassName("fan-control"),i=0;i<elements.length;i++)Utils.toggleElementShown(elements[i],enabled)}function connectWifi(){}function showWifiPassword(){var x=document.getElementById("wifiPass");"password"===x.type?x.type="text":x.type="password"}function updateWifiLoginSettings(){wifiSettings.ssid=document.getElementById("ssid").value,wifiSettings.wifiPass=document.getElementById("wifiPass").value,setRestartRequired(),postWifiSettings()}function updateWifiSettings(){null!==staticIPAddressTimeout&&clearTimeout(staticIPAddressTimeout);var staticIP=document.getElementById("staticIP").checked;toggleStaticIPSettings(staticIP),staticIPAddressTimeout=setTimeout((()=>{var ips={};ips.localIP=document.getElementById("localIPInput").value,ips.gateway=document.getElementById("gatewayInput").value,ips.subnet=document.getElementById("subnetInput").value,ips.dns1=document.getElementById("dns1Input").value,ips.dns2=document.getElementById("dns2Input").value,validateStaticIPAddresses(ips)&&(wifiSettings.staticIP=staticIP,wifiSettings.localIP=ips.localIP,wifiSettings.gateway=ips.gateway,wifiSettings.subnet=ips.subnet,wifiSettings.dns1=ips.dns1,wifiSettings.dns2=ips.dns2,setRestartRequired(),postWifiSettings(0))}),3e3)}function validateStaticIPAddresses(ips){var invalidIPS=[];if(clearErrors("staticIPValidation"),isValidIP(ips.localIP)||invalidIPS.push("Invalid static IP address"),isValidIP(ips.gateway)||invalidIPS.push("Invalid static gateway address"),isValidIP(ips.subnet)||invalidIPS.push("Invalid static subnet address"),ips.dns1&&ips.dns1.length>0&&!isValidIP(ips.dns1)&&invalidIPS.push("Invalid static dns1 address"),ips.dns1&&ips.dns2.length>0&&!isValidIP(ips.dns1)&&invalidIPS.push("Invalid static dns2 address"),invalidIPS.length){var errorString="<div name='staticIPValidation'>Static Ip settings not saved due to invalid IP addresses<br>";return errorString+="<div style='margin-left: 25px;'>The following addreses are invalid:<br><div style='color: white; margin-left: 25px;'>"+invalidIPS.join("<br>")+"</div></div>",showError(errorString+="</div>"),!1}return!0}function toggleStaticIPSettings(isStatic){Utils.toggleControlVisibilityByID("localIP",isStatic),Utils.toggleControlVisibilityByID("gateway",isStatic),Utils.toggleControlVisibilityByID("subnet",isStatic),Utils.toggleControlVisibilityByID("dns1",isStatic),Utils.toggleControlVisibilityByID("dns2",isStatic)}function toggleDeviceOptions(deviceType){for(var osrOnly=document.getElementsByClassName("osrOnly"),sr6Only=document.getElementsByClassName("sr6Only"),i=0;i<sr6Only.length;i++)sr6Only[i].style.display=deviceType==DeviceType.SR6&&deviceType!=DeviceType.SSR1?"flex":"none";for(i=0;i<osrOnly.length;i++)osrOnly[i].style.display=deviceType==DeviceType.OSR&&deviceType!=DeviceType.SSR1?"flex":"none";deviceType==DeviceType.SR6&&deviceType!=DeviceType.SSR1&&425==userSettings.msPerRad&&(document.getElementById("msPerRadIs270").checked=!0)}function toggleNonTCodev3Options(){for(var v2Only=document.getElementsByClassName("v2Only"),v3Only=document.getElementsByClassName("v3Only"),i=0;i<v3Only.length;i++)v3Only[i].style.display=isTCodeV3()?"flex":"none";for(i=0;i<v2Only.length;i++)v2Only[i].style.display=isTCodeV3()?"none":"flex";toggleFeedbackTwistSettings(userSettings.feedbackTwist),userSettings.feedbackTwist&&!isTCodeV3()&&(document.getElementById("analogTwistRow").style.display="none")}function updateBlueToothSettings(){const element=document.getElementById("bluetoothEnabled");let value=element.checked;if(value&&systemInfo.moduleType==ModuleType.WROOM32){if(wifiSettings.bleEnabled)return alert("BLE and Bluetooth classic cannot be enabled at the same time due to ram constraints."),void(element.checked=!1);confirm("This will disable this web server. The Wroom32 chip does not have enough memory for bluetooth and the web server.\n\nYou will need to disable bluetooth to see this web page again.\n\nMost settings can be configured via tcode command #setting.\nUse the tcode command #help for more information\n\nUDP TCode will probably still work.\n\nYuu will be able to continue configuration on this page until you reboot the board."+"\n\nContinue?")?(wifiSettings.bluetoothEnabled=value,setRestartRequired(),postWifiSettings()):element.checked=!1}else wifiSettings.bluetoothEnabled=value,setRestartRequired(),postWifiSettings()}function toggleBluetoothSettings(){if(!hasFeature(BuildFeature.BLUETOOTH)){const elements=document.getElementsByClassName("bluetoothOnly");for(var i=0;i<elements.length;i++)elements[i].classList.add("hidden")}}function updateBleSettings(){const element=document.getElementById("bleEnabled");let value=element.checked;if(value&&systemInfo.moduleType==ModuleType.WROOM32){if(wifiSettings.bluetoothEnabled)return alert("BLE and Bluetooth classic cannot be enabled at the same time due to ram constraints."),void(element.checked=!1);confirm("This will disable this web server. The Wroom32 chip does not have enough memory for bluetooth and the web server.\n\nYou will need to disable bluetooth to see this web page again.\n\nMost settings can be configured via tcode command #setting.\nUse the tcode command #help for more information\n\nUDP TCode will probably still work.\n\nYuu will be able to continue configuration on this page until you reboot the board."+"\n\nContinue?")?(wifiSettings.bleEnabled=value,setRestartRequired(),postWifiSettings()):element.checked=!1}else wifiSettings.bleEnabled=value,setRestartRequired(),postWifiSettings();toggleBLEDeviceTypes(wifiSettings.bleEnabled)}function toggleBLESettings(){if(hasFeature(BuildFeature.BLE));else{const elements=document.getElementsByClassName("BLEOnly");for(var i=0;i<elements.length;i++)elements[i].classList.add("hidden")}}function toggleBLEDeviceTypes(){const elements=document.getElementsByClassName("BLEEnabled");for(var i=0;i<elements.length;i++)wifiSettings.bleEnabled&&hasFeature(BuildFeature.BLE)?elements[i].classList.remove("hidden"):elements[i].classList.add("hidden")}function setBLEDeviceType(){wifiSettings.bleDeviceType=document.getElementById("bleDeviceType").value,toggleBLELoveDeviceTypes(),setRestartRequired(),postWifiSettings()}function toggleBLELoveDeviceTypes(){const elements=document.getElementsByClassName("BLELoveOnly");for(var i=0;i<elements.length;i++)wifiSettings.bleDeviceType==BLEDeviceType.LOVE&&hasFeature(BuildFeature.BLE)?elements[i].classList.remove("hidden"):elements[i].classList.add("hidden")}function setBLELoveDeviceType(){wifiSettings.bleLoveDeviceType=document.getElementById("bleLoveDeviceType").value,setRestartRequired(),postWifiSettings()}function setTCodeVersion(){userSettings.TCodeVersion=parseInt(document.getElementById("TCodeVersion").value),toggleNonTCodev3Options(),setRestartRequired(),updateUserSettings()}function setRestartRequired(){documentLoaded&&(restartRequired=!0)}function updateVibTimeout(){userSettings.vibTimeout=parseInt(document.getElementById("vibTimeout").value),userSettings.vibTimeoutEnabled=document.getElementById("vibTimeoutEnabled").checked,updateUserSettings()}function updateLubeEnabled(){userSettings.lubeEnabled=document.getElementById("lubeEnabled").checked,setRestartRequired(),updateUserSettings()}function toggleSounds(){playSounds=document.getElementById("soundsEnabled").checked,document.getElementsByName("testSoundButton").forEach((element=>{Utils.toggleElementShown(element,playSounds)}))}function exportToJsonFile(){alert("Wifi password will NOT be exported!");const userSettingsCopy=JSON.parse(JSON.stringify(userSettings));userSettingsCopy.wifiSettings=wifiSettings,userSettingsCopy.motionDefaultProfileIndex=motionProviderSettings.motionDefaultProfileIndex,userSettingsCopy.motionProfiles=motionProviderSettings.motionProfiles,userSettingsCopy.buttonSettings=buttonSettings,userSettingsCopy.pinoutSettings=pinoutSettings;let dataStr=JSON.stringify(userSettingsCopy),dataUri="data:application/json;charset=utf-8,"+encodeURIComponent(dataStr),exportFileDefaultName="userSettings_"+systemInfo.esp32Version+".json",linkElement=document.createElement("a");linkElement.setAttribute("href",dataUri),linkElement.setAttribute("download",exportFileDefaultName),linkElement.click()}function createImportSettingsInputElement(){(importSettingsInputElement=document.createElement("input")).type="file",importSettingsInputElement.accept="application/json,.json",importSettingsInputElement.addEventListener("change",importSettings)}function openImportSettingsFileDialog(){importSettingsInputElement.dispatchEvent(new MouseEvent("click"))}function importSettings(){if(alert("Wifi password will NOT be imported!"),importSettingsInputElement.files.length>0){var json=importSettingsInputElement.files[0],reader=new FileReader;reader.addEventListener("load",(()=>{var text=reader.result,json=JSON.parse(text);Object.keys(json).forEach((function(key,index){if("wifiPass"!==key){var importedValue=json[key],existingValue=userSettings[key],wifiValue=wifiSettings[key];null!=existingValue&&null!=existingValue?userSettings[key]=checkMigrateData(key,importedValue):null!=wifiValue&&null!=wifiValue?wifiSettings[key]=checkMigrateData(key,importedValue):handleImportRenames(key,importedValue)}})),-1==tcodeVersions.findIndex((x=>x.value==userSettings.TCodeVersion))&&(userSettings.TCodeVersion=latestTCodeVersion,document.getElementById("TCodeVersion").value=userSettings.TCodeVersion,toggleNonTCodev3Options()),setWifiSettings(),setUserSettings(),setPinoutSettings(),setRestartRequired(),updateALLUserSettings()}),!1),reader.readAsText(json)}}function checkMigrateData(key,value){return"TCodeVersion"==key&&1==value?TCodeVersion.V3:value}function handleImportRenames(key,value){switch(key){case"LubeManual_PIN":return void(pinoutSettings.LubeButton_PIN=value);case"motionProfiles":return motionProviderSettings.motionProfiles=value,void motionProviderSettings.motionProfiles.forEach((x=>{x.edited=!0,x.channels.forEach((y=>y.edited=!0))}));case"motionDefaultProfileIndex":return void(motionProviderSettings.motionDefaultProfileIndex=value);case"wifiSettings":return void Object.keys(value).forEach((function(key,index){"wifiPass"!==key&&(wifiSettings[key]=value[key])}));case"ssid":return void(wifiSettings.ssid=value);case"staticIP":return void(wifiSettings.staticIP=value);case"localIP":return void(wifiSettings.localIP=value);case"gateway":return void(wifiSettings.gateway=value);case"subnet":return void(wifiSettings.subnet=value);case"dns1":return void(wifiSettings.dns1=value);case"dns2":return void(wifiSettings.dns2=value);case"udpServerPort":return void(wifiSettings.udpServerPort=value);case"webServerPort":return void(wifiSettings.webServerPort=value);case"hostname":return void(wifiSettings.hostname=value);case"friendlyName":return void(wifiSettings.friendlyName=value);case"bootButtonCommand":return void(buttonSettings.bootButtonCommand=value);case"buttonSettings":return void(buttonSettings=value);case"pinoutSettings":return void Object.keys(value).forEach((function(key,index){pinoutSettings[key]=value[key]}));case"sr6Mode":return void(systemInfo.motorType==MotorType.BLDC?userSettings.deviceType=DeviceType.SSR1:userSettings.deviceType=value?DeviceType.SR6:DeviceType.OSR);case"BLDC_UsePWM":userSettings.BLDC_Encoder=value?BLDCEncoderType.PWM:BLDCEncoderType.SPI;case"BLDC_UseMT6701":userSettings.BLDC_Encoder=value?BLDCEncoderType.MT6701:BLDCEncoderType.SPI}key.endsWith("_PIN")&&(pinoutSettings[key]=value)}